{
  "version": 3,
  "sources": ["../../src/app/dom.js", "../../src/app/elements.js", "../../src/app/state.js", "../../src/domain/pronounSet.js", "../../data/pronounSets.js", "../../src/features/pronounRecommendations.js", "../../src/features/pronouns.js", "../../data/SampleTexts.js", "../../src/features/texts.js", "../../src/features/tts.js", "../../src/features/results/mobileIconRow.js", "../../src/features/results/markerDialog.js", "../../src/app/constants.js", "../../src/features/names.js", "../../src/features/share.js", "../../src/domain/queryState.js", "../../src/flows/hydrateFlow.js", "../../data/lastNames.js", "../../data/firstNames.js", "../../src/domain/names.js", "../../src/domain/pronounForms.js", "../../src/domain/pronounTool.js", "../../src/domain/declensionData.js", "../../src/features/results/declensionView.js", "../../src/features/results/resultsHeader.js", "../../src/features/results/resultsView.js", "../../src/flows/renderUtils.js", "../../src/flows/urlUtils.js", "../../src/flows/generateFlow.js", "../../src/domain/random.js", "../../src/flows/rerunFlow.js", "../../src/flows/randomTextFlow.js", "../../src/flows/shareFlow.js", "../../src/flows/markerFlow.js", "../../src/app/bootstrap.js"],
  "sourcesContent": ["// Tiny DOM helpers for consistent query usage.\n/**\n * Query a single element from the DOM.\n * @param {string} selector\n * @param {ParentNode} root\n * @returns {Element|null}\n */\nexport const $ = (selector, root = document) => root.querySelector(selector);\n\n/**\n * Query multiple elements from the DOM as an array.\n * @param {string} selector\n * @param {ParentNode} root\n * @returns {Element[]}\n */\nexport const $$ = (selector, root = document) =>\n  Array.from(root.querySelectorAll(selector));\n", "import { $ } from \"./dom.js\";\n\n/**\n * Capture core UI element references.\n * @returns {object}\n */\nexport function createElements() {\n  return {\n    namesContainer: $(\"#namesContainer\"),\n    salutationSelect: $(\"#salutation\"),\n    textSelector: $(\"#textSelector\"),\n    randomTextButton: $(\"#randomTextButton\"),\n    pronounContainer: $(\"#pronounContainer\"),\n    randomSingleRadio: $(\"#randomSingle\"),\n    randomEachRadio: $(\"#randomEach\"),\n    randomModeContainer: $(\".random-mode\"),\n    resultsControls: $(\".results-controls\"),\n    shareButton: $(\"#shareButton\"),\n    shareSheetButton: $(\"#shareSheetButton\"),\n    markerToggle: $(\"#markerToggle\"),\n    rerunButton: $(\"#rerunButton\"),\n    resultsOutput: $(\"#resultsOutput\"),\n    markerDialog: $(\"#markerDialog\"),\n    markerDialogBody: $(\"#markerDialogBody\"),\n    markerDialogTitle: $(\"#markerDialogTitle\"),\n  };\n}\n", "/**\n * Build the initial in-memory UI state.\n * @returns {object}\n */\nexport function createState() {\n  return {\n    lastSinglePronounLabel: null,\n    lastSingleNameKey: null,\n    selectedDeclensionTabId: null,\n    isHydrating: true,\n  };\n}\n", "/*\n * PronounSet.js\n *\n * Defines a simple class representing a set of pronouns and their declensions.\n */\n\nexport default class PronounSet {\n  /**\n   * Construct a new pronoun set.\n   *\n   * @param {Object} options An object containing the declension forms.\n   * @param {string} options.bezeichnung The human readable label.\n   * @param {string} [options.group] Optional group label for UI grouping.\n   * @param {string|null} options.nominativ Form for the nominative case or\n   *   null when using the person\u2019s name (Keine Pronomen).\n   * @param {string|null} options.dativ Form for the dative case.\n   * @param {string|null} options.akkusativ Form for the accusative case.\n   * @param {string|null} options.poss1 Possessive form 1.\n   * @param {string|null} options.poss2 Possessive form 2.\n   * @param {string|null} options.poss3 Possessive form 3.\n   * @param {string|null} options.poss4 Possessive form 4.\n   * @param {string|null} options.poss5 Possessive form 5.\n   * @param {string|null} options.poss6 Possessive form 6.\n   */\n  constructor(options) {\n    this.bezeichnung = options.bezeichnung;\n    this.group = options.group;\n    this.forms = {\n      nominativ: options.nominativ,\n      dativ: options.dativ,\n      akkusativ: options.akkusativ,\n      \"poss. 1\": options.poss1,\n      \"poss. 2\": options.poss2,\n      \"poss. 3\": options.poss3,\n      \"poss. 4\": options.poss4,\n      \"poss. 5\": options.poss5,\n      \"poss. 6\": options.poss6,\n    };\n  }\n\n  /**\n   * Determine whether this set corresponds to the \u201CKeine Pronomen\u201D option.\n   *\n   * @returns {boolean} True when no personal pronouns are used.\n   */\n  get isNone() {\n    return this.bezeichnung === \"Keine Pronomen\";\n  }\n\n  /**\n   * Compute the possessive suffix for a name. When the name ends\n   * with an s/S or x/X, only an apostrophe is appended. Otherwise an \"s\" is added.\n   *\n   * @param {string} name The base name.\n   * @returns {string} The possessive form of the name.\n   */\n  static possessive(name) {\n    const trimmed = String(name || \"\").trim();\n    if (!trimmed) return \"\";\n\n    // Unicode-safe: in decomposed text, the last code point can be a combining mark.\n    // Example: \"Maks\\u0301\" (looks like \"Maks\u0301\") ends with a mark, but the last letter is \"s\".\n    const lastLetter =\n      trimmed.match(/[\\p{L}\\p{M}]+$/u)?.[0].slice(-1) ?? trimmed.at(-1);\n\n    if (lastLetter && /[sx]/i.test(lastLetter)) {\n      return `${trimmed}'`;\n    }\n\n    return `${trimmed}s`;\n  }\n\n  /**\n   * Retrieve the appropriate form for a given token. When no pronouns\n   * are used, the person\u2019s name (firstName) is returned for the\n   * nominative, dative and accusative cases; the possessive cases append\n   * a genitive suffix to the name.\n   *\n   * @param {string} token The token, e.g. \"Nominativ\", \"Dativ\", \"Akkusativ\",\n   *   or \"Poss. 1\".\n   * @param {string} personName The person\u2019s name used for the no pronoun\n   *   variant.\n   * @returns {string} The selected pronoun or name form.\n   */\n  getForm(token, personName) {\n    // Normalise token key\n    const key = token.toLowerCase();\n\n    if (this.isNone) {\n      // Without pronouns: nominativ/dativ/akkusativ all use the name.\n      if (key === \"nominativ\" || key === \"dativ\" || key === \"akkusativ\") {\n        return personName;\n      }\n\n      // Possessive forms: append the possessive suffix.\n      if (key.startsWith(\"poss.\")) {\n        return PronounSet.possessive(personName);\n      }\n\n      // Fallback to name if the token is unknown.\n      return personName;\n    }\n\n    // Use stored form; if not found return empty string.\n    const value = this.forms[key];\n    if (value == null) {\n      return \"\";\n    }\n\n    return value;\n  }\n}\n", "/**\n * pronounSets.js\n *\n * This module exports an array of pronoun set definitions.  Each set\n * consists of a human\u2011readable label (the \u201Cbezeichnung\u201D) and the\n * corresponding declension forms used when substituting tokens in\n * sample texts.\n */\nexport default [\n  {\n    bezeichnung: \"Er/ihm\",\n    group: \"H\u00E4ufige Pronomen\",\n    nominativ: \"er\",\n    dativ: \"ihm\",\n    akkusativ: \"ihn\",\n    poss1: \"sein\",\n    poss2: \"seine\",\n    poss3: \"seinen\",\n    poss4: \"seiner\",\n    poss5: \"seinem\",\n    poss6: \"seines\",\n  },\n  {\n    bezeichnung: \"Sie/ihr\",\n    group: \"H\u00E4ufige Pronomen\",\n    nominativ: \"sie\",\n    dativ: \"ihr\",\n    akkusativ: \"sie\",\n    poss1: \"ihr\",\n    poss2: \"ihre\",\n    poss3: \"ihren\",\n    poss4: \"ihrer\",\n    poss5: \"ihrem\",\n    poss6: \"ihres\",\n  },\n  {\n    bezeichnung: \"Es/ihm\",\n    group: \"H\u00E4ufige Pronomen\",\n    nominativ: \"es\",\n    dativ: \"ihm\",\n    akkusativ: \"es\",\n    poss1: \"sein\",\n    poss2: \"seine\",\n    poss3: \"seinen\",\n    poss4: \"seiner\",\n    poss5: \"seinem\",\n    poss6: \"seines\",\n  },\n  {\n    bezeichnung: \"Es/ihr\",\n    group: \"H\u00E4ufige Pronomen\",\n    nominativ: \"es\",\n    dativ: \"ihr\",\n    akkusativ: \"es\",\n    poss1: \"ihr\",\n    poss2: \"ihre\",\n    poss3: \"ihren\",\n    poss4: \"ihrer\",\n    poss5: \"ihrem\",\n    poss6: \"ihres\",\n  },\n  {\n    bezeichnung: \"Es/denen\",\n    group: \"H\u00E4ufige Pronomen\",\n    nominativ: \"es\",\n    dativ: \"denen\",\n    akkusativ: \"es\",\n    poss1: \"deren\",\n    poss2: \"deren\",\n    poss3: \"deren\",\n    poss4: \"derer\",\n    poss5: \"derem\",\n    poss6: \"deren\",\n  },\n  {\n    bezeichnung: \"Dey/demm\",\n    group: \"H\u00E4ufige Pronomen\",\n    nominativ: \"dey\",\n    dativ: \"demm\",\n    akkusativ: \"demm\",\n    poss1: \"deren\",\n    poss2: \"deren\",\n    poss3: \"deren\",\n    poss4: \"derer\",\n    poss5: \"derem\",\n    poss6: \"deren\",\n  },\n  {\n    bezeichnung: \"Fae/faem\",\n    group: \"Neopronomen\",\n    nominativ: \"fae\",\n    dativ: \"faem\",\n    akkusativ: \"faer\",\n    poss1: \"faen\",\n    poss2: \"faene\",\n    poss3: \"faenen\",\n    poss4: \"faener\",\n    poss5: \"faenem\",\n    poss6: \"faenes\",\n  },\n  {\n    bezeichnung: \"Hen/hen\",\n    group: \"Neopronomen\",\n    nominativ: \"hen\",\n    dativ: \"hen\",\n    akkusativ: \"hen\",\n    poss1: \"hens\",\n    poss2: \"hens\",\n    poss3: \"hens\",\n    poss4: \"hens\",\n    poss5: \"hens\",\n    poss6: \"hens\",\n  },\n  {\n    bezeichnung: \"Hen/hem\",\n    group: \"Neopronomen\",\n    nominativ: \"hen\",\n    dativ: \"hem\",\n    akkusativ: \"hen\",\n    poss1: \"hens\",\n    poss2: \"hens\",\n    poss3: \"hens\",\n    poss4: \"hens\",\n    poss5: \"hens\",\n    poss6: \"hens\",\n  },\n  {\n    bezeichnung: \"They/them\",\n    group: \"Neopronomen\",\n    nominativ: \"they\",\n    dativ: \"them\",\n    akkusativ: \"them\",\n    poss1: \"their\",\n    poss2: \"their\",\n    poss3: \"their\",\n    poss4: \"their\",\n    poss5: \"their\",\n    poss6: \"their\",\n  },\n  {\n    bezeichnung: \"x\",\n    group: \"Neopronomen\",\n    nominativ: \"x\",\n    dativ: \"x\",\n    akkusativ: \"x\",\n    poss1: \"x\",\n    poss2: \"x'\",\n    poss3: \"x'\",\n    poss4: \"x'\",\n    poss5: \"x'\",\n    poss6: \"x'\",\n  },\n  {\n    bezeichnung: \"Nin/nim\",\n    group: \"Neopronomen\",\n    nominativ: \"nin\",\n    dativ: \"nim\",\n    akkusativ: \"nin\",\n    poss1: \"nims\",\n    poss2: \"nimse\",\n    poss3: \"nims\",\n    poss4: \"nims\",\n    poss5: \"nims\",\n    poss6: \"nims\",\n  },\n  {\n    bezeichnung: \"Sey/sem (serer)\",\n    group: \"Neopronomen\",\n    nominativ: \"sey\",\n    dativ: \"sem\",\n    akkusativ: \"sem\",\n    poss1: \"serer\",\n    poss2: \"serer\",\n    poss3: \"serer\",\n    poss4: \"serer\",\n    poss5: \"serer\",\n    poss6: \"serer\",\n  },\n  {\n    bezeichnung: \"Sey/sem (seren)\",\n    group: \"Neopronomen\",\n    nominativ: \"sey\",\n    dativ: \"sem\",\n    akkusativ: \"sem\",\n    poss1: \"seren\",\n    poss2: \"seren\",\n    poss3: \"seren\",\n    poss4: \"seren\",\n    poss5: \"seren\",\n    poss6: \"seren\",\n  },\n  {\n    bezeichnung: \"Sier/siem (sies)\",\n    group: \"Neopronomen\",\n    nominativ: \"sier\",\n    dativ: \"siem\",\n    akkusativ: \"sien\",\n    poss1: \"sies\",\n    poss2: \"siese\",\n    poss3: \"siesen\",\n    poss4: \"sieser\",\n    poss5: \"siesem\",\n    poss6: \"sieses\",\n  },\n  {\n    bezeichnung: \"Sier/siem (sien)\",\n    group: \"Neopronomen\",\n    nominativ: \"sier\",\n    dativ: \"siem\",\n    akkusativ: \"sien\",\n    poss1: \"sien\",\n    poss2: \"siene\",\n    poss3: \"sienen\",\n    poss4: \"siener\",\n    poss5: \"sienem\",\n    poss6: \"sienes\",\n  },\n  {\n    bezeichnung: \"Sier/sier\",\n    group: \"Neopronomen\",\n    nominativ: \"sier\",\n    dativ: \"sier\",\n    akkusativ: \"sier\",\n    poss1: \"sier\",\n    poss2: \"sier\",\n    poss3: \"sier\",\n    poss4: \"sier\",\n    poss5: \"sier\",\n    poss6: \"sier\",\n  },\n  {\n    bezeichnung: \"Xier/xiem\",\n    group: \"Neopronomen\",\n    nominativ: \"xier\",\n    dativ: \"xiem\",\n    akkusativ: \"xien\",\n    poss1: \"xies\",\n    poss2: \"xiese\",\n    poss3: \"xiesen\",\n    poss4: \"xieser\",\n    poss5: \"xiesem\",\n    poss6: \"xieses\",\n  },\n  {\n    bezeichnung: \"Er*sie\",\n    group: \"Kombinierte Pronomen\",\n    nominativ: \"er*sie\",\n    dativ: \"ihm*ihr\",\n    akkusativ: \"ihn*sie\",\n    poss1: \"sein*ihr\",\n    poss2: \"seine*ihre\",\n    poss3: \"seinen*ihren\",\n    poss4: \"seiner*ihren\",\n    poss5: \"seinem*ihrem\",\n    poss6: \"seines*ihres\",\n  },\n  {\n    bezeichnung: \"Sie*er\",\n    group: \"Kombinierte Pronomen\",\n    nominativ: \"sie*er\",\n    dativ: \"ihr*ihm\",\n    akkusativ: \"sie*ihn\",\n    poss1: \"ihr*sein\",\n    poss2: \"ihre*seine\",\n    poss3: \"ihren*seinen\",\n    poss4: \"ihren*seiner\",\n    poss5: \"ihrem*seinem\",\n    poss6: \"ihres*seines\",\n  },\n  {\n    bezeichnung: \"Der/dey\",\n    group: \"Neopronomen\",\n    nominativ: \"der\",\n    dativ: \"dey\",\n    akkusativ: \"dey\",\n    poss1: \"deren\",\n    poss2: \"deren\",\n    poss3: \"deren\",\n    poss4: \"derer\",\n    poss5: \"derem\",\n    poss6: \"deren\",\n  },\n  {\n    bezeichnung: \"Dey/denen\",\n    group: \"Neopronomen\",\n    nominativ: \"dey\",\n    dativ: \"denen\",\n    akkusativ: \"dey\",\n    poss1: \"deren\",\n    poss2: \"deren\",\n    poss3: \"deren\",\n    poss4: \"derer\",\n    poss5: \"derem\",\n    poss6: \"deren\",\n  },\n  {\n    bezeichnung: \"Per\",\n    group: \"Neopronomen\",\n    nominativ: \"per\",\n    dativ: \"per\",\n    akkusativ: \"per\",\n    poss1: \"pers\",\n    poss2: \"pers\",\n    poss3: \"pers\",\n    poss4: \"pers\",\n    poss5: \"pers\",\n    poss6: \"pers\",\n  },\n  {\n    bezeichnung: \"En/ens\",\n    group: \"Neopronomen\",\n    nominativ: \"en\",\n    dativ: \"ens\",\n    akkusativ: \"en\",\n    poss1: \"ens\",\n    poss2: \"ens\",\n    poss3: \"ens\",\n    poss4: \"ens\",\n    poss5: \"ens\",\n    poss6: \"ens\",\n  },\n  {\n    bezeichnung: \"Mensch\",\n    group: \"Substantive\",\n    nominativ: \"mensch\",\n    dativ: \"mensch\",\n    akkusativ: \"mensch\",\n    poss1: \"menschs\",\n    poss2: \"menschs\",\n    poss3: \"menschs\",\n    poss4: \"menschs\",\n    poss5: \"menschs\",\n    poss6: \"menschs\",\n  },\n  {\n    bezeichnung: \"Wesen\",\n    group: \"Substantive\",\n    nominativ: \"wesen\",\n    dativ: \"wesen\",\n    akkusativ: \"wesen\",\n    poss1: \"wesens\",\n    poss2: \"wesens\",\n    poss3: \"wesens\",\n    poss4: \"wesens\",\n    poss5: \"wesens\",\n    poss6: \"wesens\",\n  },\n  {\n    bezeichnung: \"Die/denen\",\n    group: \"Plural-Pronomen\",\n    nominativ: \"die\",\n    dativ: \"denen\",\n    akkusativ: \"die\",\n    poss1: \"deren\",\n    poss2: \"deren\",\n    poss3: \"deren\",\n    poss4: \"derer\",\n    poss5: \"derem\",\n    poss6: \"deren\",\n  },\n  {\n    bezeichnung: \"Sie/ihnen\",\n    group: \"Plural-Pronomen\",\n    nominativ: \"sie\",\n    dativ: \"ihnen\",\n    akkusativ: \"sie\",\n    poss1: \"ihr\",\n    poss2: \"ihre\",\n    poss3: \"ihren\",\n    poss4: \"ihrer\",\n    poss5: \"ihrem\",\n    poss6: \"ihres\",\n  },\n  {\n    bezeichnung: \"Keine Pronomen\",\n    group: \"Keine Pronomen\",\n    nominativ: null,\n    dativ: null,\n    akkusativ: null,\n    poss1: null,\n    poss2: null,\n    poss3: null,\n    poss4: null,\n    poss5: null,\n    poss6: null,\n  },\n];\n", "/**\n * Pick random pronoun entries, excluding specified groups.\n * @param {Array<{group?: string}>} pronounSets\n * @param {Set<string>} excludedGroups\n * @param {number} count\n * @returns {Array<{set: {bezeichnung: string, group?: string}, index: number}>}\n */\nexport function pickRandomPronounEntries(pronounSets, excludedGroups, count) {\n  if (!Array.isArray(pronounSets) || count <= 0) {\n    return [];\n  }\n\n  const entries = pronounSets\n    .map((set, index) => ({ set, index }))\n    .filter(({ set }) => !excludedGroups.has(set.group || \"Weitere Pronomen\"));\n\n  for (let i = entries.length - 1; i > 0; i -= 1) {\n    const swapIndex = Math.floor(Math.random() * (i + 1));\n    [entries[i], entries[swapIndex]] = [entries[swapIndex], entries[i]];\n  }\n\n  return entries.slice(0, Math.min(count, entries.length));\n}\n\n/**\n * Build the \"Kennst du schon...\" recommendation list element.\n * @param {Array<{set: {bezeichnung: string}, index: number}>} entries\n * @returns {HTMLElement}\n */\nexport function buildPronounRecommendations(entries) {\n  const wrapper = document.createElement(\"div\");\n  wrapper.className = \"pronoun-group\";\n\n  const title = document.createElement(\"h2\");\n  title.className = \"pronoun-group__title\";\n  title.textContent = \"Kennst du schon...\";\n  wrapper.appendChild(title);\n\n  const list = document.createElement(\"div\");\n  list.className = \"pronoun-list\";\n\n  entries.forEach(({ set, index }) => {\n    const label = document.createElement(\"label\");\n    const checkbox = document.createElement(\"input\");\n\n    checkbox.type = \"checkbox\";\n    checkbox.value = index.toString();\n    label.appendChild(checkbox);\n\n    const textNode = document.createTextNode(` ${set.bezeichnung}`);\n    label.appendChild(textNode);\n\n    const row = document.createElement(\"div\");\n    row.className = \"pronoun-item\";\n    row.appendChild(label);\n    list.appendChild(row);\n  });\n\n  wrapper.appendChild(list);\n  return wrapper;\n}\n\n/**\n * Keep checkbox states in sync for duplicate pronoun entries.\n * @param {HTMLElement} container\n */\nexport function bindPronounCheckboxSync(container) {\n  container.addEventListener(\"change\", (event) => {\n    const target = event.target;\n    if (!target || target.tagName !== \"INPUT\") {\n      return;\n    }\n\n    const checkbox = /** @type {HTMLInputElement} */ (target);\n    if (checkbox.type !== \"checkbox\" || checkbox.value === \"\") {\n      return;\n    }\n\n    const matching = container.querySelectorAll(\n      `input[type=\"checkbox\"][value=\"${checkbox.value}\"]`,\n    );\n\n    matching.forEach((input) => {\n      if (input !== checkbox) {\n        input.checked = checkbox.checked;\n      }\n    });\n  });\n}\n", "import PronounSet from \"../domain/pronounSet.js\";\nimport pronounSetsData from \"../../data/pronounSets.js\";\nimport {\n  bindPronounCheckboxSync,\n  buildPronounRecommendations,\n  pickRandomPronounEntries,\n} from \"./pronounRecommendations.js\";\n// Preload all pronoun sets from data for reuse across UI.\nexport const allPronounSets = pronounSetsData.map((def) => new PronounSet(def));\n\n/**\n * Build a group section with checkboxes for each pronoun set.\n * @param {string} groupName\n * @param {Array<{set: PronounSet, index: number}>} entries\n * @returns {HTMLElement}\n */\nfunction buildGroup(groupName, entries) {\n  const group = document.createElement(\"div\");\n  group.className = \"pronoun-group\";\n\n  const title = document.createElement(\"h2\");\n  title.className = \"pronoun-group__title\";\n  title.textContent = groupName;\n  group.appendChild(title);\n\n  const list = document.createElement(\"div\");\n  list.className = \"pronoun-list\";\n\n  const sortedEntries = [...entries].sort((a, b) =>\n    a.set.bezeichnung.localeCompare(b.set.bezeichnung, \"de\"),\n  );\n\n  sortedEntries.forEach(({ set, index }) => {\n    const id = `pronoun_${index}`;\n    const label = document.createElement(\"label\");\n    const checkbox = document.createElement(\"input\");\n\n    checkbox.type = \"checkbox\";\n    checkbox.id = id;\n    checkbox.value = index.toString();\n    label.appendChild(checkbox);\n\n    const textNode = document.createTextNode(` ${set.bezeichnung}`);\n    label.appendChild(textNode);\n\n    const row = document.createElement(\"div\");\n    row.className = \"pronoun-item\";\n    row.appendChild(label);\n    list.appendChild(row);\n  });\n\n  group.appendChild(list);\n  return group;\n}\n\n/**\n * Toggle the expanded/collapsed state of extra pronoun groups.\n * @param {HTMLElement} extraList\n * @param {HTMLButtonElement} toggleButton\n */\nfunction handleTogglePronounGroups(extraList, toggleButton) {\n  const isCollapsed = extraList.classList.toggle(\"is-collapsed\");\n  toggleButton.setAttribute(\"aria-expanded\", (!isCollapsed).toString());\n  toggleButton.textContent = isCollapsed\n    ? \"Weitere Pronomen anzeigen\"\n    : \"Weniger Pronomen anzeigen\";\n}\n\n// Render the checkbox list for pronoun sets.\n/**\n * Populate the pronoun checkbox UI grouped by category.\n * @param {HTMLElement} container\n */\nexport function populatePronounCheckboxes(container) {\n  const primaryGroups = new Set([\"H\u00E4ufige Pronomen\"]);\n  const recommendationEntries = pickRandomPronounEntries(\n    allPronounSets,\n    primaryGroups,\n    3,\n  );\n\n  const primaryList = document.createElement(\"div\");\n  primaryList.className = \"pronoun-groups pronoun-groups--primary\";\n\n  const extraList = document.createElement(\"div\");\n  extraList.className = \"pronoun-groups pronoun-groups--extra is-collapsed\";\n  extraList.id = \"pronounExtraList\";\n\n  const groupedSets = new Map();\n\n  allPronounSets.forEach((set, index) => {\n    const groupName = set.group || \"Weitere Pronomen\";\n    if (!groupedSets.has(groupName)) {\n      groupedSets.set(groupName, []);\n    }\n    groupedSets.get(groupName).push({ set, index });\n  });\n\n  const orderedGroups = Array.from(groupedSets.entries());\n\n  orderedGroups.forEach(([groupName, entries]) => {\n    const groupElement = buildGroup(groupName, entries);\n    if (primaryGroups.has(groupName)) {\n      if (groupName === \"H\u00E4ufige Pronomen\") {\n        groupElement.appendChild(\n          buildPronounRecommendations(recommendationEntries),\n        );\n      }\n      primaryList.appendChild(groupElement);\n    } else {\n      extraList.appendChild(groupElement);\n    }\n  });\n\n  container.appendChild(primaryList);\n\n  const toggleButton = document.createElement(\"button\");\n  toggleButton.type = \"button\";\n  toggleButton.className = \"pronoun-toggle\";\n  toggleButton.setAttribute(\"aria-expanded\", \"false\");\n  toggleButton.setAttribute(\"aria-controls\", \"pronounExtraList\");\n  toggleButton.textContent = \"Weitere Pronomen anzeigen\";\n  toggleButton.addEventListener(\n    \"click\",\n    handleTogglePronounGroups.bind(null, extraList, toggleButton),\n  );\n\n  const hasExtraGroups = extraList.childElementCount > 0;\n  toggleButton.hidden = !hasExtraGroups;\n  extraList.hidden = !hasExtraGroups;\n\n  container.appendChild(toggleButton);\n  container.appendChild(extraList);\n  bindPronounCheckboxSync(container);\n}\n\n// Resolve user selection, falling back to the \\\"Keine Pronomen\\\" entry.\n/**\n * Return selected pronoun sets, optionally falling back to random.\n * @param {HTMLElement} container\n * @param {{fallbackToRandom?: boolean}} options\n * @returns {PronounSet[]}\n */\nexport function getSelectedPronounSets(\n  container,\n  { fallbackToRandom = true } = {},\n) {\n  const selectedIndexes = Array.from(\n    new Set(\n      Array.from(container.querySelectorAll('input[type=\"checkbox\"]'))\n        .filter((box) => box.checked)\n        .map((box) => box.value),\n    ),\n  ).map((value) => parseInt(value, 10));\n\n  if (selectedIndexes.length > 0) {\n    return selectedIndexes.map((index) => allPronounSets[index]);\n  }\n\n  if (!fallbackToRandom) {\n    return [];\n  }\n\n  const index = Math.floor(Math.random() * allPronounSets.length);\n  return [allPronounSets[index]];\n}\n", "/**\n * SampleTexts.js\n *\n * This module exports a collection of stories and text fragments.\n * Each entry is a template string in which tokens enclosed in square\n * brackets (e.g. [Vorname], [Nominativ], [Poss. 1]) will be\n * substituted by the PronounTool class at runtime. Capitalized tokens\n * will stay capitalized in the outputted text.\n *\n * Texts kindly provided by Valo: https://valochristiansen.com/\n * Licensed under CC-BY-SA 4.0 Queer Lexikon e.V.\n */\nconst SampleTexts = {\n  school: {\n    title: \"Schule\",\n    text: `Halb acht Uhr morgens in einem Schulgeb\u00E4ude, irgendwo in einer gro\u00DFen oder kleinen Stadt.\n\n\u201EEy, Zill, hast du [Vorname] schon gesehen?\u201C\n\u201ENee, aber [nominativ] hat mir geschrieben, dass [poss. 1] Bus Versp\u00E4tung hat.\u201C\n\u201EAhhhhh, Shit, ich wollte noch Hausaufgaben bei [dativ] abschreiben, Frau Montez wird mir wieder den Kopf abrei\u00DFen.\u201C\n\u201EDu musst nicht auf [akkusativ] warten, ich kann dir meine geben.\u201C\n\u201EIch wei\u00DF nicht, ob deine so gut sind wie [poss. 2], aber ja ok. Besser als nix.\u201C\n\u201ENa danke. Aber ja, [nominativ] ist schon echt gut immer. Naja. Hier ist mein Heft, aber bitte \u00E4nder das bisschen, damit es nicht auff\u00E4llt!\u201C`,\n  },\n\n  afterTraining: {\n    title: \"Nach dem Training\",\n    text: `\u201EGutes Training, Leute!\u201D Joy gibt allen High Five. [Vorname] schl\u00E4gt ebenfalls ein und macht sich dann mit Kim auf den Heimweg.\n\n\u201EUff, ich bin richtig k.o. Das war echt nicht ohne heute.\u201C, seufzt Kim. [Vorname] stimmt zu, [poss. 1] K\u00F6rper f\u00FChlt sich schwer und ersch\u00F6pft an, aber auch ganz sch\u00F6n gut.\n\n\u201EKommst du am Freitag zur queeren Party?\u201C, fragt Kim irgendwann. \u201EIch wei\u00DF es noch nicht.\u201C, sagt [Vorname]. \u201EIch hab zwar Zeit, aber ich muss schauen, ob die Energie reicht.\u201C\n\nKim lacht: \u201EJa, voll. Ich auch.\u201C Es ist, was [Vorname] so an Kim mag \u2013 Kim versteht immer, dass manchmal die Energie niedrig ist. [Nominativ] will Kim eigentlich schon lange mal nach einem Treffen abseits von Training und Heimweg fragen, aber bisher hat [nominativ] sich noch nicht getraut. Es ist nicht immer leicht f\u00FCr [akkusativ], neue Freund*innen zu finden. [Poss. 3] anderen Freund*innen zufolge sollte [nominativ] sich wirklich keinen Kopf machen \u2013 aber so leicht ist das eben nicht immer.\n\n\u201EHey [Vorname]. Hast du eigentlich Lust, dich mal so zu treffen ohne Training? Also, an einem Tag, wenn genug Energie da ist?\u201C\n\n[Vorname] l\u00E4chelt: \u201EJa. Total gerne.\u201C`,\n  },\n\n  queerParty: {\n    title: \"Queere Party\",\n    text: `\u201EWo darf ich dir den Stempel hin machen?\u201C [Vorname] streckte der Person am Empfang [poss. 2] linke Hand hin und bekam einen dunklen Einhornstempel verpasst.\n\u201ESo, jetzt kannst du rein. Warst du schon mal da?\u201C [Nominativ] verneint.\n\u201EOkay, dann findest du nach dem Gang gleich rechts die Garderobe und daneben den Tisch, wo du dir ein Schild mit deinen Pronomen machen kannst, wenn du magst. Und da gibt\u2019s auch Sticker, mit denen du zeigen kannst, ob du flirten m\u00F6chtest oder lieber nicht. Gegen\u00FCber sind die Toiletten, alle genderneutral nat\u00FCrlich, nach hinten durch sind dann Bar und die beiden Floors. Viel Spa\u00DF dir!\u201C\n\n\u201ECool, danke!\u201C [Nominativ] geht langsam durch den dunklen Gang. An der Garderobe gibt [nominativ] [poss. 3] Pulli ab und schlendert dann zum Pronomentisch. [Nominativ] schreibt [Bezeichnung] auf ein St\u00FCck Kreppband und klebt es auf [poss. 1] Oberteil. Dann fragt [nominativ] sich, ob [dativ] heute nach flirten ist. Vielleicht sp\u00E4ter. Erst mal alles anschauen gehen.\n\nAuf der Tanzfl\u00E4che ist noch fast nichts los, aber die Person am Mischpult macht zumindest Musik, die [dativ] definitiv gef\u00E4llt und [poss. 1] Fu\u00DF wippt automatisch im Takt.\n\n\u201EHey, magst du einfach mit mir den Floor er\u00F6ffnen? Ich liebe \u00FCbrigens dein Outfit!\u201C Ein Mensch mit lila gef\u00E4rbten Locken hat sich zu [dativ] hingeneigt und schaut nun fragend.\n\n\u201EDanke. Und ja. Lass uns tanzen gehen!\u201C`,\n  },\n\n  conversation: {\n    title: \"Gespr\u00E4ch unter Freund*innen\",\n    text: `\u201EAber hast du das neue Poster in [poss. 5] Zimmer gesehen? Ich liiiiiebs, es ist einfach so gay!\u201C Anti lacht \u00FCberschw\u00E4nglich und st\u00F6\u00DFt Nics in die Rippen. Ich muss ebenfalls lachen.\n\n\u201ELeute, es ist einfach ein Poster.\u201C Anti widerspricht vehement, tut so, als w\u00FCrde Anti Nics zur Seite nehmen und fl\u00FCstert laut hinter der Hand: \u201EWei\u00DFt du, Nics, [Vorname] denkt immer, dass [poss. 1] Kram und so ganz normal ist, aber [nominativ] vergisst immer, wie unglaublich cool und inspirierend [nominativ] ist. Ich h\u00F6r [poss. 3] Geschichten einfach immer gerne zu und witzig ist [nominativ] halt einfach auch noch, manchmal bin ich echt fertig, wie krass ein Mensch sein kann.\u201C\n\nNics grinst und fl\u00FCstert zur\u00FCck: \u201EBoah ja. Finds auch richtig schlimm, dass [nominativ] das einfach nicht akzeptieren kann. Und ich checks ja, fr\u00FCher haben irgendwelche Leute [dativ] echt viel Schei\u00DFe eingeredet, aber das stimmt halt nicht. Ich hab echt wenige Menschen so lieb wie [akkusativ] und finde fast niemanden so beeindruckend.\u201C`,\n  },\n\n  fantasy: {\n    title: \"Fantasy\",\n    text: `Der Drache betrachtete [akkusativ] lange, bevor er etwas sagte. \u201E[Vorname], du wei\u00DFt, dass ich deine Abenteuerlust und deinen Mut sehr sch\u00E4tze. Bist du sicher, dass du daf\u00FCr schon bereit bist? Die Zauber, die auf dich gelegt wurden, sind noch nicht lange her.\u201C\n\n[Nominativ] seufzte. \u201EIch wei\u00DF, Drams. Aber ich will mit. Ich f\u00FChle mich gut.\u201C Fila flatterte zu ihnen und lie\u00DF sich auf [poss. 5] Kopf nieder. In den Abendstunden verschmolz die Farbe von Filas Fl\u00FCgeln beinahe mit der Farbe [poss. 6] Haars.\n\n\u201EWor\u00FCber redet ihr?\u201C, fragte die Elfe neugierig.\n\n\u201EAch, Drams will mich nicht mitnehmen. Die \u00FCbliche Diskussion.\u201C, murmelte [Vorname]. \u201EIch mach mir einfach Sorgen um dich, irgendwer muss das vielleicht auch mal tun.\u201C, knurrte Drams ungehalten.\n\nFila runzelte die Stirn. \u201EAber [poss. 2] Verzauberung war vor drei Tagen, alles hat eingewirkt, normalerweise ist man doch um diese Zeit wieder fit?\u201C\n\n\u201ENicht du auch noch.\u201C Der Drache wandte sich um und verschwand in der H\u00F6hle, die die drei sich teilten.\n\nFila verdrehte die Augen und flatterte in einen nahe gelegenen Busch. \u201EHey, [Vorname]! Zeigst du mir, wie die Verzauberung gewirkt hat? Vielleicht \u00FCberzeugt Drams das ja noch.\u201C Dey grinste. Und legte los.`,\n  },\n\n  medical: {\n    title: \"\u00C4rztliche Praxis\",\n    text: `\u201E[Anrede/Vorname + Nachname], bitte in Zimmer 3.\u201C Ich folgte der MFA in Zimmer 3 und setzte mich dort auf die bereitstehende Liege. Ich hasste Arzttermine, aber hin und wieder lie\u00DF es sich der Gesundheit wegen eben nicht vermeiden.\n\nDurch die offene T\u00FCr drangen die Ger\u00E4usche und Gespr\u00E4che der Praxis zu mir ins Zimmer. \u201E[Vorname + Nachname] wartet in Zimmer 3. Wir brauchen [poss. 2] Krankenkassenkarte noch einen Moment, sagen Sie [dativ], dass [nominativ] sie noch bei uns abholen muss. Aber behandeln Sie [akkusativ] erst einmal.\u201C\n\nKurz darauf trat die \u00E4rztliche Fachperson ins Zimmer. \u201EHallo [Anrede/Vorname + Nachname], was kann ich f\u00FCr Sie tun?\u201C`,\n  },\n\n  laudation: {\n    title: \"Laudatio Queerer Nobelpreis\",\n    text: `Wir vom Queer Lexikon sind stolz, den Queeren Nobelpreis in diesem Jahr an eine Person zu verleihen, die sich seit langem in besonderem Ma\u00DFe f\u00FCr die Queere Community und queere Sichtbarkeit einsetzt. Uns ist mehr als bewusst, was f\u00FCr ein Kampf die blo\u00DFe Existenz als queere Person in dieser Welt tagt\u00E4glich darstellt und sind daher umso gl\u00FCcklicher, dass [nominativ] sich jeden Tag aufs Neue entscheidet, zu bleiben.\n\nWir m\u00F6chten [dativ] unsere tiefe Anerkennung daf\u00FCr aussprechen, Tag f\u00FCr Tag die Hoffnung wieder zu finden, wenn sie verloren gegangen ist und sich weiter f\u00FCr mehr Queerness in der Welt einzusetzen. Nicht den gesellschaftlichen Normen zu entsprechen und dennoch zu sich zu stehen, ist eine Leistung, f\u00FCr die wir [akkusativ] so sehr bewundern.\n\nBesonders hervorheben m\u00F6chten wir au\u00DFerdem [poss. 3] Support und tiefe Liebe f\u00FCr [poss. 2] Freund*innen und Wahlfamilie. [Vorname], wir sind so froh, dass du du bist und du bleibst. Du bist genau richtig wie du bist!\n\nZur Vergabe des Queeren Nobelpreises bitten wir Sie alle nun um den lautesten, warmherzigsten, liebevollsten Applaus f\u00FCr [Vorname + Nachname]!`,\n  },\n\n  newspaper: {\n    title: \"Zeitungsartikel\",\n    text: `\u201EIch kanns einfach nicht glauben.\u201C Das waren die ersten Worte, welche die siegw\u00FCrdige Person der gestrigen Queeren Nobelpreis\u2011Verleihung des Queer Lexikons \u00FCber die Lippen kamen.\n\n[Vorname + Nachname] hatte augenscheinlich nicht mit dem Gewinn gerechnet, obwohl die Begr\u00FCndung der Jury mehr als \u00FCberzeugend war: [Poss. 1] t\u00E4glicher Kampf um die blo\u00DFe Existenz wurde dabei gew\u00FCrdigt, [poss. 1] stetiger Wille, weiter zu bleiben und die Hoffnung immer wieder zu finden. [Poss. 2] Sichtbarkeit sei bewundernswert, ebenso der Support und die Liebe f\u00FCr [poss. 2] Wahlfamilie und Freund*innen.\n\nIm Gespr\u00E4ch nach der Preisverleihung gibt [Anrede/Vorname + Nachname] sich zur\u00FCckhaltend, [nominativ] wirkt immer noch \u00FCberw\u00E4ltigt von der Laudatio und all der Anerkennung. Immer wieder wird das Interview unterbrochen, weil begeisterte Fans [dativ] gratulieren m\u00F6chten, einige bitten [akkusativ] auch um eine Umarmung und ein Foto.\n\nDas ausf\u00FChrliche Interview mit [Vorname + Nachname] erwartet die Lesenden in unserer Queeren Samstagsausgabe!`,\n  },\n\n  meeting: {\n    title: \"Meeting\",\n    text: `Montagmorgen, das erste, das wie jede Woche ansteht, ist das Meeting mit dem gesamten Kollegium. Ein Teil von ihnen hat sich online zugeschaltet, andere sitzen zusammen im B\u00FCro.\n\nDie Abteilungsleitung er\u00F6ffnet das Meeting: \u201EGuten Morgen zusammen. Ich hoffe, Sie alle hatten ein erholsames Wochenende. Heute Morgen m\u00F6chte ich mit dem Hinweis starten, dass [Anrede/Vorname + Nachname] ab sofort die Pronomen [Bezeichnung] und den Vornamen [Vorname] verwendet.\u201C Die Anwesenden nicken, einige machen sich eine Notiz. Dann geht es weiter.\n\n\u201EGut. Als n\u00E4chstes w\u00FCrde ich gerne den Plan f\u00FCr die Woche besprechen. M\u00F6chten Sie beginnen, Herr Yilmaz?\u201C Herr Yilmaz nickt.\n\n\u201EKlar. Ich werde die Daten der letzten Woche sp\u00E4ter mit [Anrede/Vorname + Nachname] analysieren. [Nominativ] wird sie danach noch final einordnen und [poss. 2] Ergebnisse nachher \u00FCber das System zur Verf\u00FCgung stellen. Ich m\u00F6chte au\u00DFerdem auch noch mal deutlich machen, dass wir es ganz klar [dativ] zu verdanken haben, dass die Situation der letzten Woche nicht weiter ausgeartet ist.\u201C\n\nDie Abteilungsleitung nickt und sagt: \u201EDem kann ich mich nur anschlie\u00DFen. Wir haben Ihnen, [Anrede/Vorname + Nachname], viel zu verdanken.\u201C`,\n  },\n\n  email: {\n    title: \"Formelle E\u2011Mail\",\n    text: `Guten Tag [Anrede/Vorname + Nachname],\n\nvielen Dank f\u00FCr die Berichtigung Ihrer Daten. Wir haben Sie nun wie folgt in unser System eingetragen:\nAnrede: [Anrede]\nName: [Vorname + Nachname]\nPronomen: [Bezeichnung]\n\nSollten noch weitere Anpassungen n\u00F6tig sein, lassen Sie es uns gerne wissen, [Anrede/Vorname + Nachname]. Ab n\u00E4chstem Monat wird im \u00DCbrigen auch die M\u00F6glichkeit gegeben sein, die Daten selbstst\u00E4ndig \u00FCber unsere App zu \u00E4ndern.\n\nMit besten Gr\u00FC\u00DFen\nQueere Krankenkasse der Zukunft`,\n  },\n  declensions: {\n    title: \"Alle Deklinationen\",\n    type: \"declensions\",\n    random: false,\n    text: \"\",\n  },\n};\n\nexport default SampleTexts;\n", "import SampleTexts from \"../../data/SampleTexts.js\";\n\n/**\n * Return the sample text entry for the given key.\n * @param {string|null} textKey\n * @returns {object|null}\n */\nexport function getSampleTextEntry(textKey) {\n  return textKey ? SampleTexts[textKey] || null : null;\n}\n\n/**\n * Check whether the selected text uses the declension view.\n * @param {string|null} textKey\n * @returns {boolean}\n */\nexport function isDeclensionText(textKey) {\n  const entry = getSampleTextEntry(textKey);\n  return entry?.type === \"declensions\";\n}\n\n/**\n * Determine whether a text entry is eligible for random selection.\n * @param {object|null} entry\n * @returns {boolean}\n */\nexport function isRandomEligibleEntry(entry) {\n  return !(entry && entry.random === false);\n}\n\n/**\n * Fill the text selector options from the sample texts.\n * @param {HTMLSelectElement} select\n */\nexport function populateTextSelector(select) {\n  Object.entries(SampleTexts).forEach(([key, entry]) => {\n    const option = document.createElement(\"option\");\n    option.value = key;\n    option.textContent = entry.title || key;\n    if (!isRandomEligibleEntry(entry)) {\n      option.dataset.randomEligible = \"false\";\n    }\n    select.appendChild(option);\n  });\n}\n\n/**\n * Return selector options eligible for random text selection.\n * @param {HTMLSelectElement} select\n * @returns {HTMLOptionElement[]}\n */\nexport function getRandomEligibleOptions(select) {\n  return Array.from(select.options).filter(\n    (option) => option.dataset.randomEligible !== \"false\",\n  );\n}\n", "/**\n * Create a text-to-speech controller with state callbacks.\n * @param {{onStatusChange?: Function}} params\n * @returns {object}\n */\nexport function createTtsController({ onStatusChange } = {}) {\n  let available = false;\n  let speaking = false;\n  let voice = null;\n  let utterance = null;\n\n  /** Notify listeners of the latest TTS status. */\n  function notify() {\n    if (onStatusChange) {\n      onStatusChange({ available, speaking, voice });\n    }\n  }\n\n  /**\n   * Filter voices to those matching German locales.\n   * @param {SpeechSynthesisVoice[]} voices\n   * @returns {SpeechSynthesisVoice[]}\n   */\n  function getGermanVoices(voices) {\n    return voices.filter(\n      (candidate) =>\n        candidate.lang && candidate.lang.toLowerCase().startsWith(\"de\"),\n    );\n  }\n\n  /** Refresh availability and current voice selection. */\n  function updateAvailability() {\n    if (!(\"speechSynthesis\" in window)) {\n      available = false;\n      voice = null;\n      notify();\n      return;\n    }\n\n    const voices = window.speechSynthesis.getVoices();\n    const germanVoices = getGermanVoices(voices);\n    available = germanVoices.length > 0;\n    voice = germanVoices[0] || null;\n    notify();\n  }\n\n  /** Stop any ongoing speech and reset state. */\n  function stop() {\n    if (!(\"speechSynthesis\" in window)) {\n      return;\n    }\n\n    if (window.speechSynthesis.speaking || window.speechSynthesis.pending) {\n      window.speechSynthesis.cancel();\n    }\n\n    speaking = false;\n    utterance = null;\n    notify();\n  }\n\n  /**\n   * Speak the provided text using a random German voice.\n   * @param {string} text\n   */\n  function speak(text) {\n    if (!available) {\n      return;\n    }\n\n    const germanVoices = getGermanVoices(window.speechSynthesis.getVoices());\n    if (germanVoices.length === 0) {\n      return;\n    }\n\n    // For more diversity in the output, we want to randomly switch between all the available voices.\n    const randomIndex = Math.floor(Math.random() * germanVoices.length);\n    voice = germanVoices[randomIndex];\n    const sanitized = text ? text.trim() : \"\";\n    if (!sanitized) {\n      return;\n    }\n\n    stop();\n    const nextUtterance = new SpeechSynthesisUtterance(sanitized);\n    nextUtterance.voice = voice;\n    nextUtterance.lang = voice.lang;\n\n    nextUtterance.onend = () => {\n      speaking = false;\n      notify();\n    };\n\n    nextUtterance.onerror = () => {\n      speaking = false;\n      notify();\n    };\n\n    speaking = true;\n    utterance = nextUtterance;\n    notify();\n    window.speechSynthesis.speak(nextUtterance);\n  }\n\n  /**\n   * Toggle between speaking and stopped states for the given text.\n   * @param {string} text\n   */\n  function toggle(text) {\n    if (!available) {\n      return;\n    }\n\n    if (speaking) {\n      stop();\n      return;\n    }\n\n    speak(text);\n  }\n\n  /** Initialize speech synthesis listeners and initial state. */\n  function init() {\n    updateAvailability();\n    if (\"speechSynthesis\" in window) {\n      window.speechSynthesis.addEventListener(\"voiceschanged\", () => {\n        updateAvailability();\n      });\n    }\n  }\n\n  /** Read the current TTS state snapshot. */\n  function getState() {\n    return { available, speaking, voice, utterance };\n  }\n\n  return {\n    init,\n    updateAvailability,\n    stop,\n    speak,\n    toggle,\n    getState,\n  };\n}\n", "/**\n * Ensure the icon row is inserted into results controls.\n * @param {object} viewState\n */\nfunction ensureRow(viewState) {\n  if (viewState.mobileIconRow.parentElement || !viewState.resultsControls) {\n    return;\n  }\n  if (\n    viewState.randomModeContainer &&\n    viewState.randomModeContainer.parentElement === viewState.resultsControls\n  ) {\n    viewState.resultsControls.insertBefore(\n      viewState.mobileIconRow,\n      viewState.randomModeContainer.nextSibling,\n    );\n  } else {\n    viewState.resultsControls.appendChild(viewState.mobileIconRow);\n  }\n}\n\n/**\n * Reflow action buttons based on viewport and mode visibility.\n * @param {object} viewState\n */\nfunction update(viewState) {\n  const listenButton = viewState.getListenButton\n    ? viewState.getListenButton()\n    : null;\n  const randomModeHidden = Boolean(\n    viewState.randomModeContainer?.classList.contains(\"is-hidden\"),\n  );\n  if (viewState.rerunButton) {\n    viewState.rerunButton.classList.toggle(\"is-hidden\", randomModeHidden);\n  }\n\n  if (viewState.mobileQuery.matches) {\n    ensureRow(viewState);\n    [viewState.randomTextButton, viewState.rerunButton, listenButton]\n      .filter(Boolean)\n      .forEach((button) => {\n        viewState.mobileIconRow.appendChild(button);\n      });\n    return;\n  }\n\n  if (viewState.randomTextButton) {\n    viewState.getSelectRow?.()?.appendChild(viewState.randomTextButton);\n  }\n  if (viewState.rerunButton) {\n    viewState.getRandomModeRow?.()?.appendChild(viewState.rerunButton);\n  }\n  if (listenButton) {\n    viewState.getHeadingRow?.()?.appendChild(listenButton);\n  }\n}\n\n/**\n * Attach media query listeners for automatic updates.\n * @param {object} viewState\n */\nfunction attach(viewState) {\n  viewState.mobileQuery.addEventListener(\n    \"change\",\n    update.bind(null, viewState),\n  );\n}\n\n/**\n * Build a mobile-only icon row controller for result actions.\n * @param {object} params\n * @returns {{row: HTMLElement, attach: Function, update: Function}}\n */\nexport function createMobileIconRow({\n  mobileQuery,\n  resultsControls,\n  randomModeContainer,\n  randomTextButton,\n  rerunButton,\n  getListenButton,\n  getHeadingRow,\n  getSelectRow,\n  getRandomModeRow,\n}) {\n  const mobileIconRow = document.createElement(\"div\");\n  mobileIconRow.className = \"mobile-icon-row\";\n\n  const viewState = {\n    mobileQuery,\n    resultsControls,\n    randomModeContainer,\n    randomTextButton,\n    rerunButton,\n    getListenButton,\n    getHeadingRow,\n    getSelectRow,\n    getRandomModeRow,\n    mobileIconRow,\n  };\n\n  return {\n    row: mobileIconRow,\n    attach: attach.bind(null, viewState),\n    update: update.bind(null, viewState),\n  };\n}\n", "/**\n * Return a no-op dialog API when dialog elements are missing.\n * @returns {{open: Function, close: Function}}\n */\nfunction createFallbackDialogApi() {\n  return {\n    open: () => {},\n    close: () => {},\n  };\n}\n\n/**\n * Replace dialog body text content.\n * @param {object} viewState\n * @param {string} text\n */\nfunction renderMarkerDialogText(viewState, text) {\n  viewState.dialogBody.textContent = text;\n}\n\n/**\n * Position the dialog relative to the target element.\n * @param {object} viewState\n * @param {HTMLElement|null} target\n */\nfunction positionDialog(viewState, target) {\n  if (!target) {\n    return;\n  }\n  const targetRect = target.getBoundingClientRect();\n  const dialogRect = viewState.dialog.getBoundingClientRect();\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  const padding = 12;\n  const gap = 0;\n  const arrowSize = 6;\n\n  const spaceAbove = targetRect.top;\n  const spaceBelow = viewportHeight - targetRect.bottom;\n  const placeBelow =\n    spaceBelow >= dialogRect.height + gap + arrowSize ||\n    spaceBelow >= spaceAbove;\n  const placement = placeBelow ? \"bottom\" : \"top\";\n\n  let top = placeBelow\n    ? targetRect.bottom + gap + arrowSize\n    : targetRect.top - dialogRect.height - gap - arrowSize;\n  let left = targetRect.left + targetRect.width / 2 - dialogRect.width / 2;\n\n  left = Math.max(\n    padding,\n    Math.min(left, viewportWidth - dialogRect.width - padding),\n  );\n  top = Math.max(\n    padding,\n    Math.min(top, viewportHeight - dialogRect.height - padding),\n  );\n\n  viewState.dialog.style.left = `${left}px`;\n  viewState.dialog.style.top = `${top}px`;\n  viewState.dialog.dataset.placement = placement;\n\n  const arrowLeft = targetRect.left + targetRect.width / 2 - left;\n  const clampedArrowLeft = Math.max(\n    16,\n    Math.min(dialogRect.width - 16, arrowLeft),\n  );\n  viewState.dialog.style.setProperty(\n    \"--marker-arrow-left\",\n    `${clampedArrowLeft}px`,\n  );\n}\n\n/**\n * Open the dialog with new content and focus handling.\n * @param {object} viewState\n * @param {{title: string, text: string, trigger: HTMLElement}} params\n */\nfunction openDialog(viewState, { title, text, trigger }) {\n  viewState.dialogTitle.textContent = title;\n  renderMarkerDialogText(viewState, text);\n  viewState.lastFocus = trigger || document.activeElement;\n  viewState.currentTarget = trigger || null;\n  viewState.isOpen = true;\n  if (viewState.currentTarget) {\n    viewState.currentTarget.setAttribute(\"aria-expanded\", \"true\");\n  }\n  if (typeof viewState.dialog.showModal === \"function\") {\n    viewState.dialog.showModal();\n  } else if (typeof viewState.dialog.show === \"function\") {\n    viewState.dialog.show();\n  } else {\n    viewState.dialog.setAttribute(\"open\", \"true\");\n  }\n  positionDialog(viewState, viewState.currentTarget);\n  viewState.dialogBody.focus();\n}\n\n/**\n * Close the dialog and restore trigger state.\n * @param {object} viewState\n */\nfunction closeDialog(viewState) {\n  if (!viewState.isOpen) {\n    return;\n  }\n  if (viewState.dialog.open) {\n    viewState.dialog.close();\n  } else {\n    viewState.dialog.removeAttribute(\"open\");\n  }\n  viewState.isOpen = false;\n  if (viewState.currentTarget) {\n    viewState.currentTarget.setAttribute(\"aria-expanded\", \"false\");\n  }\n  viewState.currentTarget = null;\n}\n\n/**\n * Restore focus when the dialog closes.\n * @param {object} viewState\n */\nfunction handleDialogClose(viewState) {\n  if (viewState.lastFocus && document.contains(viewState.lastFocus)) {\n    viewState.lastFocus.focus();\n  }\n  viewState.lastFocus = null;\n}\n\n/**\n * Close the dialog on Escape key.\n * @param {object} viewState\n * @param {KeyboardEvent} event\n */\nfunction handleDocumentKeydown(viewState, event) {\n  if (event.key === \"Escape\") {\n    closeDialog(viewState);\n  }\n}\n\n/**\n * Close the dialog when clicking outside.\n * @param {object} viewState\n * @param {PointerEvent} event\n */\nfunction handleOutsidePointer(viewState, event) {\n  if (!viewState.isOpen) {\n    return;\n  }\n  if (viewState.dialog.contains(event.target)) {\n    return;\n  }\n  closeDialog(viewState);\n}\n\n/**\n * Reposition the dialog on viewport changes.\n * @param {object} viewState\n */\nfunction handleViewportChange(viewState) {\n  if (!viewState.isOpen || !viewState.currentTarget) {\n    return;\n  }\n  positionDialog(viewState, viewState.currentTarget);\n}\n\n/**\n * Close the dialog via the explicit close button.\n * @param {object} viewState\n * @param {MouseEvent} event\n */\nfunction handleDialogClick(viewState, event) {\n  const closeTarget = event.target.closest(\"[data-dialog-close]\");\n  if (closeTarget) {\n    closeDialog(viewState);\n  }\n}\n\n/**\n * Handle marker clicks within the results output.\n * @param {object} viewState\n * @param {MouseEvent} event\n */\nfunction handleResultsClick(viewState, event) {\n  const target = event.target.closest(\"[data-pronoun], [data-name]\");\n  if (!target) {\n    return;\n  }\n  if (target.hasAttribute(\"data-pronoun\")) {\n    const pronounLabel = target.getAttribute(\"data-pronoun\") || \"\u2013\";\n    const formLabel = target.getAttribute(\"data-pronoun-form\") || \"\u2013\";\n    openDialog(viewState, {\n      title: \"Pronomen-Info\",\n      text: `${pronounLabel} \u2014 ${formLabel}`,\n      trigger: target,\n    });\n    return;\n  }\n  const defaultSource = viewState.resultsOutput.dataset.nameSourceDefault || \"\";\n  const source =\n    defaultSource || target.getAttribute(\"data-name-source\") || \"user\";\n  const sourceLabel =\n    source === \"auto\" ? \"Zuf\u00E4llig erg\u00E4nzt\" : \"Von dir eingegeben\";\n  openDialog(viewState, {\n    title: \"Namens-Info\",\n    text: `Quelle \u2014 ${sourceLabel}`,\n    trigger: target,\n  });\n}\n\n/**\n * Handle keyboard activation for marker items.\n * @param {object} viewState\n * @param {KeyboardEvent} event\n */\nfunction handleResultsKeydown(viewState, event) {\n  if (event.key !== \"Enter\" && event.key !== \" \") {\n    return;\n  }\n  const target = event.target.closest(\"[data-pronoun], [data-name]\");\n  if (!target) {\n    return;\n  }\n  event.preventDefault();\n  target.click();\n}\n\n/**\n * Initialize the marker info dialog behavior and handlers.\n * @param {object} params\n * @returns {{open: Function, close: Function}}\n */\nexport function initMarkerDialog({\n  dialog,\n  dialogBody,\n  dialogTitle,\n  resultsOutput,\n}) {\n  if (!dialog || !dialogBody || !dialogTitle || !resultsOutput) {\n    return createFallbackDialogApi();\n  }\n\n  const viewState = {\n    dialog,\n    dialogBody,\n    dialogTitle,\n    resultsOutput,\n    lastFocus: null,\n    currentTarget: null,\n    isOpen: false,\n  };\n\n  dialog.addEventListener(\"close\", handleDialogClose.bind(null, viewState));\n  dialog.addEventListener(\"click\", handleDialogClick.bind(null, viewState));\n\n  document.addEventListener(\n    \"keydown\",\n    handleDocumentKeydown.bind(null, viewState),\n  );\n  document.addEventListener(\n    \"pointerdown\",\n    handleOutsidePointer.bind(null, viewState),\n  );\n  window.addEventListener(\"resize\", handleViewportChange.bind(null, viewState));\n  window.addEventListener(\n    \"scroll\",\n    handleViewportChange.bind(null, viewState),\n    true,\n  );\n\n  resultsOutput.addEventListener(\n    \"click\",\n    handleResultsClick.bind(null, viewState),\n  );\n  resultsOutput.addEventListener(\n    \"keydown\",\n    handleResultsKeydown.bind(null, viewState),\n  );\n\n  return {\n    open: openDialog.bind(null, viewState),\n    close: closeDialog.bind(null, viewState),\n  };\n}\n", "// Shared UI constants for the main app\nexport const MAX_NAMES = 5;\n\n// Strings\nexport const NAME_PLACEHOLDER = \"z.B. Alex M\u00FCller\";\nexport const NONE_LABEL = \"Keine Pronomen\";\nexport const REMOVE_NAME_LABEL = \"Namen entfernen\";\nexport const ALERT_MIN_NAME = \"Bitte gib mindestens einen Namen ein.\";\nexport const SHARE_LAST_NAME_NOTICE =\n  \"Hinweis: Dein geteilter Link enth\u00E4lt deinen Nachnamen. Bitte achte darauf, mit wem du ihn teilst.\";\nexport const SHARE_COPY_SUCCESS = \"Der Einstellungs-Link wurde kopiert!\";\nexport const SHARE_COPY_BUTTON_LABEL = \"Link mit deinen Einstellungen kopieren\";\nexport const SHARE_COPY_PROMPT_LABEL = \"Link kopieren:\";\nexport const RESULTS_DEFAULT_HEADING = \"Ausgabe\";\nexport const FALLBACK_LAST_NAME_NOTICE =\n  \"Wir haben einen Beispiel-Nachnamen erg\u00E4nzt. Du kannst deinen echten Nachnamen im Namensfeld mit eingeben, um ihn hier zu sehen. Deine Eingaben werden nicht ins Internet \u00FCbertragen und sind sicher auf deinem Ger\u00E4t.\";\nexport const LISTEN_LABEL = \"Text vorlesen\";\nexport const STOP_LISTEN_LABEL = \"Vorlesen stoppen\";\n", "import { $, $$ } from \"../app/dom.js\";\nimport {\n  NAME_PLACEHOLDER,\n  REMOVE_NAME_LABEL,\n  MAX_NAMES,\n} from \"../app/constants.js\";\n\n/**\n * Create a state container for name list operations.\n * @param {{container: HTMLElement, maxNames?: number}} params\n * @returns {{container: HTMLElement, maxNames: number}}\n */\nexport function createNameListState({ container, maxNames = MAX_NAMES }) {\n  return { container, maxNames };\n}\n\n/**\n * Return all name input elements within the list.\n * @param {{container: HTMLElement}} nameList\n * @returns {HTMLInputElement[]}\n */\nexport function getNameInputs(nameList) {\n  return $$(\".name-input\", nameList.container);\n}\n\n/**\n * Return all name row elements within the list.\n * @param {{container: HTMLElement}} nameList\n * @returns {HTMLElement[]}\n */\nexport function getNameRows(nameList) {\n  return $$(\".name-row\", nameList.container);\n}\n\n/**\n * Count how many name inputs currently have values.\n * @param {{container: HTMLElement}} nameList\n * @returns {number}\n */\nexport function countFilledNameInputs(nameList) {\n  return getNameInputs(nameList).filter(\n    (input) => input.value.trim().length > 0,\n  ).length;\n}\n\n/**\n * Check whether any name input has a non-empty value.\n * @param {{container: HTMLElement}} nameList\n * @returns {boolean}\n */\nexport function hasAnyNameValues(nameList) {\n  return countFilledNameInputs(nameList) > 0;\n}\n\n/**\n * Keep the primary label bound to the first visible name input.\n * @param {{container: HTMLElement}} nameList\n */\nexport function syncNameLabelTarget(nameList) {\n  const inputs = getNameInputs(nameList);\n  inputs.forEach((input, index) => {\n    if (index === 0) {\n      input.id = \"names\";\n      input.removeAttribute(\"aria-label\");\n      return;\n    }\n    if (input.id === \"names\") {\n      input.removeAttribute(\"id\");\n    }\n    input.setAttribute(\"aria-label\", \"Weiterer Name\");\n  });\n}\n\n/**\n * Toggle remove buttons and sync accessible labels for name rows.\n * @param {{container: HTMLElement}} nameList\n */\nexport function updateNameButtons(nameList) {\n  const rows = getNameRows(nameList);\n  rows.forEach((row) => {\n    const removeButton = $(\".remove-name\", row);\n    if (removeButton) {\n      removeButton.classList.toggle(\"is-hidden\", rows.length === 1);\n    }\n  });\n\n  syncNameLabelTarget(nameList);\n}\n\n/**\n * Remove a name row and restore focus to a nearby input.\n * @param {{container: HTMLElement}} nameList\n * @param {HTMLElement} row\n * @param {HTMLInputElement} input\n * @param {Function} onChange\n */\nexport function removeNameRow(nameList, row, input, onChange) {\n  const inputsBefore = getNameInputs(nameList);\n  const currentIndex = inputsBefore.indexOf(input);\n  row.remove();\n  updateNameButtons(nameList);\n  if (onChange) {\n    onChange();\n  }\n  const inputsAfter = getNameInputs(nameList);\n  if (inputsAfter.length === 0) {\n    return;\n  }\n  const nextIndex = Math.min(currentIndex, inputsAfter.length - 1);\n  inputsAfter[nextIndex].focus();\n}\n\n/**\n * Notify onChange when name input changes.\n * @param {Function} onChange\n */\nfunction handleNameInput(onChange) {\n  if (onChange) {\n    onChange();\n  }\n}\n\n/**\n * Handle keyboard shortcuts for the name input.\n * Enter adds a row. Backspace removes an empty row when possible.\n * @param {object} nameList\n * @param {HTMLElement} row\n * @param {HTMLInputElement} input\n * @param {Function} onChange\n * @param {KeyboardEvent} event\n */\nfunction handleNameKeydown(nameList, row, input, onChange, event) {\n  if (event.key === \"Enter\") {\n    event.preventDefault();\n    addNameRow(nameList, \"\", onChange);\n    return;\n  }\n  if (event.key !== \"Backspace\") {\n    return;\n  }\n  if (input.value.trim().length > 0) {\n    return;\n  }\n  if (getNameRows(nameList).length === 1) {\n    return;\n  }\n  event.preventDefault();\n  removeNameRow(nameList, row, input, onChange);\n}\n\n/**\n * Remove a name row when the remove button is clicked.\n * @param {object} nameList\n * @param {HTMLElement} row\n * @param {HTMLInputElement} input\n * @param {Function} onChange\n */\nfunction handleRemoveClick(nameList, row, input, onChange) {\n  removeNameRow(nameList, row, input, onChange);\n}\n\n/**\n * Build a name row node with input and remove button.\n * @param {object} nameList\n * @param {string} value\n * @param {Function} onChange\n * @returns {HTMLElement}\n */\nexport function createNameRow(nameList, value = \"\", onChange) {\n  const row = document.createElement(\"div\");\n  row.className = \"name-row\";\n\n  const input = document.createElement(\"input\");\n  input.type = \"text\";\n  input.className = \"name-input\";\n  input.placeholder = NAME_PLACEHOLDER;\n  input.value = value;\n  input.addEventListener(\"input\", handleNameInput.bind(null, onChange));\n  input.addEventListener(\n    \"keydown\",\n    handleNameKeydown.bind(null, nameList, row, input, onChange),\n  );\n\n  const removeButton = document.createElement(\"button\");\n  removeButton.type = \"button\";\n  removeButton.className = \"icon-button remove-name\";\n  removeButton.setAttribute(\"aria-label\", REMOVE_NAME_LABEL);\n  removeButton.setAttribute(\"title\", REMOVE_NAME_LABEL);\n  removeButton.innerHTML =\n    '<img src=\"img/fas-minus.svg\" alt=\"\" aria-hidden=\"true\" />';\n  removeButton.addEventListener(\n    \"click\",\n    handleRemoveClick.bind(null, nameList, row, input, onChange),\n  );\n\n  row.appendChild(input);\n  row.appendChild(removeButton);\n\n  return row;\n}\n\n/**\n * Append a name row when under the max limit.\n * @param {object} nameList\n * @param {string} value\n * @param {Function} onChange\n * @returns {HTMLElement|null}\n */\nexport function addNameRow(nameList, value = \"\", onChange) {\n  if (getNameRows(nameList).length >= nameList.maxNames) {\n    return null;\n  }\n  const row = createNameRow(nameList, value, onChange);\n  nameList.container.appendChild(row);\n  updateNameButtons(nameList);\n  const newInput = $(\".name-input\", row);\n  if (newInput) {\n    newInput.focus();\n  }\n  return row;\n}\n\n/**\n * Ensure at least one name row exists and rebind change handlers.\n * @param {object} nameList\n * @param {Function} onChange\n */\nexport function ensureNameRows(nameList, onChange) {\n  if (getNameRows(nameList).length > 0) {\n    return;\n  }\n  const existingInputs = getNameInputs(nameList);\n  if (existingInputs.length === 0) {\n    addNameRow(nameList, \"\", onChange);\n    return;\n  }\n  const existingValue = existingInputs[0].value;\n  nameList.container.innerHTML = \"\";\n  addNameRow(nameList, existingValue, onChange);\n}\n", "import { $$ } from \"../app/dom.js\";\nimport {\n  SHARE_COPY_BUTTON_LABEL,\n  SHARE_COPY_SUCCESS,\n} from \"../app/constants.js\";\n\n/**\n * Detect whether any input contains a last name.\n * @param {HTMLInputElement[]} nameInputs\n * @returns {boolean}\n */\nexport function hasProvidedLastName(nameInputs) {\n  return nameInputs.some((input) =>\n    input.value\n      .split(\",\")\n      .some((value) => value.trim().split(/\\s+/).filter(Boolean).length > 1),\n  );\n}\n\n/**\n * Build the share-state object from the current UI.\n * @param {object} params\n * @returns {object}\n */\nexport function getShareState({\n  nameInputs,\n  salutationSelect,\n  textSelector,\n  pronounContainer,\n  randomMode,\n  markerToggle,\n  declensionTabId,\n  isDeclensionText,\n}) {\n  return {\n    names: nameInputs.map((input) => input.value.trim()),\n    salutation: salutationSelect.value,\n    textKey: textSelector.value,\n    pronouns: $$('input[type=\"checkbox\"]:checked', pronounContainer).map(\n      (box) => box.value,\n    ),\n    randomMode,\n    markers: markerToggle.checked ? \"on\" : \"off\",\n    declensionTabId:\n      isDeclensionText(textSelector.value) && declensionTabId\n        ? declensionTabId\n        : null,\n  };\n}\n\n/**\n * Adjust share UI based on navigator.share support.\n * @param {HTMLElement} shareSheetButton\n * @param {HTMLElement} shareButton\n */\nexport function applyShareAvailability(shareSheetButton, shareButton) {\n  const shareAvailable = Boolean(navigator.share);\n  if (shareAvailable) {\n    shareSheetButton.classList.remove(\"is-hidden\");\n    shareSheetButton.classList.add(\"is-full\");\n    shareButton.classList.add(\"is-hidden\");\n    shareButton.classList.remove(\"is-full\");\n    return;\n  }\n  shareSheetButton.classList.add(\"is-hidden\");\n  shareSheetButton.classList.remove(\"is-full\");\n  shareButton.classList.remove(\"is-hidden\");\n  shareButton.classList.add(\"is-full\");\n}\n\n/**\n * Return the label node for a share button, if present.\n * @param {HTMLElement} shareButton\n * @returns {HTMLElement|null}\n */\nfunction getShareButtonLabel(shareButton) {\n  return shareButton.querySelector(\".share-button__label\");\n}\n\n/**\n * Temporarily show the \"copied\" label on the share button.\n * @param {HTMLButtonElement} shareButton\n * @param {number} timeoutMs\n */\nexport function setShareCopiedState(shareButton, timeoutMs = 1500) {\n  const label = getShareButtonLabel(shareButton);\n  const setLabel = (text) => {\n    if (label) {\n      label.textContent = text;\n      return;\n    }\n    shareButton.textContent = text;\n  };\n\n  setLabel(SHARE_COPY_SUCCESS);\n  shareButton.classList.add(\"is-copied\");\n  setTimeout(() => {\n    setLabel(SHARE_COPY_BUTTON_LABEL);\n    shareButton.classList.remove(\"is-copied\");\n  }, timeoutMs);\n}\n", "/**\n * Parse URL query params into app state values.\n * @param {string} search\n * @param {{maxNames?: number}} options\n * @returns {object}\n */\nexport function parseUrlState(search, { maxNames } = {}) {\n  const params = new URLSearchParams(search);\n\n  const namesValue = params.get(\"names\");\n  const names =\n    namesValue === null\n      ? null\n      : namesValue\n          .split(\",\")\n          .map((value) => value.trim())\n          .filter((value) => value)\n          .slice(0, maxNames || undefined);\n\n  const salutation = params.get(\"salutation\");\n  const textKey = params.get(\"text\");\n  const pronounsValue = params.get(\"pronouns\");\n  const pronounIndexes =\n    pronounsValue === null\n      ? null\n      : pronounsValue\n          .split(\",\")\n          .map((value) => value.trim())\n          .filter((value) => value);\n  const randomMode = params.get(\"random\");\n  const markers = params.get(\"markers\");\n  const declensionTabId = params.get(\"declensionTab\");\n\n  return {\n    names,\n    salutation,\n    textKey,\n    pronounIndexes,\n    randomMode,\n    markers,\n    declensionTabId,\n  };\n}\n\n/**\n * Build a shareable URL containing the current app state.\n * @param {object} params\n * @returns {string}\n */\nexport function buildShareUrl({\n  baseUrl,\n  names,\n  salutation,\n  textKey,\n  pronouns,\n  randomMode,\n  markers,\n  declensionTabId,\n}) {\n  const params = new URLSearchParams();\n\n  const namesValue = (names || []).map((name) => name.trim()).filter(Boolean);\n  if (namesValue.length > 0) {\n    params.set(\"names\", namesValue.join(\", \"));\n  }\n\n  if (salutation) {\n    params.set(\"salutation\", salutation);\n  }\n\n  if (textKey) {\n    params.set(\"text\", textKey);\n  }\n\n  const pronounValues = (pronouns || [])\n    .map((value) => value.trim())\n    .filter(Boolean);\n  if (pronounValues.length > 0) {\n    params.set(\"pronouns\", pronounValues.join(\",\"));\n  }\n\n  if (randomMode) {\n    params.set(\"random\", randomMode);\n  }\n\n  if (markers) {\n    params.set(\"markers\", markers);\n  }\n\n  if (declensionTabId) {\n    params.set(\"declensionTab\", declensionTabId);\n  }\n\n  const url = new URL(baseUrl || window.location.href);\n  url.search = params.toString();\n  url.hash = \"resultsOutput\";\n  return url.toString();\n}\n", "import { parseUrlState } from \"../domain/queryState.js\";\nimport { addNameRow, updateNameButtons } from \"../features/names.js\";\nimport { getRandomEligibleOptions } from \"../features/texts.js\";\n\n/**\n * Hydrate name inputs from URL state.\n * @param {object} ctx\n * @param {string[]|null} names\n */\nfunction applyNameState(ctx, names) {\n  if (!names || names.length === 0) {\n    return;\n  }\n  ctx.elements.namesContainer.innerHTML = \"\";\n  names.forEach((value) => {\n    addNameRow(ctx.nameList, value, ctx.onNameInput);\n  });\n  updateNameButtons(ctx.nameList);\n}\n\n/**\n * Hydrate salutation selection from URL state.\n * @param {object} ctx\n * @param {string|null} salutation\n */\nfunction applySalutationState(ctx, salutation) {\n  if (salutation !== null) {\n    ctx.elements.salutationSelect.value = salutation;\n  }\n}\n\n/**\n * Hydrate text selection from URL state.\n * @param {object} ctx\n * @param {string|null} textKey\n */\nfunction applyTextState(ctx, textKey) {\n  if (\n    textKey !== null &&\n    ctx.elements.textSelector.querySelector(\n      `option[value=\"${CSS.escape(textKey)}\"]`,\n    )\n  ) {\n    ctx.elements.textSelector.value = textKey;\n  }\n}\n\n/**\n * Hydrate pronoun selection checkboxes from URL state.\n * @param {object} ctx\n * @param {string[]|null} pronounIndexes\n */\nfunction applyPronounState(ctx, pronounIndexes) {\n  if (pronounIndexes === null) {\n    return;\n  }\n  const selectedSet = new Set(pronounIndexes);\n  ctx.elements.pronounContainer\n    .querySelectorAll('input[type=\"checkbox\"]')\n    .forEach((checkbox) => {\n      checkbox.checked = selectedSet.has(checkbox.value);\n    });\n}\n\n/**\n * Hydrate random mode selection from URL state.\n * @param {object} ctx\n * @param {string|null} randomMode\n */\nfunction applyRandomModeState(ctx, randomMode) {\n  if (randomMode === \"each\") {\n    ctx.elements.randomEachRadio.checked = true;\n  } else if (randomMode === \"single\") {\n    ctx.elements.randomSingleRadio.checked = true;\n  }\n}\n\n/**\n * Hydrate marker toggle state from URL state.\n * @param {object} ctx\n * @param {string|null} markers\n */\nfunction applyMarkerState(ctx, markers) {\n  if (markers === \"off\") {\n    ctx.elements.markerToggle.checked = false;\n  } else if (markers === \"on\") {\n    ctx.elements.markerToggle.checked = true;\n  }\n}\n\n/**\n * Hydrate declension tab selection from URL state.\n * @param {object} ctx\n * @param {string|null} declensionTabId\n */\nfunction applyDeclensionState(ctx, declensionTabId) {\n  if (declensionTabId) {\n    ctx.state.selectedDeclensionTabId = declensionTabId;\n  }\n}\n\n/**\n * Apply URL query params to UI controls on initial load.\n * @param {object} ctx\n */\nexport function hydrateFlow(ctx) {\n  const stateFromUrl = parseUrlState(window.location.search, {\n    maxNames: ctx.nameList.maxNames,\n  });\n\n  applyNameState(ctx, stateFromUrl.names);\n  applySalutationState(ctx, stateFromUrl.salutation);\n  applyTextState(ctx, stateFromUrl.textKey);\n  applyPronounState(ctx, stateFromUrl.pronounIndexes);\n  applyRandomModeState(ctx, stateFromUrl.randomMode);\n  applyMarkerState(ctx, stateFromUrl.markers);\n  applyDeclensionState(ctx, stateFromUrl.declensionTabId);\n}\n\n/**\n * Select a random text on first load when no URL param exists.\n * @param {object} ctx\n */\nexport function selectRandomTextIfUnset(ctx) {\n  const params = new URLSearchParams(window.location.search);\n  if (params.get(\"text\")) {\n    return;\n  }\n  const randomOptions = getRandomEligibleOptions(ctx.elements.textSelector);\n  if (randomOptions.length > 0) {\n    const randomIndex = Math.floor(Math.random() * randomOptions.length);\n    ctx.elements.textSelector.selectedIndex = randomOptions[randomIndex].index;\n  }\n}\n", "/**\n * A collection of common/random/cool last names to use when none is provided by the user.\n */\nconst lastNames = [\n  \"Herbst\",\n  \"Sommer\",\n  \"Fr\u00FChling\",\n  \"Winter\",\n  \"Fuchs\",\n  \"Hahn\",\n  \"Vogel\",\n  \"Wolf\",\n  \"Engel\",\n  \"Sch\u00E4fer\",\n  \"Nowak\",\n  \"Y\u0131lmaz\",\n  \"Nguy\u1EC5n\",\n  \"Fox\",\n  \"Gray\",\n  \"Melnyk\",\n  \"Mohamed\",\n  \"Zhang\",\n  \"Garc\u00EDa\",\n  \"Russo\",\n  \"Martin\",\n  \"Sat\u014D\",\n  \"Kelly\",\n  \"Lindqvist\",\n  \"Diallo\",\n  \"M'Baye\",\n];\n\nexport default lastNames;\n", "/**\n * A collection of sample first names used for random selections.\n */\nconst firstNames = [\n  \"Alex\",\n  \"Sam\",\n  \"Luca\",\n  \"Robin\",\n  \"Mika\",\n  \"Sky\",\n  \"Kim\",\n  \"Toni\",\n  \"Fay\",\n  \"Fida\",\n  \"Nahed\",\n  \"Ari\",\n  \"Kit\",\n  \"Onyx\",\n  \"River\",\n  \"Charlie\",\n  \"Jupiter\",\n  \"Quinn\",\n  \"Ash\",\n  \"Bo\",\n  \"Casey\",\n  \"Cyan\",\n  \"Eden\",\n  \"Flynn\",\n  \"Jamie\",\n  \"Sasha\",\n  \"Jona\",\n  \"Noa\",\n  \"Rain\",\n  \"Valo\",\n  \"Yuki\",\n];\n\nexport default firstNames;\n", "import lastNames from \"../../data/lastNames.js\";\nimport firstNames from \"../../data/firstNames.js\";\n\n/**\n * Build a stable comparison key for a name object.\n * @param {object} name\n * @returns {string}\n */\nexport function getNameKey(name) {\n  return `${name.firstName || \"\"}|${name.lastName || \"\"}`;\n}\n\n/**\n * Parse comma-separated inputs into structured name objects.\n * @param {Array<{value: string}>} inputs\n * @returns {Array<{firstName: string, lastName: string, isAutoGenerated: boolean}>}\n */\nexport function parseNames(inputs) {\n  const rawNames = inputs\n    .flatMap((input) => input.value.split(\",\"))\n    .map((value) => value.trim())\n    .filter((value) => value);\n\n  return rawNames.map((name) => {\n    const parts = name.split(/\\s+/).filter((part) => part);\n\n    if (parts.length > 1) {\n      const lastName = parts.pop();\n      return { firstName: parts.join(\" \"), lastName, isAutoGenerated: false };\n    }\n\n    return {\n      firstName: parts[0],\n      lastName: \"\",\n      isAutoGenerated: false,\n    };\n  });\n}\n\n/**\n * Pick a random first name from the list.\n * @returns {string}\n */\nfunction getRandomFirstName() {\n  return firstNames[Math.floor(Math.random() * firstNames.length)] || \"Alex\";\n}\n\n/**\n * Pick a random last name from the list.\n * @returns {string}\n */\nexport function getRandomLastName() {\n  return lastNames[Math.floor(Math.random() * lastNames.length)] || \"\";\n}\n\n/**\n * Create a random full name, avoiding a previous key when possible.\n * @param {string|null} excludeKey\n * @returns {{firstName: string, lastName: string, isAutoGenerated: boolean, lastNameSource: string}}\n */\nexport function createRandomFullName(excludeKey) {\n  let attempts = 0;\n  let next = null;\n  do {\n    const firstName = getRandomFirstName();\n    const lastName = getRandomLastName();\n    next = {\n      firstName,\n      lastName,\n      isAutoGenerated: true,\n      lastNameSource: \"auto\",\n    };\n    attempts += 1;\n  } while (excludeKey && getNameKey(next) === excludeKey && attempts < 20);\n\n  return next;\n}\n\n/**\n * Normalize parsed names to ensure each has a last name.\n * @param {Array<{firstName: string, lastName: string, isAutoGenerated?: boolean}>} rawNames\n * @param {{defaultNameFactory?: () => object}} [options]\n * @returns {Array<{firstName: string, lastName: string, isAutoGenerated: boolean, lastNameSource: string}>}\n */\nexport function normalizeNames(rawNames, options = {}) {\n  const { defaultNameFactory = () => createRandomFullName(null) } = options;\n  const inputNames =\n    rawNames && rawNames.length > 0 ? rawNames : [defaultNameFactory()];\n\n  return inputNames.map((person) => {\n    const firstName = String(person.firstName || \"\").trim();\n    const providedLastName = String(person.lastName || \"\").trim();\n    const isAutoGenerated = Boolean(person.isAutoGenerated);\n\n    if (!providedLastName) {\n      return {\n        firstName,\n        lastName: getRandomLastName(),\n        isAutoGenerated,\n        lastNameSource: \"auto\",\n      };\n    }\n\n    return {\n      firstName,\n      lastName: providedLastName,\n      isAutoGenerated,\n      lastNameSource: isAutoGenerated ? \"auto\" : \"user\",\n    };\n  });\n}\n", "export const DECLENSION_FIELDS = [\n  { label: \"Nominativ\", key: \"nominativ\" },\n  { label: \"Dativ\", key: \"dativ\" },\n  { label: \"Akkusativ\", key: \"akkusativ\" },\n  { label: \"Possessiv 1\", key: \"poss. 1\" },\n  { label: \"Possessiv 2\", key: \"poss. 2\" },\n  { label: \"Possessiv 3\", key: \"poss. 3\" },\n  { label: \"Possessiv 4\", key: \"poss. 4\" },\n  { label: \"Possessiv 5\", key: \"poss. 5\" },\n  { label: \"Possessiv 6\", key: \"poss. 6\" },\n];\n\n/**\n * Map a pronoun token to a human-friendly form label.\n * @param {string|null} token\n * @returns {string}\n */\nexport function getPronounFormLabel(token) {\n  if (!token) {\n    return \"\";\n  }\n  const trimmed = token.trim();\n  const lower = trimmed.toLowerCase();\n\n  if (lower === \"bezeichnung\") {\n    return \"Bezeichnung\";\n  }\n  if (lower === \"nominativ\") {\n    return \"Nominativ\";\n  }\n  if (lower === \"dativ\") {\n    return \"Dativ\";\n  }\n  if (lower === \"akkusativ\") {\n    return \"Akkusativ\";\n  }\n  if (lower.startsWith(\"poss.\")) {\n    const match = trimmed.match(/poss\\.\\s*(\\d+)/i);\n    if (match) {\n      return `Poss. ${match[1]}`;\n    }\n    return \"Possessiv\";\n  }\n\n  return trimmed;\n}\n", "/*\n * PronounTool.js\n *\n * The PronounTool orchestrates the substitution of tokens within a\n * sample text.  It accepts a list of PronounSet instances and uses\n * them to replace placeholders such as [Nominativ], [Vorname], etc.\n *\n * Two randomisation modes are supported:\n *   - \"single\": one pronoun set is chosen at random for the entire\n *     text.\n *   - \"each\": every pronoun placeholder is replaced by a random\n *     pronoun set from the provided selection.\n *\n * The tool wraps all replacements in a span element,\n * tagging pronoun replacements with the chosen set\u2019s\n * bezeichnung in a data attribute. Capitalisation of the original\n * token is honoured by converting the first letter of the replacement.\n */\n\nimport { getPronounFormLabel as getPronounFormLabelHelper } from \"./pronounForms.js\";\n\nexport default class PronounTool {\n  /**\n   * Escape HTML special characters to prevent injection.\n   *\n   * @param {string} value\n   * @returns {string}\n   */\n  static escapeHTML(value) {\n    if (value == null) return \"\";\n    return String(value)\n      .replace(/&/g, \"&amp;\")\n      .replace(/</g, \"&lt;\")\n      .replace(/>/g, \"&gt;\")\n      .replace(/\"/g, \"&quot;\")\n      .replace(/'/g, \"&#39;\");\n  }\n\n  /**\n   * Create a new PronounTool.\n   *\n   * @param {PronounSet[]} pronounSets An array of available pronoun sets.\n   */\n  constructor(pronounSets) {\n    this.pronounSets = pronounSets;\n  }\n\n  /**\n   * Pick a random element from an array.\n   *\n   * @param {Array} arr The array to sample.\n   * @returns {*} A random element.\n   */\n  static randomChoice(arr) {\n    const idx = Math.floor(Math.random() * arr.length);\n    return arr[idx];\n  }\n\n  /**\n   * Adjust the first letter of a replacement to match the capitalisation\n   * of the token. Only the first character is modified; the rest of\n   * the string is left untouched.\n   *\n   * @param {string} token The raw token between the brackets.\n   * @param {string} value The replacement string.\n   * @returns {string} The value with adjusted capitalisation.\n   */\n  static adjustCase(token, value) {\n    if (!value) return value;\n\n    const first = token.trim().charAt(0);\n\n    if (\n      first &&\n      first.toUpperCase() === first &&\n      first.toLowerCase() !== first\n    ) {\n      // Token starts with an uppercase letter, so capitalise its replacement.\n      return value.charAt(0).toUpperCase() + value.slice(1);\n    }\n\n    return value;\n  }\n\n  /**\n   * Normalize a token into a human-friendly pronoun form label.\n   *\n   * @param {string} token The raw token between brackets.\n   * @returns {string} A label for the pronoun form.\n   */\n  static getPronounFormLabel(token) {\n    return getPronounFormLabelHelper(token);\n  }\n\n  /**\n   * Determine if a token should be treated as a pronoun form. Tokens\n   * that refer to cases (e.g. Nominativ, Dativ, Poss. 1) or that\n   * consist solely of letters without delimiters are considered\n   * pronoun placeholders. Everything else (names, salutations,\n   * combined tokens) is handled separately.\n   *\n   * @param {string} token The token inside brackets.\n   * @returns {boolean} True if the token is a pronoun placeholder.\n   */\n  static isPronounToken(token) {\n    const trimmed = token.trim();\n\n    const lower = trimmed.toLowerCase();\n    if (lower === \"nominativ\" || lower === \"dativ\" || lower === \"akkusativ\") {\n      return true;\n    }\n\n    if (lower.startsWith(\"poss.\")) {\n      return true;\n    }\n\n    if (lower === \"bezeichnung\") {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Produce an HTML string with all placeholders replaced. Names can\n   * include multiple entries separated by commas. When randomMode is\n   * \"each\", every pronoun token is replaced using a randomly chosen\n   * pronoun set, otherwise a single pronoun set is chosen for the\n   * entire text.\n   *\n   * @param {string} text The input text with tokens.\n   * @param {Object[]} people An array of person objects with the fields\n   *   firstName, lastName, lastNameSource (optional), and\n   *   salutation (optional).\n   * @param {PronounSet[]} selectedSets The pronoun sets to choose from.\n   * @param {string} randomMode Either \"each\" or \"single\".\n   * @returns {Object} An object containing the HTML string and the\n   *   pronoun set used when randomMode is \"single\" (undefined when\n   *   randomMode is \"each\").\n   */\n  render(text, people, selectedSets, randomMode = \"single\") {\n    // Choose a fixed pronoun set when randomMode is single\n    let fixedSet = null;\n    if (randomMode === \"single\") {\n      fixedSet = PronounTool.randomChoice(selectedSets);\n    }\n\n    /** Pick a person at random, applying default fallbacks. */\n    const pickPerson = () => {\n      const fallback = { firstName: \"\", lastName: \"\", salutation: \"\" };\n      if (!people || people.length === 0) {\n        return fallback;\n      }\n      const person = PronounTool.randomChoice(people);\n      return {\n        firstName: person.firstName || \"\",\n        lastName: person.lastName || \"\",\n        lastNameSource: person.lastNameSource || \"user\",\n        salutation: person.salutation || \"\",\n        isAutoGenerated: Boolean(person.isAutoGenerated),\n      };\n    };\n\n    /** Resolve name-related tokens and last-name metadata. */\n    const resolveNameToken = (token, person) => {\n      const resolvedLastName = person.lastName;\n      const usesLastNameToken =\n        token === \"Nachname\" ||\n        token === \"Vorname Nachname\" ||\n        token === \"Vorname + Nachname\" ||\n        token === \"Anrede\" ||\n        token === \"Anrede/Vorname + Nachname\";\n      const resolveAddress = () => {\n        if (person.salutation) {\n          const surname = resolvedLastName || person.firstName;\n          return surname\n            ? `${person.salutation} ${surname}`\n            : person.salutation;\n        }\n        return (\n          person.firstName + (resolvedLastName ? ` ${resolvedLastName}` : \"\")\n        );\n      };\n\n      let replacement = \"\";\n      if (token === \"Vorname\") {\n        replacement = person.firstName;\n      } else if (token === \"Nachname\") {\n        replacement = resolvedLastName;\n      } else if (\n        token === \"Vorname Nachname\" ||\n        token === \"Vorname + Nachname\"\n      ) {\n        replacement =\n          person.firstName + (resolvedLastName ? ` ${resolvedLastName}` : \"\");\n      } else if (token === \"Anrede\" || token === \"Anrede/Vorname + Nachname\") {\n        replacement = resolveAddress();\n      } else {\n        replacement = token;\n      }\n\n      return {\n        replacement,\n        resolvedLastName,\n        usesLastNameToken,\n      };\n    };\n\n    let result = \"\";\n    let usedAutoLastName = false;\n\n    // Walk the input text character-by-character to preserve non-token text.\n    for (let i = 0; i < text.length; ) {\n      const ch = text.charAt(i);\n\n      if (ch === \"[\") {\n        const end = text.indexOf(\"]\", i + 1);\n\n        if (end !== -1) {\n          const token = text.substring(i + 1, end);\n          const trimmed = token.trim();\n          let replacement = \"\";\n          let isPronoun = PronounTool.isPronounToken(trimmed);\n\n          if (isPronoun) {\n            const pronounSet =\n              randomMode === \"each\"\n                ? PronounTool.randomChoice(selectedSets)\n                : fixedSet;\n            const { firstName } = pickPerson();\n\n            const lower = trimmed.toLowerCase();\n            if (lower === \"bezeichnung\") {\n              replacement = pronounSet.bezeichnung;\n            } else if (lower === \"nominativ\") {\n              replacement = pronounSet.getForm(\"nominativ\", firstName);\n            } else if (lower === \"dativ\") {\n              replacement = pronounSet.getForm(\"dativ\", firstName);\n            } else if (lower === \"akkusativ\") {\n              replacement = pronounSet.getForm(\"akkusativ\", firstName);\n            } else if (lower.startsWith(\"poss.\")) {\n              replacement = pronounSet.getForm(lower, firstName);\n            } else {\n              replacement = pronounSet.getForm(\"nominativ\", firstName);\n            }\n\n            replacement = PronounTool.adjustCase(trimmed, replacement);\n            const safeReplacement = PronounTool.escapeHTML(replacement);\n            const safePronounLabel = PronounTool.escapeHTML(\n              pronounSet.bezeichnung,\n            );\n            const safeFormLabel = PronounTool.escapeHTML(\n              PronounTool.getPronounFormLabel(trimmed),\n            );\n\n            // Wrap in span with the corresponding pronoun as metadata\n            result += `<span data-pronoun=\"${safePronounLabel}\" data-pronoun-form=\"${safeFormLabel}\" role=\"button\" tabindex=\"0\" aria-haspopup=\"dialog\" aria-controls=\"markerDialog\" aria-expanded=\"false\">${safeReplacement}</span>`;\n          } else {\n            // Name or combined token\n            const {\n              firstName,\n              lastName,\n              lastNameSource,\n              salutation,\n              isAutoGenerated,\n            } = pickPerson();\n            const {\n              replacement: nameReplacement,\n              resolvedLastName,\n              usesLastNameToken,\n            } = resolveNameToken(trimmed, {\n              firstName,\n              lastName,\n              lastNameSource,\n              salutation,\n            });\n            replacement = nameReplacement;\n\n            replacement = PronounTool.adjustCase(trimmed, replacement);\n            const safeReplacement = PronounTool.escapeHTML(replacement);\n\n            if (\n              usesLastNameToken &&\n              resolvedLastName &&\n              lastNameSource === \"auto\" &&\n              replacement.includes(resolvedLastName)\n            ) {\n              usedAutoLastName = true;\n            }\n\n            const nameSource =\n              isAutoGenerated ||\n              (usesLastNameToken &&\n                lastNameSource === \"auto\" &&\n                resolvedLastName &&\n                replacement.includes(resolvedLastName))\n                ? \"auto\"\n                : \"user\";\n            const safeNameSource = PronounTool.escapeHTML(nameSource);\n            result += `<span data-name=\"true\" data-name-source=\"${safeNameSource}\" role=\"button\" tabindex=\"0\" aria-haspopup=\"dialog\" aria-controls=\"markerDialog\" aria-expanded=\"false\">${safeReplacement}</span>`;\n          }\n\n          i = end + 1;\n          continue;\n        }\n      }\n\n      // If not a token, append the character as is\n      result += PronounTool.escapeHTML(ch);\n      i += 1;\n    }\n\n    return { html: result, pronounSet: fixedSet, usedAutoLastName };\n  }\n}\n", "/**\n * Sample sentences used for declension previews.\n * Keep tokens consistent with PronounTool expectations.\n */\nexport const DECLENSION_SAMPLE_SENTENCES = [\n  \"[Nominativ] spaziert mit einem Pride-Pin rein und l\u00E4sst den Raum direkt heller wirken.\",\n  \"Ich gebe [dativ] einen kleinen Gl\u00FCckskeks.\",\n  \"Ich sehe [akkusativ] schon am Fenster, am Sonnenstrahlen sammeln.\",\n  \"[Poss. 1] neuer Name ist [Vorname].\",\n  \"Ich liebe [poss. 2] Art zu lachen.\",\n  \"[Poss. 3] Style bewundere ich wirklich. So cozy, und so mutig.\",\n  \"Wir feiern heute einen [poss. 4] Erfolge!\",\n  \"Ich helfe [poss. 5] Lieblingsmenschen mit dessen Geburtstagsgeschenk.\",\n  \"Die Farbe [poss. 6] Nagellacks muss ich mir unbedingt merken, weil sie so sch\u00F6n glitzert.\",\n];\n", "import PronounTool from \"../../domain/pronounTool.js\";\nimport { DECLENSION_FIELDS } from \"../../domain/pronounForms.js\";\nimport { DECLENSION_SAMPLE_SENTENCES } from \"../../domain/declensionData.js\";\nimport { createRandomFullName } from \"../../domain/names.js\";\n\nconst tool = new PronounTool([]);\n\n/**\n * Choose a placeholder person from input or fallbacks.\n * @param {Array<{firstName?: string, lastName?: string, isAutoGenerated?: boolean, lastNameSource?: string}>} names\n * @returns {{name: string, person: object, isAutoGenerated: boolean}}\n */\nfunction pickPlaceholderPerson(names) {\n  const availablePeople = (names || []).filter(\n    (person) => String(person.firstName || \"\").trim().length > 0,\n  );\n\n  if (availablePeople.length > 0) {\n    const picked =\n      availablePeople[Math.floor(Math.random() * availablePeople.length)];\n    return {\n      name: picked.firstName,\n      person: {\n        firstName: picked.firstName,\n        lastName: picked.lastName || \"\",\n        lastNameSource: picked.lastNameSource || \"user\",\n        isAutoGenerated: Boolean(picked.isAutoGenerated),\n      },\n      isAutoGenerated: Boolean(picked.isAutoGenerated),\n    };\n  }\n\n  const fallback = createRandomFullName(null);\n  return { name: fallback.firstName, person: fallback, isAutoGenerated: true };\n}\n\n/**\n * Create a labeled radio tab element pair.\n * @param {string} id\n * @param {string} labelText\n * @param {boolean} checked\n * @returns {{label: HTMLElement, input: HTMLInputElement}}\n */\nfunction makeRadioTab(id, labelText, checked) {\n  const label = document.createElement(\"label\");\n  label.className = \"declension-tab\";\n\n  const input = document.createElement(\"input\");\n  input.type = \"radio\";\n  input.name = \"declension-tabs\";\n  input.id = id;\n  input.checked = checked;\n\n  const span = document.createElement(\"span\");\n  span.textContent = labelText;\n\n  label.appendChild(input);\n  label.appendChild(span);\n\n  return { label, input };\n}\n\n/**\n * Toggle active tab panels and notify selection changes.\n * @param {object} viewState\n * @param {HTMLInputElement} activeInput\n */\nfunction showPanel(viewState, activeInput) {\n  const isTable = activeInput === viewState.tableInput;\n  viewState.tableTab.classList.toggle(\"is-active\", isTable);\n  viewState.tablePanel.classList.toggle(\"is-hidden\", !isTable);\n\n  viewState.samplePanels.forEach(({ input, panel, label }) => {\n    const isActive = input === activeInput;\n    label.classList.toggle(\"is-active\", isActive);\n    panel.classList.toggle(\"is-hidden\", !isActive);\n  });\n\n  if (viewState.onTabChange) {\n    viewState.onTabChange(activeInput.id);\n  }\n}\n\n/**\n * Handle tab changes by showing the corresponding panel.\n * @param {object} viewState\n * @param {Event} event\n */\nfunction handleTabChange(viewState, event) {\n  const target = event.target;\n  if (!target) {\n    return;\n  }\n  showPanel(viewState, target);\n}\n\n/**\n * Build the declension view with table and sample tabs.\n * @param {object} params\n * @returns {HTMLElement}\n */\nexport function createDeclensionView({\n  pronounSets,\n  names,\n  initialTabId,\n  onTabChange,\n}) {\n  const declensionWrap = document.createElement(\"div\");\n  declensionWrap.className = \"declension-tables\";\n\n  if (!pronounSets || pronounSets.length === 0) {\n    return declensionWrap;\n  }\n\n  const placeholder = pickPlaceholderPerson(names);\n  const placeholderName = placeholder.name;\n\n  const tabs = document.createElement(\"div\");\n  tabs.className = \"declension-tabs\";\n\n  const tabList = document.createElement(\"div\");\n  tabList.className = \"declension-tablist\";\n\n  const { label: tableTab, input: tableInput } = makeRadioTab(\n    \"declension-tab-table\",\n    \"Tabelle\",\n    true,\n  );\n\n  tabList.appendChild(tableTab);\n  tabs.appendChild(tabList);\n\n  const tablePanel = document.createElement(\"div\");\n  tablePanel.className = \"declension-tabpanel\";\n  tablePanel.setAttribute(\"aria-labelledby\", tableInput.id);\n\n  const samplePanels = [];\n\n  const tableWrap = document.createElement(\"div\");\n  tableWrap.className = \"declension-table-wrap\";\n\n  const table = document.createElement(\"table\");\n  table.className = \"declension-table\";\n\n  const thead = document.createElement(\"thead\");\n  const headRow = document.createElement(\"tr\");\n  const corner = document.createElement(\"th\");\n  corner.scope = \"col\";\n  corner.textContent = \"Form\";\n  headRow.appendChild(corner);\n  pronounSets.forEach((set) => {\n    const th = document.createElement(\"th\");\n    th.scope = \"col\";\n    th.textContent = set.bezeichnung;\n    headRow.appendChild(th);\n  });\n  thead.appendChild(headRow);\n  table.appendChild(thead);\n\n  const tbody = document.createElement(\"tbody\");\n  DECLENSION_FIELDS.forEach((field) => {\n    const row = document.createElement(\"tr\");\n    const th = document.createElement(\"th\");\n    th.scope = \"row\";\n    th.textContent = field.label;\n    row.appendChild(th);\n\n    pronounSets.forEach((set) => {\n      const td = document.createElement(\"td\");\n      const value = set.getForm(field.key, placeholderName);\n      td.textContent = value || \"\u2014\";\n      row.appendChild(td);\n    });\n\n    tbody.appendChild(row);\n  });\n  table.appendChild(tbody);\n  tableWrap.appendChild(table);\n  tablePanel.appendChild(tableWrap);\n\n  pronounSets.forEach((set, index) => {\n    const { label, input } = makeRadioTab(\n      `declension-tab-sample-${index}`,\n      set.bezeichnung,\n      false,\n    );\n    tabList.appendChild(label);\n\n    const panel = document.createElement(\"div\");\n    panel.className = \"declension-tabpanel is-hidden\";\n    panel.setAttribute(\"aria-labelledby\", input.id);\n\n    const card = document.createElement(\"div\");\n    card.className = \"declension-sample-card\";\n\n    DECLENSION_SAMPLE_SENTENCES.forEach((sentence) => {\n      const rendered = tool.render(\n        sentence,\n        [\n          {\n            firstName: placeholder.person.firstName,\n            lastName: placeholder.person.lastName,\n            lastNameSource: placeholder.person.lastNameSource,\n            isAutoGenerated: placeholder.isAutoGenerated,\n          },\n        ],\n        [set],\n        \"single\",\n      );\n      const p = document.createElement(\"p\");\n      p.innerHTML = rendered.html;\n      card.appendChild(p);\n    });\n\n    panel.appendChild(card);\n    samplePanels.push({ input, panel, label });\n  });\n\n  const viewState = {\n    tableInput,\n    tableTab,\n    tablePanel,\n    samplePanels,\n    onTabChange,\n  };\n\n  const handleTabChangeBound = handleTabChange.bind(null, viewState);\n  tableInput.addEventListener(\"change\", handleTabChangeBound);\n  samplePanels.forEach(({ input }) => {\n    input.addEventListener(\"change\", handleTabChangeBound);\n  });\n\n  const allTabs = [tableInput, ...samplePanels.map(({ input }) => input)];\n  const preferredTab =\n    allTabs.find((input) => input.id === initialTabId) || tableInput;\n  preferredTab.checked = true;\n  showPanel(viewState, preferredTab);\n\n  tabs.appendChild(tablePanel);\n  samplePanels.forEach(({ panel }) => tabs.appendChild(panel));\n  declensionWrap.appendChild(tabs);\n  return declensionWrap;\n}\n", "import { LISTEN_LABEL, STOP_LISTEN_LABEL } from \"../../app/constants.js\";\n\n/**\n * Build the results heading row and optional listen button.\n * @param {object} params\n * @returns {{headingRow: HTMLElement, heading: HTMLElement, listenButton: HTMLElement|null}}\n */\nexport function createResultsHeader({\n  title,\n  ttsAvailable,\n  ttsSpeaking,\n  includeListenButton = true,\n}) {\n  const headingRow = document.createElement(\"div\");\n  headingRow.className = \"results-heading\";\n\n  const heading = document.createElement(\"h2\");\n  heading.textContent = title;\n  headingRow.appendChild(heading);\n\n  if (!includeListenButton) {\n    return { headingRow, heading, listenButton: null };\n  }\n\n  const listenButton = document.createElement(\"button\");\n  listenButton.type = \"button\";\n  listenButton.className = \"icon-button results-listen\";\n  if (!ttsAvailable) {\n    listenButton.classList.add(\"is-hidden\");\n  }\n  const listenLabel = ttsSpeaking ? STOP_LISTEN_LABEL : LISTEN_LABEL;\n  listenButton.setAttribute(\"aria-label\", listenLabel);\n  listenButton.setAttribute(\"title\", listenLabel);\n  listenButton.innerHTML = `<img src=\"img/${\n    ttsSpeaking ? \"fas-stop.svg\" : \"fas-listen.svg\"\n  }\" alt=\"\" aria-hidden=\"true\" />`;\n  headingRow.appendChild(listenButton);\n\n  return { headingRow, heading, listenButton };\n}\n", "import PronounTool from \"../../domain/pronounTool.js\";\nimport { createRandomFullName } from \"../../domain/names.js\";\nimport {\n  FALLBACK_LAST_NAME_NOTICE,\n  RESULTS_DEFAULT_HEADING,\n} from \"../../app/constants.js\";\nimport { createDeclensionView } from \"./declensionView.js\";\nimport { createResultsHeader } from \"./resultsHeader.js\";\nimport { getSampleTextEntry, isDeclensionText } from \"../texts.js\";\n\n// The tool only needs the pronoun sets passed into render().\nconst tool = new PronounTool([]);\n\n/**\n * Render results into the container and return render metadata.\n * @param {object} params\n * @returns {{pronounSet: object|null, selectedName: object, listenButton: HTMLElement|null}}\n */\nexport function renderResults({\n  resultsContainer,\n  names,\n  pronounSets,\n  salutation,\n  textKey,\n  randomMode,\n  ttsAvailable,\n  ttsSpeaking,\n  declensionTabId,\n  onDeclensionTabChange,\n}) {\n  const selectedEntry = getSampleTextEntry(textKey);\n  const text = selectedEntry?.text ?? \"\";\n  const isDeclensionView = isDeclensionText(textKey);\n  const safeNames =\n    names && names.length > 0 ? names : [createRandomFullName(null)];\n  // Track whether all names are auto-generated to inform marker labeling.\n  const defaultNameSource =\n    safeNames.length > 0 && safeNames.every((person) => person.isAutoGenerated)\n      ? \"auto\"\n      : \"\";\n  // In single mode, pick a single name unless declension view requires all.\n  const effectiveNames = isDeclensionView\n    ? safeNames\n    : randomMode === \"single\"\n      ? [safeNames[Math.floor(Math.random() * safeNames.length)]]\n      : safeNames;\n  const peopleWithSalutation = effectiveNames.map((person) => ({\n    firstName: person.firstName,\n    lastName: person.lastName,\n    lastNameSource: person.lastNameSource || \"user\",\n    salutation,\n    isAutoGenerated: Boolean(person.isAutoGenerated),\n  }));\n  resultsContainer.innerHTML = \"\";\n  resultsContainer.dataset.nameSourceDefault = defaultNameSource;\n  const { headingRow, heading, listenButton } = createResultsHeader({\n    title:\n      selectedEntry && selectedEntry.title\n        ? selectedEntry.title\n        : RESULTS_DEFAULT_HEADING,\n    ttsAvailable,\n    ttsSpeaking,\n    includeListenButton: !isDeclensionView,\n  });\n\n  resultsContainer.appendChild(headingRow);\n\n  if (isDeclensionView) {\n    const view = createDeclensionView({\n      pronounSets,\n      names: effectiveNames,\n      initialTabId: declensionTabId,\n      onTabChange: onDeclensionTabChange,\n    });\n    resultsContainer.appendChild(view);\n    return {\n      pronounSet: null,\n      selectedName: effectiveNames[0],\n      listenButton: null,\n    };\n  }\n\n  const paragraph = document.createElement(\"p\");\n\n  const result = tool.render(\n    text,\n    peopleWithSalutation,\n    pronounSets,\n    randomMode,\n  );\n\n  const pronounSuffix =\n    randomMode === \"single\" && result.pronounSet\n      ? ` \u2013 ${result.pronounSet.bezeichnung}`\n      : \"\";\n  heading.textContent += pronounSuffix;\n\n  paragraph.innerHTML = result.html;\n  resultsContainer.appendChild(paragraph);\n\n  // Add a user-facing notice if a random last name has been used so people aren't terrified when they accidentally see their real last name without providing it.\n  if (result.usedAutoLastName) {\n    const disclaimer = document.createElement(\"p\");\n    disclaimer.className = \"results-disclaimer\";\n    const icon = document.createElement(\"img\");\n    icon.src = \"img/fas-info.svg\";\n    icon.alt = \"\";\n    icon.setAttribute(\"aria-hidden\", \"true\");\n    icon.className = \"results-disclaimer__icon\";\n    disclaimer.appendChild(icon);\n\n    const textNode = document.createElement(\"div\");\n    textNode.className = \"results-disclaimer__text\";\n    textNode.textContent = FALLBACK_LAST_NAME_NOTICE;\n    disclaimer.appendChild(textNode);\n    resultsContainer.appendChild(disclaimer);\n  }\n\n  return {\n    pronounSet: result.pronounSet || null,\n    selectedName: effectiveNames[0],\n    listenButton,\n  };\n}\n", "import { $ } from \"../app/dom.js\";\nimport { renderResults } from \"../features/results/resultsView.js\";\nimport { isDeclensionText } from \"../features/texts.js\";\nimport {\n  countFilledNameInputs,\n} from \"../features/names.js\";\nimport { getNameKey } from \"../domain/names.js\";\nimport { LISTEN_LABEL, STOP_LISTEN_LABEL } from \"../app/constants.js\";\n\n/**\n * Derive the random mode from the radio controls.\n * @param {object} elements\n * @returns {\"single\"|\"each\"}\n */\nexport function getRandomMode(elements) {\n  return elements.randomSingleRadio.checked ? \"single\" : \"each\";\n}\n\n/**\n * Read the TTS state with a safe fallback when disabled.\n * @param {object|null} ttsController\n * @returns {{available: boolean, speaking: boolean, voice?: SpeechSynthesisVoice, utterance?: SpeechSynthesisUtterance}}\n */\nexport function getTtsState(ttsController) {\n  return ttsController\n    ? ttsController.getState()\n    : { available: false, speaking: false };\n}\n\n/**\n * Trigger a layout update for the mobile icon row if present.\n * @param {object|null} mobileIconRow\n */\nexport function updateMobileIconLayout(mobileIconRow) {\n  if (mobileIconRow) {\n    mobileIconRow.update();\n  }\n}\n\n/**\n * Remove any existing listen buttons from the results output and controls.\n * @param {HTMLElement} resultsOutput\n * @param {HTMLElement|null} resultsControls\n */\nexport function clearListenButtons(resultsOutput, resultsControls = null) {\n  const containers = [resultsOutput, resultsControls].filter(Boolean);\n  containers.forEach((container) => {\n    container\n      .querySelectorAll(\".results-listen\")\n      .forEach((button) => button.remove());\n  });\n}\n\n/**\n * Update the listen button label, icon, and visibility based on TTS state.\n * @param {{ttsController: object|null, getListenButton: function}} params\n */\nexport function updateListenButton({ ttsController, getListenButton }) {\n  const button = getListenButton();\n  if (!button) {\n    return;\n  }\n  const { available, speaking } = getTtsState(ttsController);\n  button.classList.toggle(\"is-hidden\", !available);\n  const label = speaking ? STOP_LISTEN_LABEL : LISTEN_LABEL;\n  button.setAttribute(\"aria-label\", label);\n  button.setAttribute(\"title\", label);\n  const icon = $(\"img\", button);\n  if (icon) {\n    icon.src = speaking ? \"img/fas-stop.svg\" : \"img/fas-listen.svg\";\n  }\n}\n\n/**\n * Toggle TTS playback of the current rendered paragraph.\n * @param {{ttsController: object|null, resultsOutput: HTMLElement}} params\n */\nexport function toggleSpeaking({ ttsController, resultsOutput }) {\n  if (!ttsController) {\n    return;\n  }\n  const paragraph = $(\"p\", resultsOutput);\n  const text = paragraph ? paragraph.textContent.trim() : \"\";\n  ttsController.toggle(text);\n}\n\n/**\n * Attach the listen button handler and sync its state.\n * @param {object} ctx\n * @param {HTMLElement|null} listenButton\n */\nexport function wireListenButton(ctx, listenButton) {\n  if (!listenButton) {\n    return;\n  }\n  listenButton.addEventListener(\"click\", () => {\n    toggleSpeaking({\n      ttsController: ctx.ttsController,\n      resultsOutput: ctx.elements.resultsOutput,\n    });\n  });\n  updateListenButton({\n    ttsController: ctx.ttsController,\n    getListenButton: ctx.getListenButton,\n  });\n  updateMobileIconLayout(ctx.mobileIconRow);\n}\n\n/**\n * Reset UI state that should be cleared before rendering new results.\n * @param {object} ctx\n */\nexport function resetResultsUi(ctx) {\n  ctx.markerDialog.close();\n  if (ctx.ttsController) {\n    ctx.ttsController.stop();\n  }\n  clearListenButtons(ctx.elements.resultsOutput, ctx.elements.resultsControls);\n}\n\nfunction handleDeclensionTabChange(state, tabId) {\n  state.selectedDeclensionTabId = tabId;\n}\n\n/**\n * Render the current output using the shared results renderer.\n * @param {object} ctx\n * @param {object} options\n * @returns {object}\n */\nexport function renderOutput(ctx, options) {\n  const allowTts = options.allowTts !== false;\n  const ttsState = allowTts\n    ? getTtsState(ctx.ttsController)\n    : { available: false, speaking: false };\n\n  return renderResults({\n    resultsContainer: ctx.elements.resultsOutput,\n    names: options.names,\n    pronounSets: options.pronounSets,\n    salutation: ctx.elements.salutationSelect.value,\n    textKey: ctx.elements.textSelector.value,\n    randomMode: options.randomMode,\n    ttsAvailable: ttsState.available,\n    ttsSpeaking: ttsState.speaking,\n    declensionTabId: options.includeDeclensionTabs\n      ? ctx.state.selectedDeclensionTabId\n      : null,\n    onDeclensionTabChange: options.includeDeclensionTabs\n      ? handleDeclensionTabChange.bind(null, ctx.state)\n      : null,\n  });\n}\n\n/**\n * Persist the last single-mode selection to support reruns.\n * @param {object} state\n * @param {object} renderInfo\n * @param {\"single\"|\"each\"} randomMode\n */\nexport function recordSingleSelection(state, renderInfo, randomMode) {\n  if (randomMode !== \"single\") {\n    return;\n  }\n  if (renderInfo && renderInfo.pronounSet) {\n    state.lastSinglePronounLabel = renderInfo.pronounSet.bezeichnung;\n  }\n  if (renderInfo && renderInfo.selectedName) {\n    state.lastSingleNameKey = getNameKey(renderInfo.selectedName);\n  }\n}\n\n/**\n * Toggle random-mode UI based on current selections and name count.\n * @param {object} ctx\n */\nexport function updateRandomModeVisibility(ctx) {\n  if (isDeclensionText(ctx.elements.textSelector.value)) {\n    ctx.elements.randomModeContainer.classList.add(\"is-hidden\");\n    ctx.elements.randomSingleRadio.checked = true;\n    updateMobileIconLayout(ctx.mobileIconRow);\n    return;\n  }\n\n  const selectedValues = new Set(\n    Array.from(\n      ctx.elements.pronounContainer.querySelectorAll(\n        'input[type=\"checkbox\"]:checked',\n      ),\n    ).map((checkbox) => checkbox.value),\n  );\n  const selectedCount = selectedValues.size;\n  const filledNames = countFilledNameInputs(ctx.nameList);\n\n  if (selectedCount > 1 || filledNames > 1) {\n    ctx.elements.randomModeContainer.classList.remove(\"is-hidden\");\n    updateMobileIconLayout(ctx.mobileIconRow);\n    return;\n  }\n\n  ctx.elements.randomModeContainer.classList.add(\"is-hidden\");\n  ctx.elements.randomSingleRadio.checked = true;\n  updateMobileIconLayout(ctx.mobileIconRow);\n}\n", "/**\n * Clear query parameters from the current URL once hydration is complete.\n * Keeps the hash intact so anchor navigation still works.\n *\n * @param {{ isHydrating: boolean }} state\n */\nexport function clearUrlParamsIfStable(state) {\n  if (state.isHydrating) {\n    return;\n  }\n  const url = new URL(window.location.href);\n  if (!url.search) {\n    return;\n  }\n  url.search = \"\";\n  window.history.replaceState({}, \"\", url.toString());\n}\n", "import { ALERT_MIN_NAME } from \"../app/constants.js\";\nimport {\n  parseNames,\n  normalizeNames,\n  createRandomFullName,\n} from \"../domain/names.js\";\nimport { getSelectedPronounSets } from \"../features/pronouns.js\";\nimport { isDeclensionText } from \"../features/texts.js\";\nimport {\n  getNameInputs,\n  hasAnyNameValues,\n} from \"../features/names.js\";\nimport {\n  resetResultsUi,\n  getRandomMode,\n  recordSingleSelection,\n  renderOutput,\n  updateRandomModeVisibility,\n  wireListenButton,\n} from \"./renderUtils.js\";\nimport { clearUrlParamsIfStable } from \"./urlUtils.js\";\n \n/**\n * Render the declension view with the current selection state.\n * @param {object} ctx\n */\nfunction renderDeclensionOutput(ctx) {\n  renderOutput(ctx, {\n    names: normalizeNames(parseNames(getNameInputs(ctx.nameList))),\n    pronounSets: getSelectedPronounSets(ctx.elements.pronounContainer, {\n      fallbackToRandom: true,\n    }),\n    randomMode: getRandomMode(ctx.elements),\n    includeDeclensionTabs: true,\n    allowTts: false,\n  });\n}\n\n/**\n * Render a preview when no user-entered names are present.\n * @param {object} ctx\n */\nfunction renderRandomPreview(ctx) {\n  resetResultsUi(ctx);\n\n  if (isDeclensionText(ctx.elements.textSelector.value)) {\n    renderDeclensionOutput(ctx);\n    return;\n  }\n\n  if (hasAnyNameValues(ctx.nameList)) {\n    return;\n  }\n\n  const previewName = createRandomFullName(ctx.state.lastSingleNameKey);\n  const renderInfo = renderOutput(ctx, {\n    names: [previewName],\n    pronounSets: getSelectedPronounSets(ctx.elements.pronounContainer),\n    randomMode: getRandomMode(ctx.elements),\n  });\n  recordSingleSelection(ctx.state, renderInfo, getRandomMode(ctx.elements));\n  wireListenButton(ctx, renderInfo.listenButton);\n}\n\n/**\n * Main render flow for user-driven changes.\n * @param {object} ctx\n */\nexport function generateFlow(ctx) {\n  resetResultsUi(ctx);\n  clearUrlParamsIfStable(ctx.state);\n\n  const hasNames = hasAnyNameValues(ctx.nameList);\n  updateRandomModeVisibility(ctx);\n\n  if (isDeclensionText(ctx.elements.textSelector.value)) {\n    renderDeclensionOutput(ctx);\n    return;\n  }\n\n  if (!hasNames) {\n    renderRandomPreview(ctx);\n    return;\n  }\n\n  const parsedNames = parseNames(getNameInputs(ctx.nameList));\n  if (parsedNames.length === 0) {\n    alert(ALERT_MIN_NAME);\n    return;\n  }\n\n  const normalizedNames = normalizeNames(parsedNames, {\n    defaultNameFactory: () => createRandomFullName(ctx.state.lastSingleNameKey),\n  });\n  const renderInfo = renderOutput(ctx, {\n    names: normalizedNames,\n    pronounSets: getSelectedPronounSets(ctx.elements.pronounContainer),\n    randomMode: getRandomMode(ctx.elements),\n  });\n  recordSingleSelection(ctx.state, renderInfo, getRandomMode(ctx.elements));\n  wireListenButton(ctx, renderInfo.listenButton);\n}\n\n/**\n * Flow wrapper for rendering a random preview.\n * @param {object} ctx\n */\nexport function renderRandomPreviewFlow(ctx) {\n  renderRandomPreview(ctx);\n}\n", "// Pick a random item that differs from the last key when possible.\n/**\n * Choose a random item, preferring one that differs from `lastKey`.\n * @template T\n * @param {T[]} items\n * @param {string|null} lastKey\n * @param {(item: T) => string} getKey\n * @returns {T}\n */\nexport function chooseDifferent(items, lastKey, getKey) {\n  if (items.length <= 1) {\n    return items[0];\n  }\n\n  let candidate = items[Math.floor(Math.random() * items.length)];\n  if (!lastKey) {\n    return candidate;\n  }\n\n  let attempts = 0;\n  while (getKey(candidate) === lastKey && attempts < 20) {\n    candidate = items[Math.floor(Math.random() * items.length)];\n    attempts += 1;\n  }\n\n  return candidate;\n}\n", "import { chooseDifferent } from \"../domain/random.js\";\nimport {\n  createRandomFullName,\n  getNameKey,\n  normalizeNames,\n  parseNames,\n} from \"../domain/names.js\";\nimport { getSelectedPronounSets } from \"../features/pronouns.js\";\nimport { getNameInputs, hasAnyNameValues } from \"../features/names.js\";\nimport {\n  recordSingleSelection,\n  renderOutput,\n  resetResultsUi,\n  updateRandomModeVisibility,\n  wireListenButton,\n} from \"./renderUtils.js\";\nimport { generateFlow } from \"./generateFlow.js\";\n\n/**\n * Rerun single-mode selections, preferring a different name or pronoun set.\n * @param {object} ctx\n */\nexport function rerunFlow(ctx) {\n  resetResultsUi(ctx);\n  updateRandomModeVisibility(ctx);\n\n  const randomModeVisible =\n    !ctx.elements.randomModeContainer.classList.contains(\"is-hidden\");\n  if (!randomModeVisible || !ctx.elements.randomSingleRadio.checked) {\n    generateFlow(ctx);\n    return;\n  }\n\n  const nameInputs = getNameInputs(ctx.nameList);\n  const hasNames = hasAnyNameValues(ctx.nameList);\n  const selectedPronouns = getSelectedPronounSets(ctx.elements.pronounContainer);\n  const canChangePronoun =\n    selectedPronouns.length > 1 && ctx.state.lastSinglePronounLabel;\n\n  let names = [];\n  if (hasNames) {\n    names = normalizeNames(parseNames(nameInputs));\n  } else {\n    names = [createRandomFullName(ctx.state.lastSingleNameKey)];\n  }\n\n  let pronounSets = selectedPronouns;\n  if (canChangePronoun) {\n    const nextPronounSet = chooseDifferent(\n      selectedPronouns,\n      ctx.state.lastSinglePronounLabel,\n      (set) => set.bezeichnung,\n    );\n    pronounSets = [nextPronounSet];\n  } else if (names.length > 1 && ctx.state.lastSingleNameKey) {\n    const nextName = chooseDifferent(\n      names,\n      ctx.state.lastSingleNameKey,\n      getNameKey,\n    );\n    names = [nextName];\n  } else if (!hasNames) {\n    names = [createRandomFullName(ctx.state.lastSingleNameKey)];\n  }\n\n  const renderInfo = renderOutput(ctx, {\n    names,\n    pronounSets,\n    randomMode: \"single\",\n  });\n  recordSingleSelection(ctx.state, renderInfo, \"single\");\n  wireListenButton(ctx, renderInfo.listenButton);\n}\n", "import { getRandomEligibleOptions } from \"../features/texts.js\";\nimport { generateFlow } from \"./generateFlow.js\";\n\n/**\n * Choose a random eligible text option and re-render.\n * @param {object} ctx\n */\nexport function randomTextFlow(ctx) {\n  const randomOptions = getRandomEligibleOptions(ctx.elements.textSelector);\n  const optionCount = randomOptions.length;\n  if (optionCount === 0) {\n    return;\n  }\n  if (optionCount === 1) {\n    ctx.elements.textSelector.value = randomOptions[0].value;\n    return;\n  }\n  const currentValue = ctx.elements.textSelector.value;\n  let randomOption = randomOptions[Math.floor(Math.random() * optionCount)];\n  if (randomOptions.some((option) => option.value === currentValue)) {\n    while (randomOption.value === currentValue) {\n      randomOption = randomOptions[Math.floor(Math.random() * optionCount)];\n    }\n  }\n  ctx.elements.textSelector.value = randomOption.value;\n  generateFlow(ctx);\n}\n", "import {\n  SHARE_COPY_PROMPT_LABEL,\n  SHARE_LAST_NAME_NOTICE,\n} from \"../app/constants.js\";\nimport { buildShareUrl } from \"../domain/queryState.js\";\nimport { getNameInputs } from \"../features/names.js\";\nimport {\n  getShareState,\n  hasProvidedLastName,\n  setShareCopiedState,\n} from \"../features/share.js\";\nimport { isDeclensionText } from \"../features/texts.js\";\nimport { getRandomMode } from \"./renderUtils.js\";\n\n/**\n * Build the share URL and last-name warning flag.\n * @param {object} ctx\n * @returns {{shareUrl: string, includesLastName: boolean}}\n */\nfunction buildSharePayload(ctx) {\n  return {\n    shareUrl: buildShareUrlForState(ctx),\n    includesLastName: hasProvidedLastName(getNameInputs(ctx.nameList)),\n  };\n}\n\n/**\n * Warn users when the share URL includes a last name.\n * @param {boolean} includesLastName\n */\nfunction maybeWarnLastName(includesLastName) {\n  if (includesLastName) {\n    alert(SHARE_LAST_NAME_NOTICE);\n  }\n}\n\n/**\n * Replace the current history entry with the share URL.\n * @param {string} shareUrl\n */\nfunction updateHistory(shareUrl) {\n  window.history.replaceState({}, \"\", shareUrl);\n}\n\n/**\n * Build a shareable URL that represents the current UI state.\n * @param {object} ctx\n * @returns {string}\n */\nexport function buildShareUrlForState(ctx) {\n  const shareState = getShareState({\n    nameInputs: getNameInputs(ctx.nameList),\n    salutationSelect: ctx.elements.salutationSelect,\n    textSelector: ctx.elements.textSelector,\n    pronounContainer: ctx.elements.pronounContainer,\n    randomMode: getRandomMode(ctx.elements),\n    markerToggle: ctx.elements.markerToggle,\n    declensionTabId: ctx.state.selectedDeclensionTabId,\n    isDeclensionText,\n  });\n  return buildShareUrl({\n    baseUrl: window.location.href,\n    ...shareState,\n  });\n}\n\n/**\n * Open the native share sheet if supported.\n * @param {object} ctx\n * @returns {Promise<void>}\n */\nexport async function shareSheetFlow(ctx) {\n  try {\n    const { shareUrl, includesLastName } = buildSharePayload(ctx);\n    maybeWarnLastName(includesLastName);\n    updateHistory(shareUrl);\n    await navigator.share({\n      title: document.title,\n      url: shareUrl,\n    });\n  } catch (error) {\n    void error;\n  }\n}\n\n/**\n * Copy a shareable URL to the clipboard, with a prompt fallback.\n * @param {object} ctx\n * @returns {Promise<void>}\n */\nexport async function shareCopyFlow(ctx) {\n  const { shareUrl, includesLastName } = buildSharePayload(ctx);\n  try {\n    maybeWarnLastName(includesLastName);\n    updateHistory(shareUrl);\n    await navigator.clipboard.writeText(shareUrl);\n    setShareCopiedState(ctx.elements.shareButton);\n  } catch (error) {\n    maybeWarnLastName(includesLastName);\n    updateHistory(shareUrl);\n    window.prompt(SHARE_COPY_PROMPT_LABEL, shareUrl);\n  }\n}\n", "import { clearUrlParamsIfStable } from \"./urlUtils.js\";\n\n/**\n * Toggle highlighted-marker styles based on the marker checkbox.\n * @param {object} ctx\n */\nexport function updateMarkerStyle(ctx) {\n  ctx.elements.resultsOutput.classList.toggle(\n    \"is-plain\",\n    !ctx.elements.markerToggle.checked,\n  );\n  clearUrlParamsIfStable(ctx.state);\n}\n", "import { createElements } from \"./elements.js\";\nimport { createState } from \"./state.js\";\nimport { $ } from \"./dom.js\";\nimport { populatePronounCheckboxes } from \"../features/pronouns.js\";\nimport { populateTextSelector } from \"../features/texts.js\";\nimport { createTtsController } from \"../features/tts.js\";\nimport { createMobileIconRow } from \"../features/results/mobileIconRow.js\";\nimport { initMarkerDialog } from \"../features/results/markerDialog.js\";\nimport {\n  createNameListState,\n  ensureNameRows,\n  hasAnyNameValues,\n} from \"../features/names.js\";\nimport { applyShareAvailability } from \"../features/share.js\";\nimport { hydrateFlow, selectRandomTextIfUnset } from \"../flows/hydrateFlow.js\";\nimport { generateFlow, renderRandomPreviewFlow } from \"../flows/generateFlow.js\";\nimport { rerunFlow } from \"../flows/rerunFlow.js\";\nimport { randomTextFlow } from \"../flows/randomTextFlow.js\";\nimport { shareCopyFlow, shareSheetFlow } from \"../flows/shareFlow.js\";\nimport { updateMarkerStyle } from \"../flows/markerFlow.js\";\nimport {\n  updateListenButton,\n  updateMobileIconLayout,\n  updateRandomModeVisibility,\n} from \"../flows/renderUtils.js\";\n\n/**\n * Locate the current listen button in results output or controls.\n * @param {HTMLElement} resultsOutput\n * @param {HTMLElement|null} resultsControls\n * @returns {HTMLElement|null}\n */\nfunction getListenButton(resultsOutput, resultsControls) {\n  return (\n    $(\".results-listen\", resultsOutput) ||\n    (resultsControls ? $(\".results-listen\", resultsControls) : null)\n  );\n}\n\n/**\n * Locate the results heading row.\n * @param {HTMLElement} resultsOutput\n * @returns {HTMLElement|null}\n */\nfunction getHeadingRow(resultsOutput) {\n  return $(\".results-heading\", resultsOutput);\n}\n\n/**\n * Locate the select row for text selection controls.\n * @returns {HTMLElement|null}\n */\nfunction getSelectRow() {\n  return $(\".select-row\");\n}\n\n/**\n * Locate the random mode row for radio buttons.\n * @returns {HTMLElement|null}\n */\nfunction getRandomModeRow() {\n  return $(\".random-mode-row\");\n}\n\n/**\n * Handle pronoun checkbox changes.\n * @param {object} ctx\n */\nfunction handlePronounChange(ctx) {\n  updateRandomModeVisibility(ctx);\n  generateFlow(ctx);\n}\n\n/**\n * Sync listen button and mobile icon row on TTS state changes.\n * @param {object} ctx\n */\nfunction handleTtsStatusChange(ctx) {\n  updateListenButton({\n    ttsController: ctx.ttsController,\n    getListenButton: ctx.getListenButton,\n  });\n  updateMobileIconLayout(ctx.mobileIconRow);\n}\n\n/**\n * Re-render when name inputs change.\n * @param {object} ctx\n */\nfunction handleNameInput(ctx) {\n  generateFlow(ctx);\n}\n\n/**\n * Attach DOM event handlers.\n * @param {object} ctx\n */\nfunction wireEvents(ctx) {\n  ctx.elements.randomTextButton.addEventListener(\n    \"click\",\n    randomTextFlow.bind(null, ctx),\n  );\n  ctx.elements.shareSheetButton.addEventListener(\n    \"click\",\n    shareSheetFlow.bind(null, ctx),\n  );\n  ctx.elements.shareButton.addEventListener(\n    \"click\",\n    shareCopyFlow.bind(null, ctx),\n  );\n  ctx.elements.markerToggle.addEventListener(\n    \"change\",\n    updateMarkerStyle.bind(null, ctx),\n  );\n\n  ctx.elements.salutationSelect.addEventListener(\n    \"change\",\n    generateFlow.bind(null, ctx),\n  );\n  ctx.elements.textSelector.addEventListener(\n    \"change\",\n    generateFlow.bind(null, ctx),\n  );\n  ctx.elements.pronounContainer.addEventListener(\n    \"change\",\n    handlePronounChange.bind(null, ctx),\n  );\n  ctx.elements.randomSingleRadio.addEventListener(\n    \"change\",\n    generateFlow.bind(null, ctx),\n  );\n  ctx.elements.randomEachRadio.addEventListener(\n    \"change\",\n    generateFlow.bind(null, ctx),\n  );\n  ctx.elements.rerunButton.addEventListener(\n    \"click\",\n    rerunFlow.bind(null, ctx),\n  );\n}\n\n/**\n * Initialize the application on DOMContentLoaded.\n */\nfunction init() {\n  const elements = createElements();\n  const state = createState();\n  const nameList = createNameListState({ container: elements.namesContainer });\n  const mobileMediaQuery = window.matchMedia(\"(max-width: 60rem)\");\n\n  const ctx = {\n    elements,\n    state,\n    nameList,\n    markerDialog: null,\n    ttsController: null,\n    mobileIconRow: null,\n    getListenButton: getListenButton.bind(\n      null,\n      elements.resultsOutput,\n      elements.resultsControls,\n    ),\n    getHeadingRow: getHeadingRow.bind(null, elements.resultsOutput),\n    onNameInput: null,\n  };\n\n  populateTextSelector(elements.textSelector);\n  populatePronounCheckboxes(elements.pronounContainer);\n\n  ctx.markerDialog = initMarkerDialog({\n    dialog: elements.markerDialog,\n    dialogBody: elements.markerDialogBody,\n    dialogTitle: elements.markerDialogTitle,\n    resultsOutput: elements.resultsOutput,\n  });\n\n  ctx.onNameInput = handleNameInput.bind(null, ctx);\n  ensureNameRows(nameList, ctx.onNameInput);\n  hydrateFlow(ctx);\n  updateRandomModeVisibility(ctx);\n  updateMarkerStyle(ctx);\n  selectRandomTextIfUnset(ctx);\n  renderRandomPreviewFlow(ctx);\n\n  ctx.ttsController = createTtsController({\n    onStatusChange: handleTtsStatusChange.bind(null, ctx),\n  });\n  ctx.ttsController.init();\n\n  ctx.mobileIconRow = createMobileIconRow({\n    mobileQuery: mobileMediaQuery,\n    resultsControls: elements.resultsControls,\n    randomModeContainer: elements.randomModeContainer,\n    randomTextButton: elements.randomTextButton,\n    rerunButton: elements.rerunButton,\n    getListenButton: ctx.getListenButton,\n    getHeadingRow: ctx.getHeadingRow,\n    getSelectRow,\n    getRandomModeRow,\n  });\n  ctx.mobileIconRow.attach();\n\n  wireEvents(ctx);\n  applyShareAvailability(elements.shareSheetButton, elements.shareButton);\n\n  if (hasAnyNameValues(nameList)) {\n    generateFlow(ctx);\n  }\n  updateMobileIconLayout(ctx.mobileIconRow);\n  state.isHydrating = false;\n}\n\nwindow.addEventListener(\"DOMContentLoaded\", init);\n"],
  "mappings": "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P,MAAO,OACP,MAAO,MACT,EACA,CACE,YAAa,UACb,MAAO,cACP,UAAW,MACX,MAAO,MACP,UAAW,MACX,MAAO,OACP,MAAO,OACP,MAAO,OACP,MAAO,OACP,MAAO,OACP,MAAO,MACT,EACA,CACE,YAAa,YACb,MAAO,cACP,UAAW,OACX,MAAO,OACP,UAAW,OACX,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,OACT,EACA,CACE,YAAa,IACb,MAAO,cACP,UAAW,IACX,MAAO,IACP,UAAW,IACX,MAAO,IACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,IACT,EACA,CACE,YAAa,UACb,MAAO,cACP,UAAW,MACX,MAAO,MACP,UAAW,MACX,MAAO,OACP,MAAO,QACP,MAAO,OACP,MAAO,OACP,MAAO,OACP,MAAO,MACT,EACA,CACE,YAAa,kBACb,MAAO,cACP,UAAW,MACX,MAAO,MACP,UAAW,MACX,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,OACT,EACA,CACE,YAAa,kBACb,MAAO,cACP,UAAW,MACX,MAAO,MACP,UAAW,MACX,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,OACT,EACA,CACE,YAAa,mBACb,MAAO,cACP,UAAW,OACX,MAAO,OACP,UAAW,OACX,MAAO,OACP,MAAO,QACP,MAAO,SACP,MAAO,SACP,MAAO,SACP,MAAO,QACT,EACA,CACE,YAAa,mBACb,MAAO,cACP,UAAW,OACX,MAAO,OACP,UAAW,OACX,MAAO,OACP,MAAO,QACP,MAAO,SACP,MAAO,SACP,MAAO,SACP,MAAO,QACT,EACA,CACE,YAAa,YACb,MAAO,cACP,UAAW,OACX,MAAO,OACP,UAAW,OACX,MAAO,OACP,MAAO,OACP,MAAO,OACP,MAAO,OACP,MAAO,OACP,MAAO,MACT,EACA,CACE,YAAa,YACb,MAAO,cACP,UAAW,OACX,MAAO,OACP,UAAW,OACX,MAAO,OACP,MAAO,QACP,MAAO,SACP,MAAO,SACP,MAAO,SACP,MAAO,QACT,EACA,CACE,YAAa,SACb,MAAO,uBACP,UAAW,SACX,MAAO,UACP,UAAW,UACX,MAAO,WACP,MAAO,aACP,MAAO,eACP,MAAO,eACP,MAAO,eACP,MAAO,cACT,EACA,CACE,YAAa,SACb,MAAO,uBACP,UAAW,SACX,MAAO,UACP,UAAW,UACX,MAAO,WACP,MAAO,aACP,MAAO,eACP,MAAO,eACP,MAAO,eACP,MAAO,cACT,EACA,CACE,YAAa,UACb,MAAO,cACP,UAAW,MACX,MAAO,MACP,UAAW,MACX,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,OACT,EACA,CACE,YAAa,YACb,MAAO,cACP,UAAW,MACX,MAAO,QACP,UAAW,MACX,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,OACT,EACA,CACE,YAAa,MACb,MAAO,cACP,UAAW,MACX,MAAO,MACP,UAAW,MACX,MAAO,OACP,MAAO,OACP,MAAO,OACP,MAAO,OACP,MAAO,OACP,MAAO,MACT,EACA,CACE,YAAa,SACb,MAAO,cACP,UAAW,KACX,MAAO,MACP,UAAW,KACX,MAAO,MACP,MAAO,MACP,MAAO,MACP,MAAO,MACP,MAAO,MACP,MAAO,KACT,EACA,CACE,YAAa,SACb,MAAO,cACP,UAAW,SACX,MAAO,SACP,UAAW,SACX,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,SACT,EACA,CACE,YAAa,QACb,MAAO,cACP,UAAW,QACX,MAAO,QACP,UAAW,QACX,MAAO,SACP,MAAO,SACP,MAAO,SACP,MAAO,SACP,MAAO,SACP,MAAO,QACT,EACA,CACE,YAAa,YACb,MAAO,kBACP,UAAW,MACX,MAAO,QACP,UAAW,MACX,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,OACT,EACA,CACE,YAAa,YACb,MAAO,kBACP,UAAW,MACX,MAAO,QACP,UAAW,MACX,MAAO,MACP,MAAO,OACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,OACT,EACA,CACE,YAAa,iBACb,MAAO,iBACP,UAAW,KACX,MAAO,KACP,UAAW,KACX,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,IACT,CACF,EC3XO,SAASC,GAAyBC,EAAaC,EAAgBC,EAAO,CAC3E,GAAI,CAAC,MAAM,QAAQF,CAAW,GAAKE,GAAS,EAC1C,MAAO,CAAC,EAGV,IAAMC,EAAUH,EACb,IAAI,CAACI,EAAKC,KAAW,CAAE,IAAAD,EAAK,MAAAC,CAAM,EAAE,EACpC,OAAO,CAAC,CAAE,IAAAD,CAAI,IAAM,CAACH,EAAe,IAAIG,EAAI,OAAS,kBAAkB,CAAC,EAE3E,QAASE,EAAIH,EAAQ,OAAS,EAAGG,EAAI,EAAGA,GAAK,EAAG,CAC9C,IAAMC,EAAY,KAAK,MAAM,KAAK,OAAO,GAAKD,EAAI,EAAE,EACpD,CAACH,EAAQG,CAAC,EAAGH,EAAQI,CAAS,CAAC,EAAI,CAACJ,EAAQI,CAAS,EAAGJ,EAAQG,CAAC,CAAC,CACpE,CAEA,OAAOH,EAAQ,MAAM,EAAG,KAAK,IAAID,EAAOC,EAAQ,MAAM,CAAC,CACzD,CAOO,SAASK,GAA4BL,EAAS,CACnD,IAAMM,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,gBAEpB,IAAMC,EAAQ,SAAS,cAAc,IAAI,EACzCA,EAAM,UAAY,uBAClBA,EAAM,YAAc,qBACpBD,EAAQ,YAAYC,CAAK,EAEzB,IAAMC,EAAO,SAAS,cAAc,KAAK,EACzC,OAAAA,EAAK,UAAY,eAEjBR,EAAQ,QAAQ,CAAC,CAAE,IAAAC,EAAK,MAAAC,CAAM,IAAM,CAClC,IAAMO,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAW,SAAS,cAAc,OAAO,EAE/CA,EAAS,KAAO,WAChBA,EAAS,MAAQR,EAAM,SAAS,EAChCO,EAAM,YAAYC,CAAQ,EAE1B,IAAMC,EAAW,SAAS,eAAe,IAAIV,EAAI,WAAW,EAAE,EAC9DQ,EAAM,YAAYE,CAAQ,EAE1B,IAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,UAAY,eAChBA,EAAI,YAAYH,CAAK,EACrBD,EAAK,YAAYI,CAAG,CACtB,CAAC,EAEDN,EAAQ,YAAYE,CAAI,EACjBF,CACT,CAMO,SAASO,GAAwBC,EAAW,CACjDA,EAAU,iBAAiB,SAAWC,GAAU,CAC9C,IAAMC,EAASD,EAAM,OACrB,GAAI,CAACC,GAAUA,EAAO,UAAY,QAChC,OAGF,IAAMN,EAA4CM,EAClD,GAAIN,EAAS,OAAS,YAAcA,EAAS,QAAU,GACrD,OAGeI,EAAU,iBACzB,iCAAiCJ,EAAS,KAAK,IACjD,EAES,QAASO,GAAU,CACtBA,IAAUP,IACZO,EAAM,QAAUP,EAAS,QAE7B,CAAC,CACH,CAAC,CACH,CChFO,IAAMQ,EAAiBC,GAAgB,IAAKC,GAAQ,IAAIC,EAAWD,CAAG,CAAC,EAQ9E,SAASE,GAAWC,EAAWC,EAAS,CACtC,IAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,gBAElB,IAAMC,EAAQ,SAAS,cAAc,IAAI,EACzCA,EAAM,UAAY,uBAClBA,EAAM,YAAcH,EACpBE,EAAM,YAAYC,CAAK,EAEvB,IAAMC,EAAO,SAAS,cAAc,KAAK,EACzC,OAAAA,EAAK,UAAY,eAEK,CAAC,GAAGH,CAAO,EAAE,KAAK,CAACI,EAAGC,IAC1CD,EAAE,IAAI,YAAY,cAAcC,EAAE,IAAI,YAAa,IAAI,CACzD,EAEc,QAAQ,CAAC,CAAE,IAAAC,EAAK,MAAAC,CAAM,IAAM,CACxC,IAAMC,EAAK,WAAWD,CAAK,GACrBE,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAW,SAAS,cAAc,OAAO,EAE/CA,EAAS,KAAO,WAChBA,EAAS,GAAKF,EACdE,EAAS,MAAQH,EAAM,SAAS,EAChCE,EAAM,YAAYC,CAAQ,EAE1B,IAAMC,EAAW,SAAS,eAAe,IAAIL,EAAI,WAAW,EAAE,EAC9DG,EAAM,YAAYE,CAAQ,EAE1B,IAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,UAAY,eAChBA,EAAI,YAAYH,CAAK,EACrBN,EAAK,YAAYS,CAAG,CACtB,CAAC,EAEDX,EAAM,YAAYE,CAAI,EACfF,CACT,CAOA,SAASY,GAA0BC,EAAWC,EAAc,CAC1D,IAAMC,EAAcF,EAAU,UAAU,OAAO,cAAc,EAC7DC,EAAa,aAAa,iBAAkB,CAACC,GAAa,SAAS,CAAC,EACpED,EAAa,YAAcC,EACvB,4BACA,2BACN,CAOO,SAASC,GAA0BC,EAAW,CACnD,IAAMC,EAAgB,IAAI,IAAI,CAAC,qBAAkB,CAAC,EAC5CC,EAAwBC,GAC5B3B,EACAyB,EACA,CACF,EAEMG,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAY,yCAExB,IAAMR,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,oDACtBA,EAAU,GAAK,mBAEf,IAAMS,EAAc,IAAI,IAExB7B,EAAe,QAAQ,CAACY,EAAKC,IAAU,CACrC,IAAMR,EAAYO,EAAI,OAAS,mBAC1BiB,EAAY,IAAIxB,CAAS,GAC5BwB,EAAY,IAAIxB,EAAW,CAAC,CAAC,EAE/BwB,EAAY,IAAIxB,CAAS,EAAE,KAAK,CAAE,IAAAO,EAAK,MAAAC,CAAM,CAAC,CAChD,CAAC,EAEqB,MAAM,KAAKgB,EAAY,QAAQ,CAAC,EAExC,QAAQ,CAAC,CAACxB,EAAWC,CAAO,IAAM,CAC9C,IAAMwB,EAAe1B,GAAWC,EAAWC,CAAO,EAC9CmB,EAAc,IAAIpB,CAAS,GACzBA,IAAc,uBAChByB,EAAa,YACXC,GAA4BL,CAAqB,CACnD,EAEFE,EAAY,YAAYE,CAAY,GAEpCV,EAAU,YAAYU,CAAY,CAEtC,CAAC,EAEDN,EAAU,YAAYI,CAAW,EAEjC,IAAMP,EAAe,SAAS,cAAc,QAAQ,EACpDA,EAAa,KAAO,SACpBA,EAAa,UAAY,iBACzBA,EAAa,aAAa,gBAAiB,OAAO,EAClDA,EAAa,aAAa,gBAAiB,kBAAkB,EAC7DA,EAAa,YAAc,4BAC3BA,EAAa,iBACX,QACAF,GAA0B,KAAK,KAAMC,EAAWC,CAAY,CAC9D,EAEA,IAAMW,EAAiBZ,EAAU,kBAAoB,EACrDC,EAAa,OAAS,CAACW,EACvBZ,EAAU,OAAS,CAACY,EAEpBR,EAAU,YAAYH,CAAY,EAClCG,EAAU,YAAYJ,CAAS,EAC/Ba,GAAwBT,CAAS,CACnC,CASO,SAASU,EACdV,EACA,CAAE,iBAAAW,EAAmB,EAAK,EAAI,CAAC,EAC/B,CACA,IAAMC,EAAkB,MAAM,KAC5B,IAAI,IACF,MAAM,KAAKZ,EAAU,iBAAiB,wBAAwB,CAAC,EAC5D,OAAQa,GAAQA,EAAI,OAAO,EAC3B,IAAKA,GAAQA,EAAI,KAAK,CAC3B,CACF,EAAE,IAAKC,GAAU,SAASA,EAAO,EAAE,CAAC,EAEpC,GAAIF,EAAgB,OAAS,EAC3B,OAAOA,EAAgB,IAAKvB,GAAUb,EAAea,CAAK,CAAC,EAG7D,GAAI,CAACsB,EACH,MAAO,CAAC,EAGV,IAAMtB,EAAQ,KAAK,MAAM,KAAK,OAAO,EAAIb,EAAe,MAAM,EAC9D,MAAO,CAACA,EAAea,CAAK,CAAC,CAC/B,CCzJA,IAAM0B,GAAc,CAClB,OAAQ,CACN,MAAO,SACP,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6JAQR,EAEA,cAAe,CACb,MAAO,oBACP,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDAWR,EAEA,WAAY,CACV,MAAO,eACP,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAWR,EAEA,aAAc,CACZ,MAAO,iCACP,KAAM;AAAA;AAAA;AAAA;AAAA,wWAKR,EAEA,QAAS,CACP,MAAO,UACP,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0NAaR,EAEA,QAAS,CACP,MAAO,sBACP,KAAM;AAAA;AAAA;AAAA;AAAA,qIAKR,EAEA,UAAW,CACT,MAAO,8BACP,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kJAOR,EAEA,UAAW,CACT,MAAO,kBACP,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iHAOR,EAEA,QAAS,CACP,MAAO,UACP,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yJASR,EAEA,MAAO,CACL,MAAO,uBACP,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAWR,EACA,YAAa,CACX,MAAO,qBACP,KAAM,cACN,OAAQ,GACR,KAAM,EACR,CACF,EAEOC,GAAQD,GC5IR,SAASE,GAAmBC,EAAS,CAC1C,OAAOA,GAAUC,GAAYD,CAAO,GAAK,IAC3C,CAOO,SAASE,EAAiBF,EAAS,CAExC,OADcD,GAAmBC,CAAO,GAC1B,OAAS,aACzB,CAOO,SAASG,GAAsBC,EAAO,CAC3C,MAAO,EAAEA,GAASA,EAAM,SAAW,GACrC,CAMO,SAASC,GAAqBC,EAAQ,CAC3C,OAAO,QAAQL,EAAW,EAAE,QAAQ,CAAC,CAACM,EAAKH,CAAK,IAAM,CACpD,IAAMI,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQD,EACfC,EAAO,YAAcJ,EAAM,OAASG,EAC/BJ,GAAsBC,CAAK,IAC9BI,EAAO,QAAQ,eAAiB,SAElCF,EAAO,YAAYE,CAAM,CAC3B,CAAC,CACH,CAOO,SAASC,EAAyBH,EAAQ,CAC/C,OAAO,MAAM,KAAKA,EAAO,OAAO,EAAE,OAC/BE,GAAWA,EAAO,QAAQ,iBAAmB,OAChD,CACF,CClDO,SAASE,GAAoB,CAAE,eAAAC,CAAe,EAAI,CAAC,EAAG,CAC3D,IAAIC,EAAY,GACZC,EAAW,GACXC,EAAQ,KACRC,EAAY,KAGhB,SAASC,GAAS,CACZL,GACFA,EAAe,CAAE,UAAAC,EAAW,SAAAC,EAAU,MAAAC,CAAM,CAAC,CAEjD,CAOA,SAASG,EAAgBC,EAAQ,CAC/B,OAAOA,EAAO,OACXC,GACCA,EAAU,MAAQA,EAAU,KAAK,YAAY,EAAE,WAAW,IAAI,CAClE,CACF,CAGA,SAASC,GAAqB,CAC5B,GAAI,EAAE,oBAAqB,QAAS,CAClCR,EAAY,GACZE,EAAQ,KACRE,EAAO,EACP,MACF,CAEA,IAAME,EAAS,OAAO,gBAAgB,UAAU,EAC1CG,EAAeJ,EAAgBC,CAAM,EAC3CN,EAAYS,EAAa,OAAS,EAClCP,EAAQO,EAAa,CAAC,GAAK,KAC3BL,EAAO,CACT,CAGA,SAASM,GAAO,CACR,oBAAqB,UAIvB,OAAO,gBAAgB,UAAY,OAAO,gBAAgB,UAC5D,OAAO,gBAAgB,OAAO,EAGhCT,EAAW,GACXE,EAAY,KACZC,EAAO,EACT,CAMA,SAASO,EAAMC,EAAM,CACnB,GAAI,CAACZ,EACH,OAGF,IAAMS,EAAeJ,EAAgB,OAAO,gBAAgB,UAAU,CAAC,EACvE,GAAII,EAAa,SAAW,EAC1B,OAIF,IAAMI,EAAc,KAAK,MAAM,KAAK,OAAO,EAAIJ,EAAa,MAAM,EAClEP,EAAQO,EAAaI,CAAW,EAChC,IAAMC,EAAYF,EAAOA,EAAK,KAAK,EAAI,GACvC,GAAI,CAACE,EACH,OAGFJ,EAAK,EACL,IAAMK,EAAgB,IAAI,yBAAyBD,CAAS,EAC5DC,EAAc,MAAQb,EACtBa,EAAc,KAAOb,EAAM,KAE3Ba,EAAc,MAAQ,IAAM,CAC1Bd,EAAW,GACXG,EAAO,CACT,EAEAW,EAAc,QAAU,IAAM,CAC5Bd,EAAW,GACXG,EAAO,CACT,EAEAH,EAAW,GACXE,EAAYY,EACZX,EAAO,EACP,OAAO,gBAAgB,MAAMW,CAAa,CAC5C,CAMA,SAASC,EAAOJ,EAAM,CACpB,GAAKZ,EAIL,IAAIC,EAAU,CACZS,EAAK,EACL,MACF,CAEAC,EAAMC,CAAI,EACZ,CAGA,SAASK,GAAO,CACdT,EAAmB,EACf,oBAAqB,QACvB,OAAO,gBAAgB,iBAAiB,gBAAiB,IAAM,CAC7DA,EAAmB,CACrB,CAAC,CAEL,CAGA,SAASU,GAAW,CAClB,MAAO,CAAE,UAAAlB,EAAW,SAAAC,EAAU,MAAAC,EAAO,UAAAC,CAAU,CACjD,CAEA,MAAO,CACL,KAAAc,EACA,mBAAAT,EACA,KAAAE,EACA,MAAAC,EACA,OAAAK,EACA,SAAAE,CACF,CACF,CC5IA,SAASC,GAAUC,EAAW,CACxBA,EAAU,cAAc,eAAiB,CAACA,EAAU,kBAItDA,EAAU,qBACVA,EAAU,oBAAoB,gBAAkBA,EAAU,gBAE1DA,EAAU,gBAAgB,aACxBA,EAAU,cACVA,EAAU,oBAAoB,WAChC,EAEAA,EAAU,gBAAgB,YAAYA,EAAU,aAAa,EAEjE,CAMA,SAASC,GAAOD,EAAW,CACzB,IAAME,EAAeF,EAAU,gBAC3BA,EAAU,gBAAgB,EAC1B,KACEG,EAAmB,EACvBH,EAAU,qBAAqB,UAAU,SAAS,WAAW,EAM/D,GAJIA,EAAU,aACZA,EAAU,YAAY,UAAU,OAAO,YAAaG,CAAgB,EAGlEH,EAAU,YAAY,QAAS,CACjCD,GAAUC,CAAS,EACnB,CAACA,EAAU,iBAAkBA,EAAU,YAAaE,CAAY,EAC7D,OAAO,OAAO,EACd,QAASE,GAAW,CACnBJ,EAAU,cAAc,YAAYI,CAAM,CAC5C,CAAC,EACH,MACF,CAEIJ,EAAU,kBACZA,EAAU,eAAe,GAAG,YAAYA,EAAU,gBAAgB,EAEhEA,EAAU,aACZA,EAAU,mBAAmB,GAAG,YAAYA,EAAU,WAAW,EAE/DE,GACFF,EAAU,gBAAgB,GAAG,YAAYE,CAAY,CAEzD,CAMA,SAASG,GAAOL,EAAW,CACzBA,EAAU,YAAY,iBACpB,SACAC,GAAO,KAAK,KAAMD,CAAS,CAC7B,CACF,CAOO,SAASM,GAAoB,CAClC,YAAAC,EACA,gBAAAC,EACA,oBAAAC,EACA,iBAAAC,EACA,YAAAC,EACA,gBAAAC,EACA,cAAAC,EACA,aAAAC,EACA,iBAAAC,CACF,EAAG,CACD,IAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,kBAE1B,IAAMhB,EAAY,CAChB,YAAAO,EACA,gBAAAC,EACA,oBAAAC,EACA,iBAAAC,EACA,YAAAC,EACA,gBAAAC,EACA,cAAAC,EACA,aAAAC,EACA,iBAAAC,EACA,cAAAC,CACF,EAEA,MAAO,CACL,IAAKA,EACL,OAAQX,GAAO,KAAK,KAAML,CAAS,EACnC,OAAQC,GAAO,KAAK,KAAMD,CAAS,CACrC,CACF,CCrGA,SAASiB,IAA0B,CACjC,MAAO,CACL,KAAM,IAAM,CAAC,EACb,MAAO,IAAM,CAAC,CAChB,CACF,CAOA,SAASC,GAAuBC,EAAWC,EAAM,CAC/CD,EAAU,WAAW,YAAcC,CACrC,CAOA,SAASC,GAAeF,EAAWG,EAAQ,CACzC,GAAI,CAACA,EACH,OAEF,IAAMC,EAAaD,EAAO,sBAAsB,EAC1CE,EAAaL,EAAU,OAAO,sBAAsB,EACpDM,EAAgB,OAAO,WACvBC,EAAiB,OAAO,YAExBC,EAAU,GACVC,EAAM,EACNC,EAAY,EAEZC,EAAaP,EAAW,IACxBQ,EAAaL,EAAiBH,EAAW,OACzCS,EACJD,GAAcP,EAAW,OAASI,EAAMC,GACxCE,GAAcD,EACVG,EAAYD,EAAa,SAAW,MAEtCE,EAAMF,EACNT,EAAW,OAASK,EAAMC,EAC1BN,EAAW,IAAMC,EAAW,OAASI,EAAMC,EAC3CM,EAAOZ,EAAW,KAAOA,EAAW,MAAQ,EAAIC,EAAW,MAAQ,EAEvEW,EAAO,KAAK,IACVR,EACA,KAAK,IAAIQ,EAAMV,EAAgBD,EAAW,MAAQG,CAAO,CAC3D,EACAO,EAAM,KAAK,IACTP,EACA,KAAK,IAAIO,EAAKR,EAAiBF,EAAW,OAASG,CAAO,CAC5D,EAEAR,EAAU,OAAO,MAAM,KAAO,GAAGgB,CAAI,KACrChB,EAAU,OAAO,MAAM,IAAM,GAAGe,CAAG,KACnCf,EAAU,OAAO,QAAQ,UAAYc,EAErC,IAAMG,EAAYb,EAAW,KAAOA,EAAW,MAAQ,EAAIY,EACrDE,EAAmB,KAAK,IAC5B,GACA,KAAK,IAAIb,EAAW,MAAQ,GAAIY,CAAS,CAC3C,EACAjB,EAAU,OAAO,MAAM,YACrB,sBACA,GAAGkB,CAAgB,IACrB,CACF,CAOA,SAASC,GAAWnB,EAAW,CAAE,MAAAoB,EAAO,KAAAnB,EAAM,QAAAoB,CAAQ,EAAG,CACvDrB,EAAU,YAAY,YAAcoB,EACpCrB,GAAuBC,EAAWC,CAAI,EACtCD,EAAU,UAAYqB,GAAW,SAAS,cAC1CrB,EAAU,cAAgBqB,GAAW,KACrCrB,EAAU,OAAS,GACfA,EAAU,eACZA,EAAU,cAAc,aAAa,gBAAiB,MAAM,EAE1D,OAAOA,EAAU,OAAO,WAAc,WACxCA,EAAU,OAAO,UAAU,EAClB,OAAOA,EAAU,OAAO,MAAS,WAC1CA,EAAU,OAAO,KAAK,EAEtBA,EAAU,OAAO,aAAa,OAAQ,MAAM,EAE9CE,GAAeF,EAAWA,EAAU,aAAa,EACjDA,EAAU,WAAW,MAAM,CAC7B,CAMA,SAASsB,EAAYtB,EAAW,CACzBA,EAAU,SAGXA,EAAU,OAAO,KACnBA,EAAU,OAAO,MAAM,EAEvBA,EAAU,OAAO,gBAAgB,MAAM,EAEzCA,EAAU,OAAS,GACfA,EAAU,eACZA,EAAU,cAAc,aAAa,gBAAiB,OAAO,EAE/DA,EAAU,cAAgB,KAC5B,CAMA,SAASuB,GAAkBvB,EAAW,CAChCA,EAAU,WAAa,SAAS,SAASA,EAAU,SAAS,GAC9DA,EAAU,UAAU,MAAM,EAE5BA,EAAU,UAAY,IACxB,CAOA,SAASwB,GAAsBxB,EAAWyB,EAAO,CAC3CA,EAAM,MAAQ,UAChBH,EAAYtB,CAAS,CAEzB,CAOA,SAAS0B,GAAqB1B,EAAWyB,EAAO,CACzCzB,EAAU,SAGXA,EAAU,OAAO,SAASyB,EAAM,MAAM,GAG1CH,EAAYtB,CAAS,EACvB,CAMA,SAAS2B,GAAqB3B,EAAW,CACnC,CAACA,EAAU,QAAU,CAACA,EAAU,eAGpCE,GAAeF,EAAWA,EAAU,aAAa,CACnD,CAOA,SAAS4B,GAAkB5B,EAAWyB,EAAO,CACvBA,EAAM,OAAO,QAAQ,qBAAqB,GAE5DH,EAAYtB,CAAS,CAEzB,CAOA,SAAS6B,GAAmB7B,EAAWyB,EAAO,CAC5C,IAAMtB,EAASsB,EAAM,OAAO,QAAQ,6BAA6B,EACjE,GAAI,CAACtB,EACH,OAEF,GAAIA,EAAO,aAAa,cAAc,EAAG,CACvC,IAAM2B,EAAe3B,EAAO,aAAa,cAAc,GAAK,SACtD4B,EAAY5B,EAAO,aAAa,mBAAmB,GAAK,SAC9DgB,GAAWnB,EAAW,CACpB,MAAO,gBACP,KAAM,GAAG8B,CAAY,WAAMC,CAAS,GACpC,QAAS5B,CACX,CAAC,EACD,MACF,CAIA,IAAM6B,GAHgBhC,EAAU,cAAc,QAAQ,mBAAqB,IAExDG,EAAO,aAAa,kBAAkB,GAAK,UAEjD,OAAS,yBAAqB,qBAC3CgB,GAAWnB,EAAW,CACpB,MAAO,cACP,KAAM,iBAAYgC,CAAW,GAC7B,QAAS7B,CACX,CAAC,CACH,CAOA,SAAS8B,GAAqBjC,EAAWyB,EAAO,CAC9C,GAAIA,EAAM,MAAQ,SAAWA,EAAM,MAAQ,IACzC,OAEF,IAAMtB,EAASsB,EAAM,OAAO,QAAQ,6BAA6B,EAC5DtB,IAGLsB,EAAM,eAAe,EACrBtB,EAAO,MAAM,EACf,CAOO,SAAS+B,GAAiB,CAC/B,OAAAC,EACA,WAAAC,EACA,YAAAC,EACA,cAAAC,CACF,EAAG,CACD,GAAI,CAACH,GAAU,CAACC,GAAc,CAACC,GAAe,CAACC,EAC7C,OAAOxC,GAAwB,EAGjC,IAAME,EAAY,CAChB,OAAAmC,EACA,WAAAC,EACA,YAAAC,EACA,cAAAC,EACA,UAAW,KACX,cAAe,KACf,OAAQ,EACV,EAEA,OAAAH,EAAO,iBAAiB,QAASZ,GAAkB,KAAK,KAAMvB,CAAS,CAAC,EACxEmC,EAAO,iBAAiB,QAASP,GAAkB,KAAK,KAAM5B,CAAS,CAAC,EAExE,SAAS,iBACP,UACAwB,GAAsB,KAAK,KAAMxB,CAAS,CAC5C,EACA,SAAS,iBACP,cACA0B,GAAqB,KAAK,KAAM1B,CAAS,CAC3C,EACA,OAAO,iBAAiB,SAAU2B,GAAqB,KAAK,KAAM3B,CAAS,CAAC,EAC5E,OAAO,iBACL,SACA2B,GAAqB,KAAK,KAAM3B,CAAS,EACzC,EACF,EAEAsC,EAAc,iBACZ,QACAT,GAAmB,KAAK,KAAM7B,CAAS,CACzC,EACAsC,EAAc,iBACZ,UACAL,GAAqB,KAAK,KAAMjC,CAAS,CAC3C,EAEO,CACL,KAAMmB,GAAW,KAAK,KAAMnB,CAAS,EACrC,MAAOsB,EAAY,KAAK,KAAMtB,CAAS,CACzC,CACF,CCxRO,IAAMuC,GAAmB,sBAEzB,IAAMC,GAAoB,kBACpBC,GAAiB,wCACjBC,GACX,uGACWC,GAAqB,uCACrBC,GAA0B,yCAC1BC,GAA0B,iBAC1BC,GAA0B,UAC1BC,GACX,iOACWC,EAAe,gBACfC,GAAoB,mBCL1B,SAASC,GAAoB,CAAE,UAAAC,EAAW,SAAAC,EAAW,CAAU,EAAG,CACvE,MAAO,CAAE,UAAAD,EAAW,SAAAC,CAAS,CAC/B,CAOO,SAASC,EAAcC,EAAU,CACtC,OAAOC,EAAG,cAAeD,EAAS,SAAS,CAC7C,CAOO,SAASE,GAAYF,EAAU,CACpC,OAAOC,EAAG,YAAaD,EAAS,SAAS,CAC3C,CAOO,SAASG,GAAsBH,EAAU,CAC9C,OAAOD,EAAcC,CAAQ,EAAE,OAC5BI,GAAUA,EAAM,MAAM,KAAK,EAAE,OAAS,CACzC,EAAE,MACJ,CAOO,SAASC,EAAiBL,EAAU,CACzC,OAAOG,GAAsBH,CAAQ,EAAI,CAC3C,CAMO,SAASM,GAAoBN,EAAU,CAC7BD,EAAcC,CAAQ,EAC9B,QAAQ,CAACI,EAAOG,IAAU,CAC/B,GAAIA,IAAU,EAAG,CACfH,EAAM,GAAK,QACXA,EAAM,gBAAgB,YAAY,EAClC,MACF,CACIA,EAAM,KAAO,SACfA,EAAM,gBAAgB,IAAI,EAE5BA,EAAM,aAAa,aAAc,eAAe,CAClD,CAAC,CACH,CAMO,SAASI,GAAkBR,EAAU,CAC1C,IAAMS,EAAOP,GAAYF,CAAQ,EACjCS,EAAK,QAASC,GAAQ,CACpB,IAAMC,EAAeC,EAAE,eAAgBF,CAAG,EACtCC,GACFA,EAAa,UAAU,OAAO,YAAaF,EAAK,SAAW,CAAC,CAEhE,CAAC,EAEDH,GAAoBN,CAAQ,CAC9B,CASO,SAASa,GAAcb,EAAUU,EAAKN,EAAOU,EAAU,CAE5D,IAAMC,EADehB,EAAcC,CAAQ,EACT,QAAQI,CAAK,EAC/CM,EAAI,OAAO,EACXF,GAAkBR,CAAQ,EACtBc,GACFA,EAAS,EAEX,IAAME,EAAcjB,EAAcC,CAAQ,EAC1C,GAAIgB,EAAY,SAAW,EACzB,OAEF,IAAMC,EAAY,KAAK,IAAIF,EAAcC,EAAY,OAAS,CAAC,EAC/DA,EAAYC,CAAS,EAAE,MAAM,CAC/B,CAMA,SAASC,GAAgBJ,EAAU,CAC7BA,GACFA,EAAS,CAEb,CAWA,SAASK,GAAkBnB,EAAUU,EAAKN,EAAOU,EAAUM,EAAO,CAChE,GAAIA,EAAM,MAAQ,QAAS,CACzBA,EAAM,eAAe,EACrBC,EAAWrB,EAAU,GAAIc,CAAQ,EACjC,MACF,CACIM,EAAM,MAAQ,cAGdhB,EAAM,MAAM,KAAK,EAAE,OAAS,GAG5BF,GAAYF,CAAQ,EAAE,SAAW,IAGrCoB,EAAM,eAAe,EACrBP,GAAcb,EAAUU,EAAKN,EAAOU,CAAQ,GAC9C,CASA,SAASQ,GAAkBtB,EAAUU,EAAKN,EAAOU,EAAU,CACzDD,GAAcb,EAAUU,EAAKN,EAAOU,CAAQ,CAC9C,CASO,SAASS,GAAcvB,EAAUwB,EAAQ,GAAIV,EAAU,CAC5D,IAAMJ,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,UAAY,WAEhB,IAAMN,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,KAAO,OACbA,EAAM,UAAY,aAClBA,EAAM,YAAcqB,GACpBrB,EAAM,MAAQoB,EACdpB,EAAM,iBAAiB,QAASc,GAAgB,KAAK,KAAMJ,CAAQ,CAAC,EACpEV,EAAM,iBACJ,UACAe,GAAkB,KAAK,KAAMnB,EAAUU,EAAKN,EAAOU,CAAQ,CAC7D,EAEA,IAAMH,EAAe,SAAS,cAAc,QAAQ,EACpD,OAAAA,EAAa,KAAO,SACpBA,EAAa,UAAY,0BACzBA,EAAa,aAAa,aAAce,EAAiB,EACzDf,EAAa,aAAa,QAASe,EAAiB,EACpDf,EAAa,UACX,4DACFA,EAAa,iBACX,QACAW,GAAkB,KAAK,KAAMtB,EAAUU,EAAKN,EAAOU,CAAQ,CAC7D,EAEAJ,EAAI,YAAYN,CAAK,EACrBM,EAAI,YAAYC,CAAY,EAErBD,CACT,CASO,SAASW,EAAWrB,EAAUwB,EAAQ,GAAIV,EAAU,CACzD,GAAIZ,GAAYF,CAAQ,EAAE,QAAUA,EAAS,SAC3C,OAAO,KAET,IAAMU,EAAMa,GAAcvB,EAAUwB,EAAOV,CAAQ,EACnDd,EAAS,UAAU,YAAYU,CAAG,EAClCF,GAAkBR,CAAQ,EAC1B,IAAM2B,EAAWf,EAAE,cAAeF,CAAG,EACrC,OAAIiB,GACFA,EAAS,MAAM,EAEVjB,CACT,CAOO,SAASkB,GAAe5B,EAAUc,EAAU,CACjD,GAAIZ,GAAYF,CAAQ,EAAE,OAAS,EACjC,OAEF,IAAM6B,EAAiB9B,EAAcC,CAAQ,EAC7C,GAAI6B,EAAe,SAAW,EAAG,CAC/BR,EAAWrB,EAAU,GAAIc,CAAQ,EACjC,MACF,CACA,IAAMgB,EAAgBD,EAAe,CAAC,EAAE,MACxC7B,EAAS,UAAU,UAAY,GAC/BqB,EAAWrB,EAAU8B,EAAehB,CAAQ,CAC9C,CCpOO,SAASiB,GAAoBC,EAAY,CAC9C,OAAOA,EAAW,KAAMC,GACtBA,EAAM,MACH,MAAM,GAAG,EACT,KAAMC,GAAUA,EAAM,KAAK,EAAE,MAAM,KAAK,EAAE,OAAO,OAAO,EAAE,OAAS,CAAC,CACzE,CACF,CAOO,SAASC,GAAc,CAC5B,WAAAH,EACA,iBAAAI,EACA,aAAAC,EACA,iBAAAC,EACA,WAAAC,EACA,aAAAC,EACA,gBAAAC,EACA,iBAAAC,CACF,EAAG,CACD,MAAO,CACL,MAAOV,EAAW,IAAKC,GAAUA,EAAM,MAAM,KAAK,CAAC,EACnD,WAAYG,EAAiB,MAC7B,QAASC,EAAa,MACtB,SAAUM,EAAG,iCAAkCL,CAAgB,EAAE,IAC9DM,GAAQA,EAAI,KACf,EACA,WAAAL,EACA,QAASC,EAAa,QAAU,KAAO,MACvC,gBACEE,EAAiBL,EAAa,KAAK,GAAKI,EACpCA,EACA,IACR,CACF,CAOO,SAASI,GAAuBC,EAAkBC,EAAa,CAEpE,GADuB,EAAQ,UAAU,MACrB,CAClBD,EAAiB,UAAU,OAAO,WAAW,EAC7CA,EAAiB,UAAU,IAAI,SAAS,EACxCC,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,UAAU,OAAO,SAAS,EACtC,MACF,CACAD,EAAiB,UAAU,IAAI,WAAW,EAC1CA,EAAiB,UAAU,OAAO,SAAS,EAC3CC,EAAY,UAAU,OAAO,WAAW,EACxCA,EAAY,UAAU,IAAI,SAAS,CACrC,CAOA,SAASC,GAAoBD,EAAa,CACxC,OAAOA,EAAY,cAAc,sBAAsB,CACzD,CAOO,SAASE,GAAoBF,EAAaG,EAAY,KAAM,CACjE,IAAMC,EAAQH,GAAoBD,CAAW,EACvCK,EAAYC,GAAS,CACzB,GAAIF,EAAO,CACTA,EAAM,YAAcE,EACpB,MACF,CACAN,EAAY,YAAcM,CAC5B,EAEAD,EAASE,EAAkB,EAC3BP,EAAY,UAAU,IAAI,WAAW,EACrC,WAAW,IAAM,CACfK,EAASG,EAAuB,EAChCR,EAAY,UAAU,OAAO,WAAW,CAC1C,EAAGG,CAAS,CACd,CC9FO,SAASM,GAAcC,EAAQ,CAAE,SAAAC,CAAS,EAAI,CAAC,EAAG,CACvD,IAAMC,EAAS,IAAI,gBAAgBF,CAAM,EAEnCG,EAAaD,EAAO,IAAI,OAAO,EAC/BE,EACJD,IAAe,KACX,KACAA,EACG,MAAM,GAAG,EACT,IAAKE,GAAUA,EAAM,KAAK,CAAC,EAC3B,OAAQA,GAAUA,CAAK,EACvB,MAAM,EAAGJ,GAAY,MAAS,EAEjCK,EAAaJ,EAAO,IAAI,YAAY,EACpCK,EAAUL,EAAO,IAAI,MAAM,EAC3BM,EAAgBN,EAAO,IAAI,UAAU,EACrCO,EACJD,IAAkB,KACd,KACAA,EACG,MAAM,GAAG,EACT,IAAKH,GAAUA,EAAM,KAAK,CAAC,EAC3B,OAAQA,GAAUA,CAAK,EAC1BK,EAAaR,EAAO,IAAI,QAAQ,EAChCS,EAAUT,EAAO,IAAI,SAAS,EAC9BU,EAAkBV,EAAO,IAAI,eAAe,EAElD,MAAO,CACL,MAAAE,EACA,WAAAE,EACA,QAAAC,EACA,eAAAE,EACA,WAAAC,EACA,QAAAC,EACA,gBAAAC,CACF,CACF,CAOO,SAASC,GAAc,CAC5B,QAAAC,EACA,MAAAV,EACA,WAAAE,EACA,QAAAC,EACA,SAAAQ,EACA,WAAAL,EACA,QAAAC,EACA,gBAAAC,CACF,EAAG,CACD,IAAMV,EAAS,IAAI,gBAEbC,GAAcC,GAAS,CAAC,GAAG,IAAKY,GAASA,EAAK,KAAK,CAAC,EAAE,OAAO,OAAO,EACtEb,EAAW,OAAS,GACtBD,EAAO,IAAI,QAASC,EAAW,KAAK,IAAI,CAAC,EAGvCG,GACFJ,EAAO,IAAI,aAAcI,CAAU,EAGjCC,GACFL,EAAO,IAAI,OAAQK,CAAO,EAG5B,IAAMU,GAAiBF,GAAY,CAAC,GACjC,IAAKV,GAAUA,EAAM,KAAK,CAAC,EAC3B,OAAO,OAAO,EACbY,EAAc,OAAS,GACzBf,EAAO,IAAI,WAAYe,EAAc,KAAK,GAAG,CAAC,EAG5CP,GACFR,EAAO,IAAI,SAAUQ,CAAU,EAG7BC,GACFT,EAAO,IAAI,UAAWS,CAAO,EAG3BC,GACFV,EAAO,IAAI,gBAAiBU,CAAe,EAG7C,IAAMM,EAAM,IAAI,IAAIJ,GAAW,OAAO,SAAS,IAAI,EACnD,OAAAI,EAAI,OAAShB,EAAO,SAAS,EAC7BgB,EAAI,KAAO,gBACJA,EAAI,SAAS,CACtB,CCxFA,SAASC,GAAeC,EAAKC,EAAO,CAC9B,CAACA,GAASA,EAAM,SAAW,IAG/BD,EAAI,SAAS,eAAe,UAAY,GACxCC,EAAM,QAASC,GAAU,CACvBC,EAAWH,EAAI,SAAUE,EAAOF,EAAI,WAAW,CACjD,CAAC,EACDI,GAAkBJ,EAAI,QAAQ,EAChC,CAOA,SAASK,GAAqBL,EAAKM,EAAY,CACzCA,IAAe,OACjBN,EAAI,SAAS,iBAAiB,MAAQM,EAE1C,CAOA,SAASC,GAAeP,EAAKQ,EAAS,CAElCA,IAAY,MACZR,EAAI,SAAS,aAAa,cACxB,iBAAiB,IAAI,OAAOQ,CAAO,CAAC,IACtC,IAEAR,EAAI,SAAS,aAAa,MAAQQ,EAEtC,CAOA,SAASC,GAAkBT,EAAKU,EAAgB,CAC9C,GAAIA,IAAmB,KACrB,OAEF,IAAMC,EAAc,IAAI,IAAID,CAAc,EAC1CV,EAAI,SAAS,iBACV,iBAAiB,wBAAwB,EACzC,QAASY,GAAa,CACrBA,EAAS,QAAUD,EAAY,IAAIC,EAAS,KAAK,CACnD,CAAC,CACL,CAOA,SAASC,GAAqBb,EAAKc,EAAY,CACzCA,IAAe,OACjBd,EAAI,SAAS,gBAAgB,QAAU,GAC9Bc,IAAe,WACxBd,EAAI,SAAS,kBAAkB,QAAU,GAE7C,CAOA,SAASe,GAAiBf,EAAKgB,EAAS,CAClCA,IAAY,MACdhB,EAAI,SAAS,aAAa,QAAU,GAC3BgB,IAAY,OACrBhB,EAAI,SAAS,aAAa,QAAU,GAExC,CAOA,SAASiB,GAAqBjB,EAAKkB,EAAiB,CAC9CA,IACFlB,EAAI,MAAM,wBAA0BkB,EAExC,CAMO,SAASC,GAAYnB,EAAK,CAC/B,IAAMoB,EAAeC,GAAc,OAAO,SAAS,OAAQ,CACzD,SAAUrB,EAAI,SAAS,QACzB,CAAC,EAEDD,GAAeC,EAAKoB,EAAa,KAAK,EACtCf,GAAqBL,EAAKoB,EAAa,UAAU,EACjDb,GAAeP,EAAKoB,EAAa,OAAO,EACxCX,GAAkBT,EAAKoB,EAAa,cAAc,EAClDP,GAAqBb,EAAKoB,EAAa,UAAU,EACjDL,GAAiBf,EAAKoB,EAAa,OAAO,EAC1CH,GAAqBjB,EAAKoB,EAAa,eAAe,CACxD,CAMO,SAASE,GAAwBtB,EAAK,CAE3C,GADe,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAC9C,IAAI,MAAM,EACnB,OAEF,IAAMuB,EAAgBC,EAAyBxB,EAAI,SAAS,YAAY,EACxE,GAAIuB,EAAc,OAAS,EAAG,CAC5B,IAAME,EAAc,KAAK,MAAM,KAAK,OAAO,EAAIF,EAAc,MAAM,EACnEvB,EAAI,SAAS,aAAa,cAAgBuB,EAAcE,CAAW,EAAE,KACvE,CACF,CClIA,IAAMC,GAAY,CAChB,SACA,SACA,cACA,SACA,QACA,OACA,QACA,OACA,QACA,aACA,QACA,cACA,cACA,MACA,OACA,SACA,UACA,QACA,YACA,QACA,SACA,YACA,QACA,YACA,SACA,QACF,EAEOC,GAAQD,GC7Bf,IAAME,GAAa,CACjB,OACA,MACA,OACA,QACA,OACA,MACA,MACA,OACA,MACA,OACA,QACA,MACA,MACA,OACA,QACA,UACA,UACA,QACA,MACA,KACA,QACA,OACA,OACA,QACA,QACA,QACA,OACA,MACA,OACA,OACA,MACF,EAEOC,GAAQD,GC7BR,SAASE,EAAWC,EAAM,CAC/B,MAAO,GAAGA,EAAK,WAAa,EAAE,IAAIA,EAAK,UAAY,EAAE,EACvD,CAOO,SAASC,EAAWC,EAAQ,CAMjC,OALiBA,EACd,QAASC,GAAUA,EAAM,MAAM,MAAM,GAAG,CAAC,EACzC,IAAKC,GAAUA,EAAM,KAAK,CAAC,EAC3B,OAAQA,GAAUA,CAAK,EAEV,IAAKJ,GAAS,CAC5B,IAAMK,EAAQL,EAAK,MAAM,KAAK,EAAE,OAAQM,GAASA,CAAI,EAErD,GAAID,EAAM,OAAS,EAAG,CACpB,IAAME,EAAWF,EAAM,IAAI,EAC3B,MAAO,CAAE,UAAWA,EAAM,KAAK,GAAG,EAAG,SAAAE,EAAU,gBAAiB,EAAM,CACxE,CAEA,MAAO,CACL,UAAWF,EAAM,CAAC,EAClB,SAAU,GACV,gBAAiB,EACnB,CACF,CAAC,CACH,CAMA,SAASG,IAAqB,CAC5B,OAAOC,GAAW,KAAK,MAAM,KAAK,OAAO,EAAIA,GAAW,MAAM,CAAC,GAAK,MACtE,CAMO,SAASC,IAAoB,CAClC,OAAOC,GAAU,KAAK,MAAM,KAAK,OAAO,EAAIA,GAAU,MAAM,CAAC,GAAK,EACpE,CAOO,SAASC,EAAqBC,EAAY,CAC/C,IAAIC,EAAW,EACXC,EAAO,KACX,EAAG,CACD,IAAMC,EAAYR,GAAmB,EAC/BD,EAAWG,GAAkB,EACnCK,EAAO,CACL,UAAAC,EACA,SAAAT,EACA,gBAAiB,GACjB,eAAgB,MAClB,EACAO,GAAY,CACd,OAASD,GAAcd,EAAWgB,CAAI,IAAMF,GAAcC,EAAW,IAErE,OAAOC,CACT,CAQO,SAASE,EAAeC,EAAUC,EAAU,CAAC,EAAG,CACrD,GAAM,CAAE,mBAAAC,EAAqB,IAAMR,EAAqB,IAAI,CAAE,EAAIO,EAIlE,OAFED,GAAYA,EAAS,OAAS,EAAIA,EAAW,CAACE,EAAmB,CAAC,GAElD,IAAKC,GAAW,CAChC,IAAML,EAAY,OAAOK,EAAO,WAAa,EAAE,EAAE,KAAK,EAChDC,EAAmB,OAAOD,EAAO,UAAY,EAAE,EAAE,KAAK,EACtDE,EAAkB,EAAQF,EAAO,gBAEvC,OAAKC,EASE,CACL,UAAAN,EACA,SAAUM,EACV,gBAAAC,EACA,eAAgBA,EAAkB,OAAS,MAC7C,EAbS,CACL,UAAAP,EACA,SAAUN,GAAkB,EAC5B,gBAAAa,EACA,eAAgB,MAClB,CASJ,CAAC,CACH,CC9GO,IAAMC,GAAoB,CAC/B,CAAE,MAAO,YAAa,IAAK,WAAY,EACvC,CAAE,MAAO,QAAS,IAAK,OAAQ,EAC/B,CAAE,MAAO,YAAa,IAAK,WAAY,EACvC,CAAE,MAAO,cAAe,IAAK,SAAU,EACvC,CAAE,MAAO,cAAe,IAAK,SAAU,EACvC,CAAE,MAAO,cAAe,IAAK,SAAU,EACvC,CAAE,MAAO,cAAe,IAAK,SAAU,EACvC,CAAE,MAAO,cAAe,IAAK,SAAU,EACvC,CAAE,MAAO,cAAe,IAAK,SAAU,CACzC,EAOO,SAASC,GAAoBC,EAAO,CACzC,GAAI,CAACA,EACH,MAAO,GAET,IAAMC,EAAUD,EAAM,KAAK,EACrBE,EAAQD,EAAQ,YAAY,EAElC,GAAIC,IAAU,cACZ,MAAO,cAET,GAAIA,IAAU,YACZ,MAAO,YAET,GAAIA,IAAU,QACZ,MAAO,QAET,GAAIA,IAAU,YACZ,MAAO,YAET,GAAIA,EAAM,WAAW,OAAO,EAAG,CAC7B,IAAMC,EAAQF,EAAQ,MAAM,iBAAiB,EAC7C,OAAIE,EACK,SAASA,EAAM,CAAC,CAAC,GAEnB,WACT,CAEA,OAAOF,CACT,CCxBA,IAAqBG,EAArB,MAAqBC,CAAY,CAO/B,OAAO,WAAWC,EAAO,CACvB,OAAIA,GAAS,KAAa,GACnB,OAAOA,CAAK,EAChB,QAAQ,KAAM,OAAO,EACrB,QAAQ,KAAM,MAAM,EACpB,QAAQ,KAAM,MAAM,EACpB,QAAQ,KAAM,QAAQ,EACtB,QAAQ,KAAM,OAAO,CAC1B,CAOA,YAAYC,EAAa,CACvB,KAAK,YAAcA,CACrB,CAQA,OAAO,aAAaC,EAAK,CACvB,IAAMC,EAAM,KAAK,MAAM,KAAK,OAAO,EAAID,EAAI,MAAM,EACjD,OAAOA,EAAIC,CAAG,CAChB,CAWA,OAAO,WAAWC,EAAOJ,EAAO,CAC9B,GAAI,CAACA,EAAO,OAAOA,EAEnB,IAAMK,EAAQD,EAAM,KAAK,EAAE,OAAO,CAAC,EAEnC,OACEC,GACAA,EAAM,YAAY,IAAMA,GACxBA,EAAM,YAAY,IAAMA,EAGjBL,EAAM,OAAO,CAAC,EAAE,YAAY,EAAIA,EAAM,MAAM,CAAC,EAG/CA,CACT,CAQA,OAAO,oBAAoBI,EAAO,CAChC,OAAOE,GAA0BF,CAAK,CACxC,CAYA,OAAO,eAAeA,EAAO,CAG3B,IAAMG,EAFUH,EAAM,KAAK,EAEL,YAAY,EASlC,MARI,GAAAG,IAAU,aAAeA,IAAU,SAAWA,IAAU,aAIxDA,EAAM,WAAW,OAAO,GAIxBA,IAAU,cAKhB,CAmBA,OAAOC,EAAMC,EAAQC,EAAcC,EAAa,SAAU,CAExD,IAAIC,EAAW,KACXD,IAAe,WACjBC,EAAWb,EAAY,aAAaW,CAAY,GAIlD,IAAMG,EAAa,IAAM,CACvB,IAAMC,EAAW,CAAE,UAAW,GAAI,SAAU,GAAI,WAAY,EAAG,EAC/D,GAAI,CAACL,GAAUA,EAAO,SAAW,EAC/B,OAAOK,EAET,IAAMC,EAAShB,EAAY,aAAaU,CAAM,EAC9C,MAAO,CACL,UAAWM,EAAO,WAAa,GAC/B,SAAUA,EAAO,UAAY,GAC7B,eAAgBA,EAAO,gBAAkB,OACzC,WAAYA,EAAO,YAAc,GACjC,gBAAiB,EAAQA,EAAO,eAClC,CACF,EAGMC,EAAmB,CAACZ,EAAOW,IAAW,CAC1C,IAAME,EAAmBF,EAAO,SAC1BG,EACJd,IAAU,YACVA,IAAU,oBACVA,IAAU,sBACVA,IAAU,UACVA,IAAU,4BACNe,EAAiB,IAAM,CAC3B,GAAIJ,EAAO,WAAY,CACrB,IAAMK,EAAUH,GAAoBF,EAAO,UAC3C,OAAOK,EACH,GAAGL,EAAO,UAAU,IAAIK,CAAO,GAC/BL,EAAO,UACb,CACA,OACEA,EAAO,WAAaE,EAAmB,IAAIA,CAAgB,GAAK,GAEpE,EAEII,EAAc,GAClB,OAAIjB,IAAU,UACZiB,EAAcN,EAAO,UACZX,IAAU,WACnBiB,EAAcJ,EAEdb,IAAU,oBACVA,IAAU,qBAEViB,EACEN,EAAO,WAAaE,EAAmB,IAAIA,CAAgB,GAAK,IACzDb,IAAU,UAAYA,IAAU,4BACzCiB,EAAcF,EAAe,EAE7BE,EAAcjB,EAGT,CACL,YAAAiB,EACA,iBAAAJ,EACA,kBAAAC,CACF,CACF,EAEII,EAAS,GACTC,EAAmB,GAGvB,QAASC,EAAI,EAAGA,EAAIhB,EAAK,QAAU,CACjC,IAAMiB,EAAKjB,EAAK,OAAOgB,CAAC,EAExB,GAAIC,IAAO,IAAK,CACd,IAAMC,EAAMlB,EAAK,QAAQ,IAAKgB,EAAI,CAAC,EAEnC,GAAIE,IAAQ,GAAI,CAEd,IAAMC,EADQnB,EAAK,UAAUgB,EAAI,EAAGE,CAAG,EACjB,KAAK,EACvBL,EAAc,GAGlB,GAFgBtB,EAAY,eAAe4B,CAAO,EAEnC,CACb,IAAMC,EACJjB,IAAe,OACXZ,EAAY,aAAaW,CAAY,EACrCE,EACA,CAAE,UAAAiB,CAAU,EAAIhB,EAAW,EAE3BN,EAAQoB,EAAQ,YAAY,EAC9BpB,IAAU,cACZc,EAAcO,EAAW,YAChBrB,IAAU,YACnBc,EAAcO,EAAW,QAAQ,YAAaC,CAAS,EAC9CtB,IAAU,QACnBc,EAAcO,EAAW,QAAQ,QAASC,CAAS,EAC1CtB,IAAU,YACnBc,EAAcO,EAAW,QAAQ,YAAaC,CAAS,EAC9CtB,EAAM,WAAW,OAAO,EACjCc,EAAcO,EAAW,QAAQrB,EAAOsB,CAAS,EAEjDR,EAAcO,EAAW,QAAQ,YAAaC,CAAS,EAGzDR,EAActB,EAAY,WAAW4B,EAASN,CAAW,EACzD,IAAMS,EAAkB/B,EAAY,WAAWsB,CAAW,EACpDU,EAAmBhC,EAAY,WACnC6B,EAAW,WACb,EACMI,EAAgBjC,EAAY,WAChCA,EAAY,oBAAoB4B,CAAO,CACzC,EAGAL,GAAU,uBAAuBS,CAAgB,wBAAwBC,CAAa,0GAA0GF,CAAe,SACjN,KAAO,CAEL,GAAM,CACJ,UAAAD,EACA,SAAAI,EACA,eAAAC,EACA,WAAAC,EACA,gBAAAC,CACF,EAAIvB,EAAW,EACT,CACJ,YAAawB,EACb,iBAAApB,EACA,kBAAAC,CACF,EAAIF,EAAiBW,EAAS,CAC5B,UAAAE,EACA,SAAAI,EACA,eAAAC,EACA,WAAAC,CACF,CAAC,EACDd,EAAcgB,EAEdhB,EAActB,EAAY,WAAW4B,EAASN,CAAW,EACzD,IAAMS,EAAkB/B,EAAY,WAAWsB,CAAW,EAGxDH,GACAD,GACAiB,IAAmB,QACnBb,EAAY,SAASJ,CAAgB,IAErCM,EAAmB,IAGrB,IAAMe,EACJF,GACClB,GACCgB,IAAmB,QACnBjB,GACAI,EAAY,SAASJ,CAAgB,EACnC,OACA,OACAsB,EAAiBxC,EAAY,WAAWuC,CAAU,EACxDhB,GAAU,4CAA4CiB,CAAc,0GAA0GT,CAAe,SAC/L,CAEAN,EAAIE,EAAM,EACV,QACF,CACF,CAGAJ,GAAUvB,EAAY,WAAW0B,CAAE,EACnCD,GAAK,CACP,CAEA,MAAO,CAAE,KAAMF,EAAQ,WAAYV,EAAU,iBAAAW,CAAiB,CAChE,CACF,ECtTO,IAAMiB,GAA8B,CACzC,4FACA,gDACA,oEACA,sCACA,qCACA,iEACA,4CACA,wEACA,8FACF,ECTA,IAAMC,GAAO,IAAIC,EAAY,CAAC,CAAC,EAO/B,SAASC,GAAsBC,EAAO,CACpC,IAAMC,GAAmBD,GAAS,CAAC,GAAG,OACnCE,GAAW,OAAOA,EAAO,WAAa,EAAE,EAAE,KAAK,EAAE,OAAS,CAC7D,EAEA,GAAID,EAAgB,OAAS,EAAG,CAC9B,IAAME,EACJF,EAAgB,KAAK,MAAM,KAAK,OAAO,EAAIA,EAAgB,MAAM,CAAC,EACpE,MAAO,CACL,KAAME,EAAO,UACb,OAAQ,CACN,UAAWA,EAAO,UAClB,SAAUA,EAAO,UAAY,GAC7B,eAAgBA,EAAO,gBAAkB,OACzC,gBAAiB,EAAQA,EAAO,eAClC,EACA,gBAAiB,EAAQA,EAAO,eAClC,CACF,CAEA,IAAMC,EAAWC,EAAqB,IAAI,EAC1C,MAAO,CAAE,KAAMD,EAAS,UAAW,OAAQA,EAAU,gBAAiB,EAAK,CAC7E,CASA,SAASE,GAAaC,EAAIC,EAAWC,EAAS,CAC5C,IAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,UAAY,iBAElB,IAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,KAAO,QACbA,EAAM,KAAO,kBACbA,EAAM,GAAKJ,EACXI,EAAM,QAAUF,EAEhB,IAAMG,EAAO,SAAS,cAAc,MAAM,EAC1C,OAAAA,EAAK,YAAcJ,EAEnBE,EAAM,YAAYC,CAAK,EACvBD,EAAM,YAAYE,CAAI,EAEf,CAAE,MAAAF,EAAO,MAAAC,CAAM,CACxB,CAOA,SAASE,GAAUC,EAAWC,EAAa,CACzC,IAAMC,EAAUD,IAAgBD,EAAU,WAC1CA,EAAU,SAAS,UAAU,OAAO,YAAaE,CAAO,EACxDF,EAAU,WAAW,UAAU,OAAO,YAAa,CAACE,CAAO,EAE3DF,EAAU,aAAa,QAAQ,CAAC,CAAE,MAAAH,EAAO,MAAAM,EAAO,MAAAP,CAAM,IAAM,CAC1D,IAAMQ,EAAWP,IAAUI,EAC3BL,EAAM,UAAU,OAAO,YAAaQ,CAAQ,EAC5CD,EAAM,UAAU,OAAO,YAAa,CAACC,CAAQ,CAC/C,CAAC,EAEGJ,EAAU,aACZA,EAAU,YAAYC,EAAY,EAAE,CAExC,CAOA,SAASI,GAAgBL,EAAWM,EAAO,CACzC,IAAMC,EAASD,EAAM,OAChBC,GAGLR,GAAUC,EAAWO,CAAM,CAC7B,CAOO,SAASC,GAAqB,CACnC,YAAAC,EACA,MAAAvB,EACA,aAAAwB,EACA,YAAAC,CACF,EAAG,CACD,IAAMC,EAAiB,SAAS,cAAc,KAAK,EAGnD,GAFAA,EAAe,UAAY,oBAEvB,CAACH,GAAeA,EAAY,SAAW,EACzC,OAAOG,EAGT,IAAMC,EAAc5B,GAAsBC,CAAK,EACzC4B,EAAkBD,EAAY,KAE9BE,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,kBAEjB,IAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,qBAEpB,GAAM,CAAE,MAAOC,EAAU,MAAOC,CAAW,EAAI1B,GAC7C,uBACA,UACA,EACF,EAEAwB,EAAQ,YAAYC,CAAQ,EAC5BF,EAAK,YAAYC,CAAO,EAExB,IAAMG,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,UAAY,sBACvBA,EAAW,aAAa,kBAAmBD,EAAW,EAAE,EAExD,IAAME,EAAe,CAAC,EAEhBC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,wBAEtB,IAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,UAAY,mBAElB,IAAMC,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAU,SAAS,cAAc,IAAI,EACrCC,EAAS,SAAS,cAAc,IAAI,EAC1CA,EAAO,MAAQ,MACfA,EAAO,YAAc,OACrBD,EAAQ,YAAYC,CAAM,EAC1BhB,EAAY,QAASiB,GAAQ,CAC3B,IAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,MAAQ,MACXA,EAAG,YAAcD,EAAI,YACrBF,EAAQ,YAAYG,CAAE,CACxB,CAAC,EACDJ,EAAM,YAAYC,CAAO,EACzBF,EAAM,YAAYC,CAAK,EAEvB,IAAMK,EAAQ,SAAS,cAAc,OAAO,EAC5CC,GAAkB,QAASC,GAAU,CACnC,IAAMC,EAAM,SAAS,cAAc,IAAI,EACjCJ,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,MAAQ,MACXA,EAAG,YAAcG,EAAM,MACvBC,EAAI,YAAYJ,CAAE,EAElBlB,EAAY,QAASiB,GAAQ,CAC3B,IAAMM,EAAK,SAAS,cAAc,IAAI,EAChCC,EAAQP,EAAI,QAAQI,EAAM,IAAKhB,CAAe,EACpDkB,EAAG,YAAcC,GAAS,SAC1BF,EAAI,YAAYC,CAAE,CACpB,CAAC,EAEDJ,EAAM,YAAYG,CAAG,CACvB,CAAC,EACDT,EAAM,YAAYM,CAAK,EACvBP,EAAU,YAAYC,CAAK,EAC3BH,EAAW,YAAYE,CAAS,EAEhCZ,EAAY,QAAQ,CAACiB,EAAKQ,IAAU,CAClC,GAAM,CAAE,MAAAtC,EAAO,MAAAC,CAAM,EAAIL,GACvB,yBAAyB0C,CAAK,GAC9BR,EAAI,YACJ,EACF,EACAV,EAAQ,YAAYpB,CAAK,EAEzB,IAAMO,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,gCAClBA,EAAM,aAAa,kBAAmBN,EAAM,EAAE,EAE9C,IAAMsC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,yBAEjBC,GAA4B,QAASC,IAAa,CAChD,IAAMC,GAAWvD,GAAK,OACpBsD,GACA,CACE,CACE,UAAWxB,EAAY,OAAO,UAC9B,SAAUA,EAAY,OAAO,SAC7B,eAAgBA,EAAY,OAAO,eACnC,gBAAiBA,EAAY,eAC/B,CACF,EACA,CAACa,CAAG,EACJ,QACF,EACMa,GAAI,SAAS,cAAc,GAAG,EACpCA,GAAE,UAAYD,GAAS,KACvBH,EAAK,YAAYI,EAAC,CACpB,CAAC,EAEDpC,EAAM,YAAYgC,CAAI,EACtBf,EAAa,KAAK,CAAE,MAAAvB,EAAO,MAAAM,EAAO,MAAAP,CAAM,CAAC,CAC3C,CAAC,EAED,IAAMI,EAAY,CAChB,WAAAkB,EACA,SAAAD,EACA,WAAAE,EACA,aAAAC,EACA,YAAAT,CACF,EAEM6B,EAAuBnC,GAAgB,KAAK,KAAML,CAAS,EACjEkB,EAAW,iBAAiB,SAAUsB,CAAoB,EAC1DpB,EAAa,QAAQ,CAAC,CAAE,MAAAvB,CAAM,IAAM,CAClCA,EAAM,iBAAiB,SAAU2C,CAAoB,CACvD,CAAC,EAGD,IAAMC,EADU,CAACvB,EAAY,GAAGE,EAAa,IAAI,CAAC,CAAE,MAAAvB,CAAM,IAAMA,CAAK,CAAC,EAE5D,KAAMA,GAAUA,EAAM,KAAOa,CAAY,GAAKQ,EACxD,OAAAuB,EAAa,QAAU,GACvB1C,GAAUC,EAAWyC,CAAY,EAEjC1B,EAAK,YAAYI,CAAU,EAC3BC,EAAa,QAAQ,CAAC,CAAE,MAAAjB,CAAM,IAAMY,EAAK,YAAYZ,CAAK,CAAC,EAC3DS,EAAe,YAAYG,CAAI,EACxBH,CACT,CC3OO,SAAS8B,GAAoB,CAClC,MAAAC,EACA,aAAAC,EACA,YAAAC,EACA,oBAAAC,EAAsB,EACxB,EAAG,CACD,IAAMC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,UAAY,kBAEvB,IAAMC,EAAU,SAAS,cAAc,IAAI,EAI3C,GAHAA,EAAQ,YAAcL,EACtBI,EAAW,YAAYC,CAAO,EAE1B,CAACF,EACH,MAAO,CAAE,WAAAC,EAAY,QAAAC,EAAS,aAAc,IAAK,EAGnD,IAAMC,EAAe,SAAS,cAAc,QAAQ,EACpDA,EAAa,KAAO,SACpBA,EAAa,UAAY,6BACpBL,GACHK,EAAa,UAAU,IAAI,WAAW,EAExC,IAAMC,EAAcL,EAAcM,GAAoBC,EACtD,OAAAH,EAAa,aAAa,aAAcC,CAAW,EACnDD,EAAa,aAAa,QAASC,CAAW,EAC9CD,EAAa,UAAY,iBACvBJ,EAAc,eAAiB,gBACjC,iCACAE,EAAW,YAAYE,CAAY,EAE5B,CAAE,WAAAF,EAAY,QAAAC,EAAS,aAAAC,CAAa,CAC7C,CC5BA,IAAMI,GAAO,IAAIC,EAAY,CAAC,CAAC,EAOxB,SAASC,GAAc,CAC5B,iBAAAC,EACA,MAAAC,EACA,YAAAC,EACA,WAAAC,EACA,QAAAC,EACA,WAAAC,EACA,aAAAC,EACA,YAAAC,EACA,gBAAAC,EACA,sBAAAC,CACF,EAAG,CACD,IAAMC,EAAgBC,GAAmBP,CAAO,EAC1CQ,EAAOF,GAAe,MAAQ,GAC9BG,EAAmBC,EAAiBV,CAAO,EAC3CW,EACJd,GAASA,EAAM,OAAS,EAAIA,EAAQ,CAACe,EAAqB,IAAI,CAAC,EAE3DC,EACJF,EAAU,OAAS,GAAKA,EAAU,MAAOG,GAAWA,EAAO,eAAe,EACtE,OACA,GAEAC,EAAiBN,EACnBE,EACAV,IAAe,SACb,CAACU,EAAU,KAAK,MAAM,KAAK,OAAO,EAAIA,EAAU,MAAM,CAAC,CAAC,EACxDA,EACAK,EAAuBD,EAAe,IAAKD,IAAY,CAC3D,UAAWA,EAAO,UAClB,SAAUA,EAAO,SACjB,eAAgBA,EAAO,gBAAkB,OACzC,WAAAf,EACA,gBAAiB,EAAQe,EAAO,eAClC,EAAE,EACFlB,EAAiB,UAAY,GAC7BA,EAAiB,QAAQ,kBAAoBiB,EAC7C,GAAM,CAAE,WAAAI,EAAY,QAAAC,EAAS,aAAAC,CAAa,EAAIC,GAAoB,CAChE,MACEd,GAAiBA,EAAc,MAC3BA,EAAc,MACde,GACN,aAAAnB,EACA,YAAAC,EACA,oBAAqB,CAACM,CACxB,CAAC,EAID,GAFAb,EAAiB,YAAYqB,CAAU,EAEnCR,EAAkB,CACpB,IAAMa,EAAOC,GAAqB,CAChC,YAAAzB,EACA,MAAOiB,EACP,aAAcX,EACd,YAAaC,CACf,CAAC,EACD,OAAAT,EAAiB,YAAY0B,CAAI,EAC1B,CACL,WAAY,KACZ,aAAcP,EAAe,CAAC,EAC9B,aAAc,IAChB,CACF,CAEA,IAAMS,EAAY,SAAS,cAAc,GAAG,EAEtCC,EAAShC,GAAK,OAClBe,EACAQ,EACAlB,EACAG,CACF,EAEMyB,EACJzB,IAAe,UAAYwB,EAAO,WAC9B,WAAMA,EAAO,WAAW,WAAW,GACnC,GAON,GANAP,EAAQ,aAAeQ,EAEvBF,EAAU,UAAYC,EAAO,KAC7B7B,EAAiB,YAAY4B,CAAS,EAGlCC,EAAO,iBAAkB,CAC3B,IAAME,EAAa,SAAS,cAAc,GAAG,EAC7CA,EAAW,UAAY,qBACvB,IAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,IAAM,mBACXA,EAAK,IAAM,GACXA,EAAK,aAAa,cAAe,MAAM,EACvCA,EAAK,UAAY,2BACjBD,EAAW,YAAYC,CAAI,EAE3B,IAAMC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,2BACrBA,EAAS,YAAcC,GACvBH,EAAW,YAAYE,CAAQ,EAC/BjC,EAAiB,YAAY+B,CAAU,CACzC,CAEA,MAAO,CACL,WAAYF,EAAO,YAAc,KACjC,aAAcV,EAAe,CAAC,EAC9B,aAAAI,CACF,CACF,CC7GO,SAASY,EAAcC,EAAU,CACtC,OAAOA,EAAS,kBAAkB,QAAU,SAAW,MACzD,CAOO,SAASC,GAAYC,EAAe,CACzC,OAAOA,EACHA,EAAc,SAAS,EACvB,CAAE,UAAW,GAAO,SAAU,EAAM,CAC1C,CAMO,SAASC,EAAuBC,EAAe,CAChDA,GACFA,EAAc,OAAO,CAEzB,CAOO,SAASC,GAAmBC,EAAeC,EAAkB,KAAM,CACrD,CAACD,EAAeC,CAAe,EAAE,OAAO,OAAO,EACvD,QAASC,GAAc,CAChCA,EACG,iBAAiB,iBAAiB,EAClC,QAASC,GAAWA,EAAO,OAAO,CAAC,CACxC,CAAC,CACH,CAMO,SAASC,GAAmB,CAAE,cAAAR,EAAe,gBAAAS,CAAgB,EAAG,CACrE,IAAMF,EAASE,EAAgB,EAC/B,GAAI,CAACF,EACH,OAEF,GAAM,CAAE,UAAAG,EAAW,SAAAC,CAAS,EAAIZ,GAAYC,CAAa,EACzDO,EAAO,UAAU,OAAO,YAAa,CAACG,CAAS,EAC/C,IAAME,EAAQD,EAAWE,GAAoBC,EAC7CP,EAAO,aAAa,aAAcK,CAAK,EACvCL,EAAO,aAAa,QAASK,CAAK,EAClC,IAAMG,EAAOC,EAAE,MAAOT,CAAM,EACxBQ,IACFA,EAAK,IAAMJ,EAAW,mBAAqB,qBAE/C,CAMO,SAASM,GAAe,CAAE,cAAAjB,EAAe,cAAAI,CAAc,EAAG,CAC/D,GAAI,CAACJ,EACH,OAEF,IAAMkB,EAAYF,EAAE,IAAKZ,CAAa,EAChCe,EAAOD,EAAYA,EAAU,YAAY,KAAK,EAAI,GACxDlB,EAAc,OAAOmB,CAAI,CAC3B,CAOO,SAASC,EAAiBC,EAAKC,EAAc,CAC7CA,IAGLA,EAAa,iBAAiB,QAAS,IAAM,CAC3CL,GAAe,CACb,cAAeI,EAAI,cACnB,cAAeA,EAAI,SAAS,aAC9B,CAAC,CACH,CAAC,EACDb,GAAmB,CACjB,cAAea,EAAI,cACnB,gBAAiBA,EAAI,eACvB,CAAC,EACDpB,EAAuBoB,EAAI,aAAa,EAC1C,CAMO,SAASE,EAAeF,EAAK,CAClCA,EAAI,aAAa,MAAM,EACnBA,EAAI,eACNA,EAAI,cAAc,KAAK,EAEzBlB,GAAmBkB,EAAI,SAAS,cAAeA,EAAI,SAAS,eAAe,CAC7E,CAEA,SAASG,GAA0BC,EAAOC,EAAO,CAC/CD,EAAM,wBAA0BC,CAClC,CAQO,SAASC,EAAaN,EAAKO,EAAS,CAEzC,IAAMC,EADWD,EAAQ,WAAa,GAElC7B,GAAYsB,EAAI,aAAa,EAC7B,CAAE,UAAW,GAAO,SAAU,EAAM,EAExC,OAAOS,GAAc,CACnB,iBAAkBT,EAAI,SAAS,cAC/B,MAAOO,EAAQ,MACf,YAAaA,EAAQ,YACrB,WAAYP,EAAI,SAAS,iBAAiB,MAC1C,QAASA,EAAI,SAAS,aAAa,MACnC,WAAYO,EAAQ,WACpB,aAAcC,EAAS,UACvB,YAAaA,EAAS,SACtB,gBAAiBD,EAAQ,sBACrBP,EAAI,MAAM,wBACV,KACJ,sBAAuBO,EAAQ,sBAC3BJ,GAA0B,KAAK,KAAMH,EAAI,KAAK,EAC9C,IACN,CAAC,CACH,CAQO,SAASU,EAAsBN,EAAOO,EAAYC,EAAY,CAC/DA,IAAe,WAGfD,GAAcA,EAAW,aAC3BP,EAAM,uBAAyBO,EAAW,WAAW,aAEnDA,GAAcA,EAAW,eAC3BP,EAAM,kBAAoBS,EAAWF,EAAW,YAAY,GAEhE,CAMO,SAASG,EAA2Bd,EAAK,CAC9C,GAAIe,EAAiBf,EAAI,SAAS,aAAa,KAAK,EAAG,CACrDA,EAAI,SAAS,oBAAoB,UAAU,IAAI,WAAW,EAC1DA,EAAI,SAAS,kBAAkB,QAAU,GACzCpB,EAAuBoB,EAAI,aAAa,EACxC,MACF,CASA,IAAMgB,EAPiB,IAAI,IACzB,MAAM,KACJhB,EAAI,SAAS,iBAAiB,iBAC5B,gCACF,CACF,EAAE,IAAKiB,GAAaA,EAAS,KAAK,CACpC,EACqC,KAC/BC,EAAcC,GAAsBnB,EAAI,QAAQ,EAEtD,GAAIgB,EAAgB,GAAKE,EAAc,EAAG,CACxClB,EAAI,SAAS,oBAAoB,UAAU,OAAO,WAAW,EAC7DpB,EAAuBoB,EAAI,aAAa,EACxC,MACF,CAEAA,EAAI,SAAS,oBAAoB,UAAU,IAAI,WAAW,EAC1DA,EAAI,SAAS,kBAAkB,QAAU,GACzCpB,EAAuBoB,EAAI,aAAa,CAC1C,CCrMO,SAASoB,GAAuBC,EAAO,CAC5C,GAAIA,EAAM,YACR,OAEF,IAAMC,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EACnCA,EAAI,SAGTA,EAAI,OAAS,GACb,OAAO,QAAQ,aAAa,CAAC,EAAG,GAAIA,EAAI,SAAS,CAAC,EACpD,CCUA,SAASC,GAAuBC,EAAK,CACnCC,EAAaD,EAAK,CAChB,MAAOE,EAAeC,EAAWC,EAAcJ,EAAI,QAAQ,CAAC,CAAC,EAC7D,YAAaK,EAAuBL,EAAI,SAAS,iBAAkB,CACjE,iBAAkB,EACpB,CAAC,EACD,WAAYM,EAAcN,EAAI,QAAQ,EACtC,sBAAuB,GACvB,SAAU,EACZ,CAAC,CACH,CAMA,SAASO,GAAoBP,EAAK,CAGhC,GAFAQ,EAAeR,CAAG,EAEdS,EAAiBT,EAAI,SAAS,aAAa,KAAK,EAAG,CACrDD,GAAuBC,CAAG,EAC1B,MACF,CAEA,GAAIU,EAAiBV,EAAI,QAAQ,EAC/B,OAGF,IAAMW,EAAcC,EAAqBZ,EAAI,MAAM,iBAAiB,EAC9Da,EAAaZ,EAAaD,EAAK,CACnC,MAAO,CAACW,CAAW,EACnB,YAAaN,EAAuBL,EAAI,SAAS,gBAAgB,EACjE,WAAYM,EAAcN,EAAI,QAAQ,CACxC,CAAC,EACDc,EAAsBd,EAAI,MAAOa,EAAYP,EAAcN,EAAI,QAAQ,CAAC,EACxEe,EAAiBf,EAAKa,EAAW,YAAY,CAC/C,CAMO,SAASG,EAAahB,EAAK,CAChCQ,EAAeR,CAAG,EAClBiB,GAAuBjB,EAAI,KAAK,EAEhC,IAAMkB,EAAWR,EAAiBV,EAAI,QAAQ,EAG9C,GAFAmB,EAA2BnB,CAAG,EAE1BS,EAAiBT,EAAI,SAAS,aAAa,KAAK,EAAG,CACrDD,GAAuBC,CAAG,EAC1B,MACF,CAEA,GAAI,CAACkB,EAAU,CACbX,GAAoBP,CAAG,EACvB,MACF,CAEA,IAAMoB,EAAcjB,EAAWC,EAAcJ,EAAI,QAAQ,CAAC,EAC1D,GAAIoB,EAAY,SAAW,EAAG,CAC5B,MAAMC,EAAc,EACpB,MACF,CAEA,IAAMC,EAAkBpB,EAAekB,EAAa,CAClD,mBAAoB,IAAMR,EAAqBZ,EAAI,MAAM,iBAAiB,CAC5E,CAAC,EACKa,EAAaZ,EAAaD,EAAK,CACnC,MAAOsB,EACP,YAAajB,EAAuBL,EAAI,SAAS,gBAAgB,EACjE,WAAYM,EAAcN,EAAI,QAAQ,CACxC,CAAC,EACDc,EAAsBd,EAAI,MAAOa,EAAYP,EAAcN,EAAI,QAAQ,CAAC,EACxEe,EAAiBf,EAAKa,EAAW,YAAY,CAC/C,CAMO,SAASU,GAAwBvB,EAAK,CAC3CO,GAAoBP,CAAG,CACzB,CCpGO,SAASwB,GAAgBC,EAAOC,EAASC,EAAQ,CACtD,GAAIF,EAAM,QAAU,EAClB,OAAOA,EAAM,CAAC,EAGhB,IAAIG,EAAYH,EAAM,KAAK,MAAM,KAAK,OAAO,EAAIA,EAAM,MAAM,CAAC,EAC9D,GAAI,CAACC,EACH,OAAOE,EAGT,IAAIC,EAAW,EACf,KAAOF,EAAOC,CAAS,IAAMF,GAAWG,EAAW,IACjDD,EAAYH,EAAM,KAAK,MAAM,KAAK,OAAO,EAAIA,EAAM,MAAM,CAAC,EAC1DI,GAAY,EAGd,OAAOD,CACT,CCJO,SAASE,GAAUC,EAAK,CAM7B,GALAC,EAAeD,CAAG,EAClBE,EAA2BF,CAAG,EAI1B,CADF,CAACA,EAAI,SAAS,oBAAoB,UAAU,SAAS,WAAW,GACxC,CAACA,EAAI,SAAS,kBAAkB,QAAS,CACjEG,EAAaH,CAAG,EAChB,MACF,CAEA,IAAMI,EAAaC,EAAcL,EAAI,QAAQ,EACvCM,EAAWC,EAAiBP,EAAI,QAAQ,EACxCQ,EAAmBC,EAAuBT,EAAI,SAAS,gBAAgB,EACvEU,EACJF,EAAiB,OAAS,GAAKR,EAAI,MAAM,uBAEvCW,EAAQ,CAAC,EACTL,EACFK,EAAQC,EAAeC,EAAWT,CAAU,CAAC,EAE7CO,EAAQ,CAACG,EAAqBd,EAAI,MAAM,iBAAiB,CAAC,EAG5D,IAAIe,EAAcP,EACdE,EAMFK,EAAc,CALSC,GACrBR,EACAR,EAAI,MAAM,uBACTiB,GAAQA,EAAI,WACf,CAC6B,EACpBN,EAAM,OAAS,GAAKX,EAAI,MAAM,kBAMvCW,EAAQ,CALSK,GACfL,EACAX,EAAI,MAAM,kBACVkB,CACF,CACiB,EACPZ,IACVK,EAAQ,CAACG,EAAqBd,EAAI,MAAM,iBAAiB,CAAC,GAG5D,IAAMmB,EAAaC,EAAapB,EAAK,CACnC,MAAAW,EACA,YAAAI,EACA,WAAY,QACd,CAAC,EACDM,EAAsBrB,EAAI,MAAOmB,EAAY,QAAQ,EACrDG,EAAiBtB,EAAKmB,EAAW,YAAY,CAC/C,CCjEO,SAASI,GAAeC,EAAK,CAClC,IAAMC,EAAgBC,EAAyBF,EAAI,SAAS,YAAY,EAClEG,EAAcF,EAAc,OAClC,GAAIE,IAAgB,EAClB,OAEF,GAAIA,IAAgB,EAAG,CACrBH,EAAI,SAAS,aAAa,MAAQC,EAAc,CAAC,EAAE,MACnD,MACF,CACA,IAAMG,EAAeJ,EAAI,SAAS,aAAa,MAC3CK,EAAeJ,EAAc,KAAK,MAAM,KAAK,OAAO,EAAIE,CAAW,CAAC,EACxE,GAAIF,EAAc,KAAMK,GAAWA,EAAO,QAAUF,CAAY,EAC9D,KAAOC,EAAa,QAAUD,GAC5BC,EAAeJ,EAAc,KAAK,MAAM,KAAK,OAAO,EAAIE,CAAW,CAAC,EAGxEH,EAAI,SAAS,aAAa,MAAQK,EAAa,MAC/CE,EAAaP,CAAG,CAClB,CCPA,SAASQ,GAAkBC,EAAK,CAC9B,MAAO,CACL,SAAUC,GAAsBD,CAAG,EACnC,iBAAkBE,GAAoBC,EAAcH,EAAI,QAAQ,CAAC,CACnE,CACF,CAMA,SAASI,GAAkBC,EAAkB,CACvCA,GACF,MAAMC,EAAsB,CAEhC,CAMA,SAASC,GAAcC,EAAU,CAC/B,OAAO,QAAQ,aAAa,CAAC,EAAG,GAAIA,CAAQ,CAC9C,CAOO,SAASP,GAAsBD,EAAK,CACzC,IAAMS,EAAaC,GAAc,CAC/B,WAAYP,EAAcH,EAAI,QAAQ,EACtC,iBAAkBA,EAAI,SAAS,iBAC/B,aAAcA,EAAI,SAAS,aAC3B,iBAAkBA,EAAI,SAAS,iBAC/B,WAAYW,EAAcX,EAAI,QAAQ,EACtC,aAAcA,EAAI,SAAS,aAC3B,gBAAiBA,EAAI,MAAM,wBAC3B,iBAAAY,CACF,CAAC,EACD,OAAOC,GAAc,CACnB,QAAS,OAAO,SAAS,KACzB,GAAGJ,CACL,CAAC,CACH,CAOA,eAAsBK,GAAed,EAAK,CACxC,GAAI,CACF,GAAM,CAAE,SAAAQ,EAAU,iBAAAH,CAAiB,EAAIN,GAAkBC,CAAG,EAC5DI,GAAkBC,CAAgB,EAClCE,GAAcC,CAAQ,EACtB,MAAM,UAAU,MAAM,CACpB,MAAO,SAAS,MAChB,IAAKA,CACP,CAAC,CACH,OAASO,EAAO,CAEhB,CACF,CAOA,eAAsBC,GAAchB,EAAK,CACvC,GAAM,CAAE,SAAAQ,EAAU,iBAAAH,CAAiB,EAAIN,GAAkBC,CAAG,EAC5D,GAAI,CACFI,GAAkBC,CAAgB,EAClCE,GAAcC,CAAQ,EACtB,MAAM,UAAU,UAAU,UAAUA,CAAQ,EAC5CS,GAAoBjB,EAAI,SAAS,WAAW,CAC9C,MAAgB,CACdI,GAAkBC,CAAgB,EAClCE,GAAcC,CAAQ,EACtB,OAAO,OAAOU,GAAyBV,CAAQ,CACjD,CACF,CChGO,SAASW,GAAkBC,EAAK,CACrCA,EAAI,SAAS,cAAc,UAAU,OACnC,WACA,CAACA,EAAI,SAAS,aAAa,OAC7B,EACAC,GAAuBD,EAAI,KAAK,CAClC,CCoBA,SAASE,GAAgBC,EAAeC,EAAiB,CACvD,OACEC,EAAE,kBAAmBF,CAAa,IACjCC,EAAkBC,EAAE,kBAAmBD,CAAe,EAAI,KAE/D,CAOA,SAASE,GAAcH,EAAe,CACpC,OAAOE,EAAE,mBAAoBF,CAAa,CAC5C,CAMA,SAASI,IAAe,CACtB,OAAOF,EAAE,aAAa,CACxB,CAMA,SAASG,IAAmB,CAC1B,OAAOH,EAAE,kBAAkB,CAC7B,CAMA,SAASI,GAAoBC,EAAK,CAChCC,EAA2BD,CAAG,EAC9BE,EAAaF,CAAG,CAClB,CAMA,SAASG,GAAsBH,EAAK,CAClCI,GAAmB,CACjB,cAAeJ,EAAI,cACnB,gBAAiBA,EAAI,eACvB,CAAC,EACDK,EAAuBL,EAAI,aAAa,CAC1C,CAMA,SAASM,GAAgBN,EAAK,CAC5BE,EAAaF,CAAG,CAClB,CAMA,SAASO,GAAWP,EAAK,CACvBA,EAAI,SAAS,iBAAiB,iBAC5B,QACAQ,GAAe,KAAK,KAAMR,CAAG,CAC/B,EACAA,EAAI,SAAS,iBAAiB,iBAC5B,QACAS,GAAe,KAAK,KAAMT,CAAG,CAC/B,EACAA,EAAI,SAAS,YAAY,iBACvB,QACAU,GAAc,KAAK,KAAMV,CAAG,CAC9B,EACAA,EAAI,SAAS,aAAa,iBACxB,SACAW,GAAkB,KAAK,KAAMX,CAAG,CAClC,EAEAA,EAAI,SAAS,iBAAiB,iBAC5B,SACAE,EAAa,KAAK,KAAMF,CAAG,CAC7B,EACAA,EAAI,SAAS,aAAa,iBACxB,SACAE,EAAa,KAAK,KAAMF,CAAG,CAC7B,EACAA,EAAI,SAAS,iBAAiB,iBAC5B,SACAD,GAAoB,KAAK,KAAMC,CAAG,CACpC,EACAA,EAAI,SAAS,kBAAkB,iBAC7B,SACAE,EAAa,KAAK,KAAMF,CAAG,CAC7B,EACAA,EAAI,SAAS,gBAAgB,iBAC3B,SACAE,EAAa,KAAK,KAAMF,CAAG,CAC7B,EACAA,EAAI,SAAS,YAAY,iBACvB,QACAY,GAAU,KAAK,KAAMZ,CAAG,CAC1B,CACF,CAKA,SAASa,IAAO,CACd,IAAMC,EAAWC,GAAe,EAC1BC,EAAQC,GAAY,EACpBC,EAAWC,GAAoB,CAAE,UAAWL,EAAS,cAAe,CAAC,EACrEM,EAAmB,OAAO,WAAW,oBAAoB,EAEzDpB,EAAM,CACV,SAAAc,EACA,MAAAE,EACA,SAAAE,EACA,aAAc,KACd,cAAe,KACf,cAAe,KACf,gBAAiB1B,GAAgB,KAC/B,KACAsB,EAAS,cACTA,EAAS,eACX,EACA,cAAelB,GAAc,KAAK,KAAMkB,EAAS,aAAa,EAC9D,YAAa,IACf,EAEAO,GAAqBP,EAAS,YAAY,EAC1CQ,GAA0BR,EAAS,gBAAgB,EAEnDd,EAAI,aAAeuB,GAAiB,CAClC,OAAQT,EAAS,aACjB,WAAYA,EAAS,iBACrB,YAAaA,EAAS,kBACtB,cAAeA,EAAS,aAC1B,CAAC,EAEDd,EAAI,YAAcM,GAAgB,KAAK,KAAMN,CAAG,EAChDwB,GAAeN,EAAUlB,EAAI,WAAW,EACxCyB,GAAYzB,CAAG,EACfC,EAA2BD,CAAG,EAC9BW,GAAkBX,CAAG,EACrB0B,GAAwB1B,CAAG,EAC3B2B,GAAwB3B,CAAG,EAE3BA,EAAI,cAAgB4B,GAAoB,CACtC,eAAgBzB,GAAsB,KAAK,KAAMH,CAAG,CACtD,CAAC,EACDA,EAAI,cAAc,KAAK,EAEvBA,EAAI,cAAgB6B,GAAoB,CACtC,YAAaT,EACb,gBAAiBN,EAAS,gBAC1B,oBAAqBA,EAAS,oBAC9B,iBAAkBA,EAAS,iBAC3B,YAAaA,EAAS,YACtB,gBAAiBd,EAAI,gBACrB,cAAeA,EAAI,cACnB,aAAAH,GACA,iBAAAC,EACF,CAAC,EACDE,EAAI,cAAc,OAAO,EAEzBO,GAAWP,CAAG,EACd8B,GAAuBhB,EAAS,iBAAkBA,EAAS,WAAW,EAElEiB,EAAiBb,CAAQ,GAC3BhB,EAAaF,CAAG,EAElBK,EAAuBL,EAAI,aAAa,EACxCgB,EAAM,YAAc,EACtB,CAEA,OAAO,iBAAiB,mBAAoBH,EAAI",
  "names": ["$", "selector", "root", "$$", "createElements", "$", "createState", "PronounSet", "_PronounSet", "options", "name", "trimmed", "lastLetter", "token", "personName", "key", "value", "pronounSets_default", "pickRandomPronounEntries", "pronounSets", "excludedGroups", "count", "entries", "set", "index", "i", "swapIndex", "buildPronounRecommendations", "wrapper", "title", "list", "label", "checkbox", "textNode", "row", "bindPronounCheckboxSync", "container", "event", "target", "input", "allPronounSets", "pronounSets_default", "def", "PronounSet", "buildGroup", "groupName", "entries", "group", "title", "list", "a", "b", "set", "index", "id", "label", "checkbox", "textNode", "row", "handleTogglePronounGroups", "extraList", "toggleButton", "isCollapsed", "populatePronounCheckboxes", "container", "primaryGroups", "recommendationEntries", "pickRandomPronounEntries", "primaryList", "groupedSets", "groupElement", "buildPronounRecommendations", "hasExtraGroups", "bindPronounCheckboxSync", "getSelectedPronounSets", "fallbackToRandom", "selectedIndexes", "box", "value", "SampleTexts", "SampleTexts_default", "getSampleTextEntry", "textKey", "SampleTexts_default", "isDeclensionText", "isRandomEligibleEntry", "entry", "populateTextSelector", "select", "key", "option", "getRandomEligibleOptions", "createTtsController", "onStatusChange", "available", "speaking", "voice", "utterance", "notify", "getGermanVoices", "voices", "candidate", "updateAvailability", "germanVoices", "stop", "speak", "text", "randomIndex", "sanitized", "nextUtterance", "toggle", "init", "getState", "ensureRow", "viewState", "update", "listenButton", "randomModeHidden", "button", "attach", "createMobileIconRow", "mobileQuery", "resultsControls", "randomModeContainer", "randomTextButton", "rerunButton", "getListenButton", "getHeadingRow", "getSelectRow", "getRandomModeRow", "mobileIconRow", "createFallbackDialogApi", "renderMarkerDialogText", "viewState", "text", "positionDialog", "target", "targetRect", "dialogRect", "viewportWidth", "viewportHeight", "padding", "gap", "arrowSize", "spaceAbove", "spaceBelow", "placeBelow", "placement", "top", "left", "arrowLeft", "clampedArrowLeft", "openDialog", "title", "trigger", "closeDialog", "handleDialogClose", "handleDocumentKeydown", "event", "handleOutsidePointer", "handleViewportChange", "handleDialogClick", "handleResultsClick", "pronounLabel", "formLabel", "sourceLabel", "handleResultsKeydown", "initMarkerDialog", "dialog", "dialogBody", "dialogTitle", "resultsOutput", "NAME_PLACEHOLDER", "REMOVE_NAME_LABEL", "ALERT_MIN_NAME", "SHARE_LAST_NAME_NOTICE", "SHARE_COPY_SUCCESS", "SHARE_COPY_BUTTON_LABEL", "SHARE_COPY_PROMPT_LABEL", "RESULTS_DEFAULT_HEADING", "FALLBACK_LAST_NAME_NOTICE", "LISTEN_LABEL", "STOP_LISTEN_LABEL", "createNameListState", "container", "maxNames", "getNameInputs", "nameList", "$$", "getNameRows", "countFilledNameInputs", "input", "hasAnyNameValues", "syncNameLabelTarget", "index", "updateNameButtons", "rows", "row", "removeButton", "$", "removeNameRow", "onChange", "currentIndex", "inputsAfter", "nextIndex", "handleNameInput", "handleNameKeydown", "event", "addNameRow", "handleRemoveClick", "createNameRow", "value", "NAME_PLACEHOLDER", "REMOVE_NAME_LABEL", "newInput", "ensureNameRows", "existingInputs", "existingValue", "hasProvidedLastName", "nameInputs", "input", "value", "getShareState", "salutationSelect", "textSelector", "pronounContainer", "randomMode", "markerToggle", "declensionTabId", "isDeclensionText", "$$", "box", "applyShareAvailability", "shareSheetButton", "shareButton", "getShareButtonLabel", "setShareCopiedState", "timeoutMs", "label", "setLabel", "text", "SHARE_COPY_SUCCESS", "SHARE_COPY_BUTTON_LABEL", "parseUrlState", "search", "maxNames", "params", "namesValue", "names", "value", "salutation", "textKey", "pronounsValue", "pronounIndexes", "randomMode", "markers", "declensionTabId", "buildShareUrl", "baseUrl", "pronouns", "name", "pronounValues", "url", "applyNameState", "ctx", "names", "value", "addNameRow", "updateNameButtons", "applySalutationState", "salutation", "applyTextState", "textKey", "applyPronounState", "pronounIndexes", "selectedSet", "checkbox", "applyRandomModeState", "randomMode", "applyMarkerState", "markers", "applyDeclensionState", "declensionTabId", "hydrateFlow", "stateFromUrl", "parseUrlState", "selectRandomTextIfUnset", "randomOptions", "getRandomEligibleOptions", "randomIndex", "lastNames", "lastNames_default", "firstNames", "firstNames_default", "getNameKey", "name", "parseNames", "inputs", "input", "value", "parts", "part", "lastName", "getRandomFirstName", "firstNames_default", "getRandomLastName", "lastNames_default", "createRandomFullName", "excludeKey", "attempts", "next", "firstName", "normalizeNames", "rawNames", "options", "defaultNameFactory", "person", "providedLastName", "isAutoGenerated", "DECLENSION_FIELDS", "getPronounFormLabel", "token", "trimmed", "lower", "match", "PronounTool", "_PronounTool", "value", "pronounSets", "arr", "idx", "token", "first", "getPronounFormLabel", "lower", "text", "people", "selectedSets", "randomMode", "fixedSet", "pickPerson", "fallback", "person", "resolveNameToken", "resolvedLastName", "usesLastNameToken", "resolveAddress", "surname", "replacement", "result", "usedAutoLastName", "i", "ch", "end", "trimmed", "pronounSet", "firstName", "safeReplacement", "safePronounLabel", "safeFormLabel", "lastName", "lastNameSource", "salutation", "isAutoGenerated", "nameReplacement", "nameSource", "safeNameSource", "DECLENSION_SAMPLE_SENTENCES", "tool", "PronounTool", "pickPlaceholderPerson", "names", "availablePeople", "person", "picked", "fallback", "createRandomFullName", "makeRadioTab", "id", "labelText", "checked", "label", "input", "span", "showPanel", "viewState", "activeInput", "isTable", "panel", "isActive", "handleTabChange", "event", "target", "createDeclensionView", "pronounSets", "initialTabId", "onTabChange", "declensionWrap", "placeholder", "placeholderName", "tabs", "tabList", "tableTab", "tableInput", "tablePanel", "samplePanels", "tableWrap", "table", "thead", "headRow", "corner", "set", "th", "tbody", "DECLENSION_FIELDS", "field", "row", "td", "value", "index", "card", "DECLENSION_SAMPLE_SENTENCES", "sentence", "rendered", "p", "handleTabChangeBound", "preferredTab", "createResultsHeader", "title", "ttsAvailable", "ttsSpeaking", "includeListenButton", "headingRow", "heading", "listenButton", "listenLabel", "STOP_LISTEN_LABEL", "LISTEN_LABEL", "tool", "PronounTool", "renderResults", "resultsContainer", "names", "pronounSets", "salutation", "textKey", "randomMode", "ttsAvailable", "ttsSpeaking", "declensionTabId", "onDeclensionTabChange", "selectedEntry", "getSampleTextEntry", "text", "isDeclensionView", "isDeclensionText", "safeNames", "createRandomFullName", "defaultNameSource", "person", "effectiveNames", "peopleWithSalutation", "headingRow", "heading", "listenButton", "createResultsHeader", "RESULTS_DEFAULT_HEADING", "view", "createDeclensionView", "paragraph", "result", "pronounSuffix", "disclaimer", "icon", "textNode", "FALLBACK_LAST_NAME_NOTICE", "getRandomMode", "elements", "getTtsState", "ttsController", "updateMobileIconLayout", "mobileIconRow", "clearListenButtons", "resultsOutput", "resultsControls", "container", "button", "updateListenButton", "getListenButton", "available", "speaking", "label", "STOP_LISTEN_LABEL", "LISTEN_LABEL", "icon", "$", "toggleSpeaking", "paragraph", "text", "wireListenButton", "ctx", "listenButton", "resetResultsUi", "handleDeclensionTabChange", "state", "tabId", "renderOutput", "options", "ttsState", "renderResults", "recordSingleSelection", "renderInfo", "randomMode", "getNameKey", "updateRandomModeVisibility", "isDeclensionText", "selectedCount", "checkbox", "filledNames", "countFilledNameInputs", "clearUrlParamsIfStable", "state", "url", "renderDeclensionOutput", "ctx", "renderOutput", "normalizeNames", "parseNames", "getNameInputs", "getSelectedPronounSets", "getRandomMode", "renderRandomPreview", "resetResultsUi", "isDeclensionText", "hasAnyNameValues", "previewName", "createRandomFullName", "renderInfo", "recordSingleSelection", "wireListenButton", "generateFlow", "clearUrlParamsIfStable", "hasNames", "updateRandomModeVisibility", "parsedNames", "ALERT_MIN_NAME", "normalizedNames", "renderRandomPreviewFlow", "chooseDifferent", "items", "lastKey", "getKey", "candidate", "attempts", "rerunFlow", "ctx", "resetResultsUi", "updateRandomModeVisibility", "generateFlow", "nameInputs", "getNameInputs", "hasNames", "hasAnyNameValues", "selectedPronouns", "getSelectedPronounSets", "canChangePronoun", "names", "normalizeNames", "parseNames", "createRandomFullName", "pronounSets", "chooseDifferent", "set", "getNameKey", "renderInfo", "renderOutput", "recordSingleSelection", "wireListenButton", "randomTextFlow", "ctx", "randomOptions", "getRandomEligibleOptions", "optionCount", "currentValue", "randomOption", "option", "generateFlow", "buildSharePayload", "ctx", "buildShareUrlForState", "hasProvidedLastName", "getNameInputs", "maybeWarnLastName", "includesLastName", "SHARE_LAST_NAME_NOTICE", "updateHistory", "shareUrl", "shareState", "getShareState", "getRandomMode", "isDeclensionText", "buildShareUrl", "shareSheetFlow", "error", "shareCopyFlow", "setShareCopiedState", "SHARE_COPY_PROMPT_LABEL", "updateMarkerStyle", "ctx", "clearUrlParamsIfStable", "getListenButton", "resultsOutput", "resultsControls", "$", "getHeadingRow", "getSelectRow", "getRandomModeRow", "handlePronounChange", "ctx", "updateRandomModeVisibility", "generateFlow", "handleTtsStatusChange", "updateListenButton", "updateMobileIconLayout", "handleNameInput", "wireEvents", "randomTextFlow", "shareSheetFlow", "shareCopyFlow", "updateMarkerStyle", "rerunFlow", "init", "elements", "createElements", "state", "createState", "nameList", "createNameListState", "mobileMediaQuery", "populateTextSelector", "populatePronounCheckboxes", "initMarkerDialog", "ensureNameRows", "hydrateFlow", "selectRandomTextIfUnset", "renderRandomPreviewFlow", "createTtsController", "createMobileIconRow", "applyShareAvailability", "hasAnyNameValues"]
}
